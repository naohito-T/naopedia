
<!DOCTYPE HTML>
<html lang="ja" >
    <head>
        <meta charset="UTF-8">
        <title>GitHub Actions · naopedia</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        <meta name="author" content="naohito-T">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expand-active-chapter/expand-active-chapter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../template/PULL_REQUEST_TEMPLATE.html" />
    
    
    <link rel="prev" href="../git.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="検索ワードを入力" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Naopedia
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Toc</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../../book/book.html">
            
                <a href="../../../book/book.html">
            
                    
                    Book
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../../book/principle/principle.html">
            
                <a href="../../../book/principle/principle.html">
            
                    
                    1. principle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../../cli/cli.html">
            
                <a href="../../../cli/cli.html">
            
                    
                    CLI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../../cli/file-manager/file-manager.html">
            
                <a href="../../../cli/file-manager/file-manager.html">
            
                    
                    1. file-manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../../cli/make/make.html">
            
                <a href="../../../cli/make/make.html">
            
                    
                    2. make
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../../../cli/shell/shell.html">
            
                <a href="../../../cli/shell/shell.html">
            
                    
                    3. shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.3.1" data-path="../../../cli/shell/bash/bash.html">
            
                <a href="../../../cli/shell/bash/bash.html">
            
                    
                    bash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.2" data-path="../../../cli/shell/command/command.html">
            
                <a href="../../../cli/shell/command/command.html">
            
                    
                    command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.3" data-path="../../../cli/shell/env/env.html">
            
                <a href="../../../cli/shell/env/env.html">
            
                    
                    env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.4" data-path="../../../cli/shell/script/script.html">
            
                <a href="../../../cli/shell/script/script.html">
            
                    
                    script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.5" data-path="../../../cli/shell/zsh/zsh.html">
            
                <a href="../../../cli/shell/zsh/zsh.html">
            
                    
                    zsh
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.6" data-path="../../../cli/shell/zsh/zsh.html">
            
                <a href="../../../cli/shell/zsh/zsh.html">
            
                    
                    zsh
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../../coding/coding.html">
            
                <a href="../../../coding/coding.html">
            
                    
                    Coding
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../../../coding/algorithm/algorithm.html">
            
                <a href="../../../coding/algorithm/algorithm.html">
            
                    
                    1. algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../../../coding/atcoder/atcoder.html">
            
                <a href="../../../coding/atcoder/atcoder.html">
            
                    
                    2. AtCoder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../../../coding/namerules/namerules.html">
            
                <a href="../../../coding/namerules/namerules.html">
            
                    
                    3. 命名規則
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="../../../coding/designpattern/designpattern.md">
            
                <span>
            
                    
                    4. Design Pattern
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../../db/db.html">
            
                <a href="../../../db/db.html">
            
                    
                    DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../../db/nosql/nosql.html">
            
                <a href="../../../db/nosql/nosql.html">
            
                    
                    1. NoSQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1.1" data-path="../../../db/nosql/redis/redis.html">
            
                <a href="../../../db/nosql/redis/redis.html">
            
                    
                    Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../../../db/orm/orm.html">
            
                <a href="../../../db/orm/orm.html">
            
                    
                    2. ORM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.2.1" data-path="../../../db/orm/typeorm/typeorm.html">
            
                <a href="../../../db/orm/typeorm/typeorm.html">
            
                    
                    TypeORM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="../../../db/sql/sql.html">
            
                <a href="../../../db/sql/sql.html">
            
                    
                    3. SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.3.1" data-path="../../../db/sql/mysql/mysql.html">
            
                <a href="../../../db/sql/mysql/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3.2" data-path="../../../db/sql/postgres/postgres.html">
            
                <a href="../../../db/sql/postgres/postgres.html">
            
                    
                    Postgres
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3.3" data-path="../../../db/sql/sqlite/sqlite.html">
            
                <a href="../../../db/sql/sqlite/sqlite.html">
            
                    
                    sqlite
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="../../../db/tuning/tuning.html">
            
                <a href="../../../db/tuning/tuning.html">
            
                    
                    4. Tuning
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../../design/design.html">
            
                <a href="../../../design/design.html">
            
                    
                    Design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../../../design/html/html.html">
            
                <a href="../../../design/html/html.html">
            
                    
                    1 html
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1.1" data-path="../../../design/html/tag.html">
            
                <a href="../../../design/html/tag.html">
            
                    
                    tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.1.2" data-path="../../../design/html/archit1ecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../../../design/css/css.html">
            
                <a href="../../../design/css/css.html">
            
                    
                    2 css
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.2.1" data-path="../../../design/css/property.md">
            
                <span>
            
                    
                    property
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2.2" data-path="../../../design/css/design.md">
            
                <span>
            
                    
                    design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2.3" data-path="../../../design/css/architecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../../../design/pwa/pwa.html">
            
                <a href="../../../design/pwa/pwa.html">
            
                    
                    3 pwa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.4" data-path="../../../design/sass/sass.md">
            
                <span>
            
                    
                    4 sass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5" data-path="../../../design/animation/animation.html">
            
                <a href="../../../design/animation/animation.html">
            
                    
                    5 animation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.5.1" data-path="../../../design/animation/flash.html">
            
                <a href="../../../design/animation/flash.html">
            
                    
                    flash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.2" data-path="../../../design/animation/gsap.html">
            
                <a href="../../../design/animation/gsap.html">
            
                    
                    gsap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.3" data-path="../../../design/animation/webgl.md">
            
                <span>
            
                    
                    WebGL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.6" data-path="../../../design/3D/3d.html">
            
                <a href="../../../design/3D/3d.html">
            
                    
                    6 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.7" data-path="../../../design/web/web.html">
            
                <a href="../../../design/web/web.html">
            
                    
                    7 Web(Webでのdesign案)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../../hardware/hardware.html">
            
                <a href="../../../hardware/hardware.html">
            
                    
                    Hardware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="../../../hardware/lowlayer/program.html">
            
                <a href="../../../hardware/lowlayer/program.html">
            
                    
                    1 低レイヤー
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.2" data-path="../../../hardware/os/os.html">
            
                <a href="../../../hardware/os/os.html">
            
                    
                    2 OS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../../../program/program.html">
            
                <a href="../../../program/program.html">
            
                    
                    Programing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.1" data-path="../../../program/c/c_c++.html">
            
                <a href="../../../program/c/c_c++.html">
            
                    
                    1. C/C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.2" data-path="../../../program/go/go.html">
            
                <a href="../../../program/go/go.html">
            
                    
                    2. Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3" data-path="../../../program/javascript/javascript.html">
            
                <a href="../../../program/javascript/javascript.html">
            
                    
                    3. JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.3.1" data-path="../../../program/javascript/dom/dom.html">
            
                <a href="../../../program/javascript/dom/dom.html">
            
                    
                    DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.2" data-path="../../../program/javascript/canvas/canvas.html">
            
                <a href="../../../program/javascript/canvas/canvas.html">
            
                    
                    Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.3" data-path="../../../program/javascript/ts/typescript.md">
            
                <span>
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.4" data-path="../../../program/javascript/vue/vue.html">
            
                <a href="../../../program/javascript/vue/vue.html">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.5" data-path="../../../program/javascript/nuxt/nuxt.html">
            
                <a href="../../../program/javascript/nuxt/nuxt.html">
            
                    
                    Nuxt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.6" data-path="../../../program/javascript/react/react.html">
            
                <a href="../../../program/javascript/react/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.7" data-path="../../../program/javascript/node/node.html">
            
                <a href="../../../program/javascript/node/node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.3.8" data-path="../../../program/javascript/json/package.md">
            
                <span>
            
                    
                    JSON
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7.4" data-path="../../../program/php/php.html">
            
                <a href="../../../program/php/php.html">
            
                    
                    4. PHP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.4.1" data-path="../../../program/php/Laravel/Laravel.html">
            
                <a href="../../../program/php/Laravel/Laravel.html">
            
                    
                    Laravel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7.5" data-path="../../../program/python/python.html">
            
                <a href="../../../program/python/python.html">
            
                    
                    5. Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.6" data-path="../../../program/ruby/ruby.html">
            
                <a href="../../../program/ruby/ruby.html">
            
                    
                    6. Ruby
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.6.1" data-path="../../../program/ruby/rails/rails.html">
            
                <a href="../../../program/ruby/rails/rails.html">
            
                    
                    Rails
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7.7" data-path="../../../program/dsl/dsl.html">
            
                <a href="../../../program/dsl/dsl.html">
            
                    
                    7 DSL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.7.1" data-path="../../../program/dsl/xml.html">
            
                <a href="../../../program/dsl/xml.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.7.2" data-path="../../../program/dsl/toml.html">
            
                <a href="../../../program/dsl/toml.html">
            
                    
                    TOML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.7.3" data-path="../../../program/dsl/正規表現.html">
            
                <a href="../../../program/dsl/正規表現.html">
            
                    
                    正規表現
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7.8" data-path="../../../program/全体に適用できる考え方.html">
            
                <a href="../../../program/全体に適用できる考え方.html">
            
                    
                    全体に適用できる考え方
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../../../middleware/README.md">
            
                <span>
            
                    
                    middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../../../infrastructure/infrastructure.html">
            
                <a href="../../../infrastructure/infrastructure.html">
            
                    
                    infrastructure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1" data-path="../../../infrastructure/docker/docker.html">
            
                <a href="../../../infrastructure/docker/docker.html">
            
                    
                    1 docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1.1" data-path="../../../infrastructure/docker/docker-compose.html">
            
                <a href="../../../infrastructure/docker/docker-compose.html">
            
                    
                    docker compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="../../../security/security.html">
            
                <a href="../../../security/security.html">
            
                    
                    セキュリティ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="../../../test/test.html">
            
                <a href="../../../test/test.html">
            
                    
                    テスト
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.11.1" data-path="../../../test/webUI/Cypress.md">
            
                <span>
            
                    
                    1. WebUI テスト
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="../../../performance/performance.html">
            
                <a href="../../../performance/performance.html">
            
                    
                    パフォーマンス
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="../../../plan/plan.html">
            
                <a href="../../../plan/plan.html">
            
                    
                    設計思想
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1" data-path="../../../plan/front/front.html">
            
                <a href="../../../plan/front/front.html">
            
                    
                    1. フロントエンド
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1.1" data-path="../../../plan/spa/ssr.md">
            
                <span>
            
                    
                    SPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.2" data-path="../../../plan/ssr/ssr.md">
            
                <span>
            
                    
                    SSR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.3" data-path="../../../plan/front/flux/flux.html">
            
                <a href="../../../plan/front/flux/flux.html">
            
                    
                    Flux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.4" data-path="../../../plan/front/bff/bff.html">
            
                <a href="../../../plan/front/bff/bff.html">
            
                    
                    BFF(Backends For Frontends)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.5" data-path="../../../plan/front/structure.html">
            
                <a href="../../../plan/front/structure.html">
            
                    
                    システムがWeb Pageを表示する仕組み
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.2" data-path="../../../plan/server/server.html">
            
                <a href="../../../plan/server/server.html">
            
                    
                    2. Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.2.1" data-path="../../../plan/server/mvc/mv*.html">
            
                <a href="../../../plan/server/mvc/mv*.html">
            
                    
                    MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.2" data-path="../../../plan/server/object/object.md">
            
                <span>
            
                    
                    Object指向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.3" data-path="../../../plan/server/ddd/ddd.html">
            
                <a href="../../../plan/server/ddd/ddd.html">
            
                    
                    DDD(Domain Driven Design)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.4" data-path="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                <a href="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                    
                    Clean Architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.3" data-path="../../../plan/infra/infra.html">
            
                <a href="../../../plan/infra/infra.html">
            
                    
                    3. インフラ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.3.1" data-path="../../../plan/infra/micro/micro.html">
            
                <a href="../../../plan/infra/micro/micro.html">
            
                    
                    マイクロサービスアーキテクチャ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="../../tools.html">
            
                <a href="../../tools.html">
            
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.14.1" data-path="../../editor/editor.html">
            
                <a href="../../editor/editor.html">
            
                    
                    1. editor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.14.1.1" data-path="../../editor/vim/vim.html">
            
                <a href="../../editor/vim/vim.html">
            
                    
                    Vim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.14.1.2" data-path="../../editor/vscode/vscode.html">
            
                <a href="../../editor/vscode/vscode.html">
            
                    
                    VSCode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.14.2" data-path="../git.html">
            
                <a href="../git.html">
            
                    
                    2. Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.14.2.1" data-path="actions.html">
            
                <a href="actions.html">
            
                    
                    GitHub Actions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.14.2.2" data-path="../template/PULL_REQUEST_TEMPLATE.html">
            
                <a href="../template/PULL_REQUEST_TEMPLATE.html">
            
                    
                    PULL_REQUEST_TEMPLATE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.14.2.3" data-path="../cli/cli.html">
            
                <a href="../cli/cli.html">
            
                    
                    Git CLI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.14.3" data-path="../../homebrew/homebrew.html">
            
                <a href="../../homebrew/homebrew.html">
            
                    
                    3. homebrew
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            HonKitで公開 
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >GitHub Actions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="github-actionsとは"><a name="github-actionsとは" class="plugin-anchor" href="#github-actionsとは"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actionsとは</h1>
<p><a href="https://developers.cyberagent.co.jp/blog/archives/36423/" target="_blank">GitHub Actionsベストプラティクス</a></p>
<ul>
<li>現在のソフトウェア開発における課題<blockquote>
<p>ソフトウェア開発を取り巻く環境は日々変化し、様々なツールやライブラリが次々と登場する時代がやってきました。これまで人が行っていた作業やハードウェアが実行していたタスクは、どんどんソフトウェアに置き換えられ、我々はソフトウェアに覆われた世界に向かって加速しています。これは喜ばしいことですが、一方で新しいツールができることや、それらを正しく連携させるための設定はどんどん複雑化し、本来の目的だったソフトウェア開発のために十分な時間を取れないといったケースが増えています。
ソフトウェアのソースコードを一定の品質に保ちつつ速いサイクルで開発・デプロイするために、現代ではこれだけ多様な技術が使われるようになりました。テスト、ビルド、デプロイのパターンだけでも多くの選択肢があり、その他のツールの利用も含めると組み合わせは無限にあります。苦労してプロジェクトに最適な組み合わせを見つけ、ワークフローを作り上げたとしても、今まではそれをコードとして記述するスタンダードな方法がなかったので、GitHub上で共有したり再利用することができないという問題がありました。
GitHubの利用形態について分析すると、全ユーザの約60％がリポジトリと何らかの外部ツールやサービスを連携させている、という結果がわかっていました。そこでGitHubでは、ソフトウェア開発のプラットフォームとしてこの問題を解決し、開発者の体験をより良いものにするにはどうしたらいいか考え、2018年10月にGitHub Actionsを発表しました。</p>
</blockquote>
</li>
</ul>
<h2 id="github-actions-料金"><a name="github-actions-料金" class="plugin-anchor" href="#github-actions-料金"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actions 料金</h2>
<p>※前提としてプライベートリポジトリが料金かかる。パブリックは無料。
OSによって料金が変わる。
Linuxは1分あたり0.008ドルと安価
Windowsは0.016ドル（2倍）
macOSは0.08ドル（10倍）という価格</p>
<h2 id="github-actions実行単位"><a name="github-actions実行単位" class="plugin-anchor" href="#github-actions実行単位"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actions実行単位</h2>
<p>3つの実行単位が存在する。</p>
<ul>
<li>workflow</li>
<li>Job</li>
<li>Step</li>
</ul>
<h2 id="高速化"><a name="高速化" class="plugin-anchor" href="#高速化"><i class="fa fa-link" aria-hidden="true"></i></a>高速化</h2>
<p>CI/CDのビルドでは、リポジトリが依存するパッケージのダウンロードが原因でビルド時間が長くなってしまうことがある。
理由として、近年のCI/CDではビルドごとに完全にクリーンな実行環境が用意され、前回のビルドでダウンロードしたファイルが持ち越されないため。
このため、CI/CDが提供するキャッシュ機能を用いて、異なるビルド間でダウンロードしたパッケージを使い回して高速化することがよくある。
GitHub Actionsでもキャッシュ機能が提供されている。</p>
<hr>
<h2 id="action内で止まる条件"><a name="action内で止まる条件" class="plugin-anchor" href="#action内で止まる条件"><i class="fa fa-link" aria-hidden="true"></i></a>Action内で止まる条件</h2>
<p>GitHub Actionsの処理では警告（warn）はsuccessとして通るので注意。</p>
<h2 id="cache"><a name="cache" class="plugin-anchor" href="#cache"><i class="fa fa-link" aria-hidden="true"></i></a>cache</h2>
<p><a href="https://papix.hatenablog.com/entry/2020/04/14/110000" target="_blank">GitHub Actionsの知見</a>
<a href="https://github.com/actions/cache" target="_blank">リファレンスv3</a></p>
<p><strong>キャッシュ有効期限</strong>
おそらくキャッシュサーバから削除されるのは<strong>7日間アクセスがなかったら削除</strong>される。</p>
<p><strong>キャッシュスコープ</strong>
キャッシュのスコープはキーとブランチです。
デフォルトのブランチ キャッシュは、他のブランチで使用できる（developのは他で使える）。
トピックブランチはトピックブランチ内でしか使えない。</p>
<p>GitHub Actions公式のキャッシュ機能である<code>actions/cache</code>は</p>
<ul>
<li>Pull Requestでコケた時にRe-run jobsするとactions/cacheアクションが正常に動作しない</li>
<li>actions/cacheアクションは時折キャッシュの取得に失敗することがある</li>
</ul>
<p>GitHub Actionsにはactions/cacheというものがあって、ビルド時の依存関係を解決したものとかをキャッシュしておくことができます。
標準ではGitHubが提供するキャッシュサーバにファイルが保存されるんですが、さまざまな事情により自分たちが管理するストレージに置きたいことがあります。</p>
<p>以下のusesの結果
出力として<strong>cache-hitというbool値が出力される。</strong>
GitHubにはこう書いてありますが、falseが空値で返ってくることや、後に出てくる判定で&apos;true&apos;を使っていることから、文字列が返ってきている気がします。</p>
<pre><code class="lang-yml"><span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/cache@v1</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">~/go/pkg/mod</span> <span class="hljs-comment"># キャッシュの保存先（ディレクトリ）を指定する</span>
    <span class="hljs-attr">key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">runner.os</span> <span class="hljs-string">}}-go-${{</span> <span class="hljs-string">hashFiles(&apos;**/go.sum&apos;)</span> <span class="hljs-string">}}</span> <span class="hljs-comment"># どのキャッシュを使うかなどの識別子に使う</span>
    <span class="hljs-attr">restore-keys:</span> <span class="hljs-string">|</span> <span class="hljs-comment"># keyが見つからなかった場合に、他のキャッシュを探索するのに使うキーを指定</span>
      <span class="hljs-string">${{</span> <span class="hljs-string">runner.os</span> <span class="hljs-string">}}-go-</span>
</code></pre>
<ul>
<li>uses: actions/cache@v1がやっていること
path, keyは必須で、restore-keysのみオプションです。</li>
</ul>
<p>次に、このactionが何をやっているのか、簡単に整理します。</p>
<ol>
<li>keyやrestore-keysに基づいて、キャッシュが存在するか調査します。</li>
<li>調査結果ごとの処理を行います。</li>
</ol>
<p>キャッシュが存在すれば、cache-hitにtrueが入る。job終了時、キャッシュの保存は行われない。
キャッシュが存在しなかった場合、keyを予約。cache-hitには空値が入っている。job終了時、pathで指定されたディレクトリにキャッシュの保存を試みる。作られるキャッシュは、keyで識別可能になります。</p>
<h2 id="プロジェクトにcacheを適用する"><a name="プロジェクトにcacheを適用する" class="plugin-anchor" href="#プロジェクトにcacheを適用する"><i class="fa fa-link" aria-hidden="true"></i></a>プロジェクトにcacheを適用する</h2>
<p>これが助けてくれた
<a href="https://qiita.com/akubi0w1/items/2f4bf5d3ce7e5e77dfd7" target="_blank">参考URL</a></p>
<h2 id="cache生存確認"><a name="cache生存確認" class="plugin-anchor" href="#cache生存確認"><i class="fa fa-link" aria-hidden="true"></i></a>cache生存確認</h2>
<p><a href="https://stackoverflow.com/questions/63521430/clear-cache-in-github-actions" target="_blank">参考URL</a>
2022年6月27日以降
GitHub Actions Cache APIを介してキャッシュのクエリと管理ができるようになった。</p>
<p>新しいキャッシュを使用したい場合は<code>key</code>および<code>restore-keys</code>どちらかを変更する必要。</p>
<h2 id="github-アクションのキャッシュが古くなる。"><a name="github-アクションのキャッシュが古くなる。" class="plugin-anchor" href="#github-アクションのキャッシュが古くなる。"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub アクションのキャッシュが古くなる。</h2>
<p><a href="https://github.com/vercel/next.js/issues/27129" target="_blank">参考URL</a></p>
<hr>
<h2 id="github-action処理-種類"><a name="github-action処理-種類" class="plugin-anchor" href="#github-action処理-種類"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Action処理 種類</h2>
<ul>
<li>post処理
ジョブのステップが全部終わった後に行う処理のこと。<blockquote>
<p>基本的には action で設定したものをもとに戻したり、docker コンテナを停止したりするのに利用されています。</p>
</blockquote>
</li>
</ul>
<h2 id="github-actions動作環境遍歴"><a name="github-actions動作環境遍歴" class="plugin-anchor" href="#github-actions動作環境遍歴"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actions動作環境遍歴</h2>
<p>Docker（遅い）→ Node（デファクトスタンダード）</p>
<ul>
<li>DockerベースのGitHub Actions（よかったが動作が遅すぎる）</li>
<li>Nodeベース（早いけどシェルスクリプトでできる動作ができない場合も）</li>
</ul>
<p><a href="https://kbigwheel.hateblo.jp/entry/docker-base-github-actions-blues" target="_blank">参考URL</a></p>
<h2 id="github-actionでできること"><a name="github-actionでできること" class="plugin-anchor" href="#github-actionでできること"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actionでできること</h2>
<p><a href="https://knowledge.sakura.ad.jp/23478/" target="_blank">参考URL</a></p>
<ul>
<li>cronみたいなこと</li>
<li>webhooksで実行</li>
<li>pushなどのGitHub eventで実行</li>
</ul>
<p>GitHub Actionsは、ほかのCI/CDツールと同様、リポジトリに対するプッシュやプルリクエストといった操作、もしくは指定した時刻になるといったイベントをトリガーとして、あらかじめ定義しておいた処理を実行する機能。</p>
<p>たとえばリポジトリにコミットが行われた際に特定の処理を実行したり、毎日決まった時刻に特定の処理を実行したりする、といったことを実現できる。これらの処理はGitHubが提供するサーバー上に用意された仮想マシン内で実行できるため、<strong>ユーザーが独自にサーバーなどを準備する必要はない点が最大のメリット。</strong></p>
<p><strong>仮想マシン上で利用できるOSとは</strong>
仮想マシン上で利用できるOSとしては、Linux（Ubuntu）およびWindows、macOSに対応している。
仮想マシン上にはOSだけでなく、<strong>さまざまな言語のコンパイラや各種ランタイム、主要ライブラリといったソフトウェア開発環境も標準でインストールされている。</strong>
さらに、sudoコマンドを使ってroot権限でコマンドを実行させることもできる。
つまり<strong>一般的なサーバー上で実行できるほとんどの処理を実行</strong>できる。
利用規約によって禁止されている処理ですら（アカウント凍結といったペナルティなどを受ける可能性は高いが）実行自体は可能。</p>
<p>また特別なハードウェアが必要な場合や、後述する制約を回避したい場合、
また仮想マシン内でなく実マシン上で実行させたいといった場合は、ユーザーのサーバー上で処理を実行させることもできるようになっている。</p>
<hr>
<p>GitHub Action基本</p>
<p><a href="https://helve-blog.com/posts/git/introduction-to-github-actions/" target="_blank">これがわかりやすい</a>
<a href="https://qiita.com/HeRo/items/935d5e268208d411ab5a" target="_blank">参考URL</a></p>
<h2 id="workflowの定義"><a name="workflowの定義" class="plugin-anchor" href="#workflowの定義"><i class="fa fa-link" aria-hidden="true"></i></a>workflowの定義</h2>
<p>リポジトリに次のディレクトリを作成し、その中にYAML形式で定義する</p>
<p><code>.github/workflows/</code>
YAMLファイルの名前は自由</p>
<h2 id="workflowsの中身を確認してみる"><a name="workflowsの中身を確認してみる" class="plugin-anchor" href="#workflowsの中身を確認してみる"><i class="fa fa-link" aria-hidden="true"></i></a>workflowsの中身を確認してみる</h2>
<p>ymlのnameがActionsの<a href="../../../GLOSSARY.html#test" class="glossary-term" title="これは、テスト用の単語です。">test</a>一覧に
ymlのjogsの<a href="../../../GLOSSARY.html#test" class="glossary-term" title="これは、テスト用の単語です。">test</a>名がnameに紐付きじゃばらで出る</p>
<p><img src="image/workflow.png" alt="workflow"></p>
<h2 id="拡張子"><a name="拡張子" class="plugin-anchor" href="#拡張子"><i class="fa fa-link" aria-hidden="true"></i></a>拡張子</h2>
<p><code>.yml</code> <code>.yaml</code>のどちらでも可能。</p>
<h2 id="job"><a name="job" class="plugin-anchor" href="#job"><i class="fa fa-link" aria-hidden="true"></i></a>job</h2>
<p>ひとつのファイルに複数のjobを指定可能。
原則として各jobは並列に実行されるが依存関係（他のジョブ終了を待つ）を設定することも可能。</p>
<p><a href="https://qiita.com/yokawasa/items/dc46ae6936b745af8b80" target="_blank">複数Job間でデータを共有する</a></p>
<p>各ジョブは<strong>仮想環境の新しいインスタンスで実行される</strong>（つまり別々のGitHub Actions Runner（別々のOS）で実行される）
したがって<strong>ジョブ間で環境変数やファイル/セットアップ処理の結果などは共有されない</strong></p>
<ul>
<li>共有したい場合
解決策の1つにArtifactsのUpload/Downloadがある。
残念ながら今のところGitHub ActionsにはJob間で共有可能なグローバルスコープの変数などはなく...</li>
</ul>
<pre><code class="lang-yml"><span class="hljs-comment"># job1の成果物をjob2にはdefaultでは共有ができない。</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">job1:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
  <span class="hljs-attr">job2:</span>
    <span class="hljs-attr">runs-on:</span>
</code></pre>
<h2 id="steps"><a name="steps" class="plugin-anchor" href="#steps"><i class="fa fa-link" aria-hidden="true"></i></a>Steps</h2>
<p>実行コンテキストという観点
GitHub Actionsでは<strong>Stepごとに1つのシェルが与えられる。</strong>（つまり異なるStepに書かれたコマンドは違うシェル上で実行される）</p>
<p>jobが実行する処理の集合
同じjobのstepは同じ仮想環境で実行されるので<strong>ファイルやセットアップ処理は共有できる。</strong>
しかし各ステップは別プロセスなので<strong>ステップ内で定義した環境変数は共有できない。</strong>
<code>jobs.&lt;job_id&gt;.env</code>で定義した環境変数は全stepで利用できる
※jobの中にさらに細かい粒度で、stepが存在:stepはjobと違い<strong>上から順に実行される</strong></p>
<pre><code class="lang-yml"><span class="hljs-comment"># job1の成果物をjob2にはdefaultでは共有ができない。</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
  <span class="hljs-attr">job1:</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
  <span class="hljs-attr">job2:</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
</code></pre>
<h2 id="アクション"><a name="アクション" class="plugin-anchor" href="#アクション"><i class="fa fa-link" aria-hidden="true"></i></a>アクション</h2>
<p>ワークフローの最小構成
runコマンドでの実行ができ、GitHubやサードパーティの公開アクションを利用（use）することもできる。</p>
<h2 id="jobが実行される仮想環境のスペック"><a name="jobが実行される仮想環境のスペック" class="plugin-anchor" href="#jobが実行される仮想環境のスペック"><i class="fa fa-link" aria-hidden="true"></i></a>jobが実行される仮想環境のスペック</h2>
<p>2コアCPU
7GBのRAMメモリ
14GBのSSDディスク容量</p>
<h2 id="料金"><a name="料金" class="plugin-anchor" href="#料金"><i class="fa fa-link" aria-hidden="true"></i></a>料金</h2>
<p>public : 無料
private : linuxで  $0.008/minかかる。</p>
<p>0.008/min=0.008/min=0.48/hour = 約52円/hour（$1=108.4円）
10分かかるビルドを実行すると約9円かかる。
Freeアカウントで2,000分/月無料。</p>
<h2 id="permission"><a name="permission" class="plugin-anchor" href="#permission"><i class="fa fa-link" aria-hidden="true"></i></a>Permission</h2>
<p>リポジトリごとにどのGitHub Actionを利用できるのか？
あるいは、Workflow中でリポジトリの読み書きを許可するかを設定できる</p>
<p>設定はリポジトリのSettings/Actionsにある。</p>
<h2 id="ファイルシステム"><a name="ファイルシステム" class="plugin-anchor" href="#ファイルシステム"><i class="fa fa-link" aria-hidden="true"></i></a>ファイルシステム</h2>
<p>Dockerコンテナーで実行されるアクションには、<code>/github</code>パスの下に静的なディレクトリがある。
Dockerコンテナーで実行されないアクションでは3つのディレクトリが作成される。これらのディレクトリパスは動的に生成されるので一定ではない。各ディレクトリの位置は対応する環境変数で取得する。
home（HOME）： ユーザ認証情報などのユーザ関連データが書き込まれる
workspace（GITHUB_WORKSPACE）：アクションが実行されるワークディレクトリ
workflow：workflow/event.json（GITHUB_EVENT_PATH）が書き込まれるディレクトリ</p>
<h2 id="公開されているアクション"><a name="公開されているアクション" class="plugin-anchor" href="#公開されているアクション"><i class="fa fa-link" aria-hidden="true"></i></a>公開されているアクション</h2>
<p>GitHub自身が作成しているActionがリポジトリで公開されている。
サードパーティが作ったものはマーケットプレイスで探せる。</p>
<p><a href="https://github.com/actions" target="_blank">GitHub製のアクション</a>
<a href="https://github.com/actions" target="_blank">サードパーティ製のアクションのレジストリ</a></p>
<hr>
<h2 id="tips"><a name="tips" class="plugin-anchor" href="#tips"><i class="fa fa-link" aria-hidden="true"></i></a>Tips</h2>
<p><strong>ワークフローの状態バッチを作成する</strong>
プロジェクトトップのREADMEにはバッチを作成し、現状の状態を視覚で表現するのが通例とのこと。
<a href="https://docs.microsoft.com/ja-jp/dotnet/devops/dotnet-test-github-action" target="_blank">参考URL</a></p>
<p><img src="image/バッチ.png" alt="これ"></p>
<p><strong>複数のコマンドを run: したい</strong>
通常のYAML文法にしたがってマルチラインのテキストとして記載すればいい</p>
<pre><code class="lang-yml">   <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">run</span> <span class="hljs-string">multi</span> <span class="hljs-string">command</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span>  <span class="hljs-comment"># &lt;- ここがミソ</span>
          <span class="hljs-string">git</span> <span class="hljs-string">config</span> <span class="hljs-string">--global</span> <span class="hljs-string">user.email</span> <span class="hljs-string">&quot;someone@sample.com&quot;</span>
          <span class="hljs-string">git</span> <span class="hljs-string">config</span> <span class="hljs-string">--global</span> <span class="hljs-string">user.name</span> <span class="hljs-string">&quot;github workflow&quot;</span>
          <span class="hljs-string">git</span> <span class="hljs-string">add</span> <span class="hljs-string">.</span>
          <span class="hljs-string">git</span> <span class="hljs-string">commit</span> <span class="hljs-string">-m</span> <span class="hljs-string">&apos;modify manifests&apos;</span>
          <span class="hljs-string">git</span> <span class="hljs-string">status</span>
</code></pre>
<p><strong>プルリクエストの内容で実行するかしないかを決める</strong>
コンテキストgithubにワークフローに関する情報が色々入っている
たとえば、プルリクエストイベントでトリガーするワークフローだとgithub.event.pull_requestにGitHub REST APIのpull_request相当のプルリクの情報が格納されている</p>
<p><a href="https://docs.github.com/ja/actions/learn-github-actions/contexts" target="_blank">githubコンテキスト</a></p>
<p>例：WIPラベルがついている時だけ、実行するjob</p>
<pre><code class="lang-yml">  <span class="hljs-attr">jobs:</span>
    <span class="hljs-string">&lt;job_name&gt;:</span>
      <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
      <span class="hljs-attr">if:</span> <span class="hljs-string">&quot;contains(join(github.event.pull_request.labels.*.name), &apos;WIP&apos;)&quot;</span>
      <span class="hljs-attr">steps:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">&lt;COMMAND</span>
        <span class="hljs-string">…以下略</span>
</code></pre>
<p><strong>チェックアウトするブランチを指定する</strong>
チェックアウトしたgit状態</p>
<pre><code class="lang-yml">    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v1</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">git</span> <span class="hljs-string">status</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">git</span> <span class="hljs-string">branch</span>

    <span class="hljs-comment"># Run git status</span>
    <span class="hljs-comment"># nothing to commit, working tree clean</span>
    <span class="hljs-comment"># Run git status</span>
    <span class="hljs-comment"># HEAD detached at pull/21/merge</span>
    <span class="hljs-comment"># nothing to commit, working tree clean</span>
    <span class="hljs-comment"># Run git branch</span>
    <span class="hljs-comment"># * (HEAD detached at pull/21/merge)</span>
</code></pre>
<h2 id="github-action-local実行-act"><a name="github-action-local実行-act" class="plugin-anchor" href="#github-action-local実行-act"><i class="fa fa-link" aria-hidden="true"></i></a>github action local実行 (act)</h2>
<p><a href="https://dev.classmethod.jp/articles/act-for-github-actions-local-execution-tool/" target="_blank">参考(これがいい)</a></p>
<p><a href="https://zenn.dev/usagiga/articles/f44be764419e15700247" target="_blank">参考URL</a></p>
<p>push
<code>$ act</code>
pull_request
<code>$ act pull_request</code></p>
<pre><code class="lang-sh"><span class="hljs-comment"># Command structure:</span>
act [&lt;event&gt;] [options]
If no event name passed, will default to <span class="hljs-string">&quot;on: push&quot;</span>

<span class="hljs-comment"># List the actions for the default event:</span>
act -l

<span class="hljs-comment"># List the actions for a specific event:</span>
act workflow_dispatch -l

<span class="hljs-comment"># Run the default (`push`) event:</span>
act

<span class="hljs-comment"># Run a specific event:</span>
act pull_request

<span class="hljs-comment"># Run a specific job:</span>
act -j <span class="hljs-built_in">test</span>

<span class="hljs-comment"># Run in dry-run mode:</span>
act -n

<span class="hljs-comment"># Enable verbose-logging (can be used with any of the above commands)</span>
act -v
</code></pre>
<hr>
<h2 id="workflows-各コマンド名について"><a name="workflows-各コマンド名について" class="plugin-anchor" href="#workflows-各コマンド名について"><i class="fa fa-link" aria-hidden="true"></i></a>workflows 各コマンド名について</h2>
<p><a href="https://zenn.dev/masaaania/articles/c930f2f755a577" target="_blank">チートシート</a></p>
<pre><code class="lang-yml"><span class="hljs-comment"># feature/aaaで動く。 feature/aaa/bbbでは動かない</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branch:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">feature/*</span>

<span class="hljs-comment"># feature/aaa, feature/aaa/bbbで動く</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branch:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">feature/**</span>

<span class="hljs-comment"># なにかしらのtagがpushされたときに実行、branchのpushは無視</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">tags:</span> [ <span class="hljs-string">&apos;**&apos;</span> ]
    <span class="hljs-attr">branches-ignore:</span> [ <span class="hljs-string">&apos;**&apos;</span> ]

<span class="hljs-comment"># 指定したpathの変更だけでは実行しない</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>
    <span class="hljs-attr">paths-ignore:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&apos;*.md&apos;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&apos;docs/**&apos;</span>
</code></pre>
<h2 id="workflowdispatch"><a name="workflowdispatch" class="plugin-anchor" href="#workflowdispatch"><i class="fa fa-link" aria-hidden="true"></i></a>workflow_dispatch</h2>
<p><a href="https://note.com/watura/n/nd9e55ceb77ac" target="_blank">Workflow Dispatch最高</a></p>
<p>このコンテキストは、GitHub上のGitHub Actionsの画面からworkflowを実行できるようにするTrigger</p>
<p>以下のことができるようになる
・Web UI から任意のタイミングで実行
・実行時にパラメータを渡す
・repository_dispatch のように curl でも呼び出せる?</p>
<h2 id="workflowの構造"><a name="workflowの構造" class="plugin-anchor" href="#workflowの構造"><i class="fa fa-link" aria-hidden="true"></i></a>workflowの構造</h2>
<p><strong>ワークフローは並列で実行される。</strong></p>
<pre><code class="lang-yml"><span class="hljs-string">ワークフロー（YAMLファイル）</span>
  <span class="hljs-string">└</span> <span class="hljs-attr">jobs:</span>
    <span class="hljs-string">└</span> <span class="hljs-string">ジョブ(名前は任意)</span>
       <span class="hljs-string">└</span> <span class="hljs-attr">steps:</span>
         <span class="hljs-string">└</span> <span class="hljs-string">アクション</span>
</code></pre>
<h2 id="各コマンドわかっていることをかく"><a name="各コマンドわかっていることをかく" class="plugin-anchor" href="#各コマンドわかっていることをかく"><i class="fa fa-link" aria-hidden="true"></i></a>各コマンドわかっていることをかく</h2>
<pre><code class="lang-yml"><span class="hljs-attr">name:</span> <span class="hljs-string">deploy-fanclub-ui-dev</span> <span class="hljs-comment"># GitHub Actionsのリストに表示される</span>

<span class="hljs-attr">on:</span> <span class="hljs-comment"># GitHub Actionが実行されるトリガーを設定できる。</span>
  <span class="hljs-attr">workflow_dispatch:</span>
    <span class="hljs-attr">inputs:</span>
      <span class="hljs-attr">ref:</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;checkout ref name (ex: tag, branch, sha1)&quot;</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">&quot;&quot;</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;develop&quot;</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;fanclub-ui/**&quot;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;.github/workflows/deploy_fanclub_ui_dev.yml&quot;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;!**.md&quot;</span>

<span class="hljs-comment"># jobsごとに仮想環境が立ち上げられる。そのためjobsを跨いでの変数の共有は無理</span>
<span class="hljs-attr">jobs:</span> <span class="hljs-comment"># jobsの内容がname配下に表示される</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-18.04</span> <span class="hljs-comment"># ジョブを実行する仮想環境を指定</span>
    <span class="hljs-comment"># ジョブ内で実行するタスク（ステップ）</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-comment"># usesを使用することにより再利用可能なコードを宣言することができる</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">toko-bifrost/ms-teams-deploy-card@master</span>
        <span class="hljs-attr">with:</span> <span class="hljs-comment"># usesでの設定を追加できる</span>
          <span class="hljs-attr">github-token:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">webhook-uri:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.TEAMS_WEBHOOK_URL</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">card-layout-start:</span> <span class="hljs-string">complete</span>
          <span class="hljs-attr">card-layout-exit:</span> <span class="hljs-string">complete</span>
          <span class="hljs-attr">show-on-start:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">show-on-exit:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">environment:</span> <span class="hljs-string">develop_cfc_fanclub_ui</span>

      <span class="hljs-comment"># 再利用可能なコードで、リポジトリをチェックアウトする</span>
      <span class="hljs-comment"># （あなたのリポジトリ（コード）を $GITHUB_WORKSPACE に持ってきて、ワークフローがそのコードにアクセスできるようにする）</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">ref:</span> <span class="hljs-string">&quot;$<span class="hljs-template-variable">{{ github.event.inputs.ref }}</span>&quot;</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">node.js</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v2</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">&quot;12.20.1&quot;</span>
          <span class="hljs-attr">cache:</span> <span class="hljs-string">&quot;yarn&quot;</span>
          <span class="hljs-attr">cache-dependency-path:</span> <span class="hljs-string">fanclub-ui/yarn.lock</span>

      <span class="hljs-comment"># 同じブランチでのジョブの同時実行を防ぐ</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Block</span> <span class="hljs-string">Concurrent</span> <span class="hljs-string">Executions</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">softprops/turnstyle@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">continue-after-seconds:</span> <span class="hljs-number">600</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">}}</span>
      <span class="hljs-comment"># apt-getでaptのアップデートとデプロイに必要なツールのインストール</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">apt-get</span> <span class="hljs-comment"># コマンドの実行履歴でnameで指定した部分がGitHub Actionsに表示される</span>
        <span class="hljs-comment"># CircleCIと同じでコマンドを実行できる</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          sudo apt-get update &amp;&amp; sudo apt-get install yarn
          make setup-env-manager
</span>      <span class="hljs-comment"># 開発環境にデプロイ</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">dev</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          cd fanclub-ui
</span>
          <span class="hljs-string">touch</span> <span class="hljs-string">.env.aws</span> <span class="hljs-comment"># .env.aws 作成</span>
          <span class="hljs-string">make</span> <span class="hljs-string">env-apply</span> <span class="hljs-comment"># .env.main, .env.override 作成</span>
          <span class="hljs-string">cat</span> <span class="hljs-string">.env.main</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">.env</span> <span class="hljs-comment"># serverless-dotenv-plugin 向けの .env 作成</span>

          <span class="hljs-string">yarn</span>
          <span class="hljs-string">yarn</span> <span class="hljs-string">optimize-node-modules</span>
          <span class="hljs-string">rm</span> <span class="hljs-string">-f</span> <span class="hljs-string">app/static/robots.txt</span> <span class="hljs-comment"># prd 以外では含めない</span>
          <span class="hljs-string">direnv</span> <span class="hljs-string">exec</span> <span class="hljs-string">.</span> <span class="hljs-string">make</span> <span class="hljs-string">deploy</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">STAGE:</span> <span class="hljs-string">dev</span>
          <span class="hljs-attr">AWS_ACCESS_KEY_ID:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.AWS_ACCESS_KEY_ID_DEV_FOR_FANCLUB_UI</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">AWS_SECRET_ACCESS_KEY:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.AWS_SECRET_ACCESS_KEY_DEV_FOR_FANCLUB_UI</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">AWS_REGION:</span> <span class="hljs-string">ap-northeast-1</span>
          <span class="hljs-attr">COMMIT_SHA:</span> <span class="hljs-string">${{</span> <span class="hljs-string">github.sha</span> <span class="hljs-string">}}</span>
</code></pre>
<h2 id="envについて"><a name="envについて" class="plugin-anchor" href="#envについて"><i class="fa fa-link" aria-hidden="true"></i></a>envについて</h2>
<p><a href="https://qiita.com/inouet/items/c7d39ac4641c05eec4a0" target="_blank">github secret KEY</a></p>
<p>仮想環境でactionが実行されるため、それを反映させるためにdirenvで反映させるのはめんどくさそう
GitHub上で使用できるenvがある</p>
<pre><code class="lang-yml"><span class="hljs-comment"># .github/workflows/hello.yml</span>

<span class="hljs-attr">name:</span> <span class="hljs-string">Hello</span>
<span class="hljs-attr">on:</span> <span class="hljs-string">push</span>
<span class="hljs-attr">env:</span>
  <span class="hljs-attr">SECRET_HOGE_1:</span> <span class="hljs-string">${{secrets.SECRET_HOGE}}</span> <span class="hljs-comment">## ※1</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">hello:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">Hello</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@master</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">run</span> <span class="hljs-string">hello</span> <span class="hljs-string">action</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">SECRET_HOGE_2:</span> <span class="hljs-string">${{secrets.SECRET_HOGE}}</span>  <span class="hljs-comment">## ※2</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">./.github/actions/hello</span>
</code></pre>
<hr>
<h2 id="github-action-種類"><a name="github-action-種類" class="plugin-anchor" href="#github-action-種類"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Action 種類</h2>
<ul>
<li>パブリックなアクション</li>
</ul>
<p>GitHub Actionsでは開発者がアクション（Lintやテストといったジョブなど）を使って公開することができる。
この公開されたアクションは世界中の人が使える。もちろん自分のプロジェクトに持ってきて使用が可能。
この<strong>公開されたアクションのことをパブリックアクション</strong>という。</p>
<ul>
<li>プライベートなアクション
自分のプロジェクトでしか使えないやつ</li>
</ul>
<p><a href="https://yyh-gl.github.io/tech-blog/blog/github-actions-private-action/" target="_blank">参考URL</a></p>
<p>注意
<strong>プライベートアクションを使用するときはチェックアウト必須!</strong></p>
<p>公開しないアクション
ディレクトリ構造は以下となる。</p>
<pre><code class="lang-sh">.github
├── actions
│   └── golang-test
│       ├── Dockerfile
│       ├── action.yml
│       └── entrypoint.sh
└── workflows
    └── golang.yml
</code></pre>
<h2 id="重要ポイント-プライベートアクションとパブリックアクションでの設定差異"><a name="重要ポイント-プライベートアクションとパブリックアクションでの設定差異" class="plugin-anchor" href="#重要ポイント-プライベートアクションとパブリックアクションでの設定差異"><i class="fa fa-link" aria-hidden="true"></i></a>重要ポイント: プライベートアクションとパブリックアクションでの設定差異</h2>
<p>プライベートアクションを使用するときはチェックアウトが必須。
プライベートなアクションはそれを利用するリポジトリで定義する。
パブリックなアクションと同じく<code>action.yaml</code>というファイルを作ってアクションを定義する。
action.yamlの置き場所はどこでも構わない。たとえば、<code>.github/actions/&lt;アクション名&gt;/action.yml</code>でアクションを定義したら、それを利用するワークフロー定義で<code>use: .github/actions/&lt;アクション名&gt;</code>の様に<code>action.yaml</code>を置いたディレクトリをリポジトリのルートからの相対パスで指定すればよい。</p>
<pre><code class="lang-yml"><span class="hljs-attr">name:</span> <span class="hljs-string">Greet</span> <span class="hljs-string">Everyone</span>
<span class="hljs-comment"># This workflow is triggered on pushes to the repository.</span>
<span class="hljs-attr">on:</span> [<span class="hljs-string">push</span>]

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-comment"># Job name is Greeting</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">Greeting</span>
    <span class="hljs-comment"># This job runs on Linux</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-comment"># This step uses GitHub&apos;s hello-world-javascript-action: https://github.com/actions/hello-world-javascript-action</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Hello</span> <span class="hljs-string">world</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/hello-world-javascript-action@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">who-to-greet:</span> <span class="hljs-string">&apos;Mona the Octocat&apos;</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">hello</span>
      <span class="hljs-comment"># This step prints an output (time) from the previous step&apos;s action.</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Echo</span> <span class="hljs-string">the</span> <span class="hljs-string">greeting&apos;s</span> <span class="hljs-string">time</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&apos;The time was $｛｛ steps.hello.outputs.time ｝｝.&apos;</span>
</code></pre>
<p>uses: actions/hello-world-javascript-action@v1
これは、パブリックアクションを使用している。</p>
<p><strong>パブリックアクション使用時は、アクションの本体（コード）がどこからでも取得可能な場所にあるのでチェックアウトが必要ない</strong></p>
<p>しかし、プライベートアクションは自分のプロジェクト内にアクションの本体がある
<strong>そのためチェックアウトして、プロジェクトのコードをアクション実行環境に持ってくる必要があります</strong></p>
<p>「チェックアウトって何？」という方は、
actions/checkoutのREADMEの説明がとても分かりやすい。</p>
<blockquote>
<p>（あなたのリポジトリ（コード）を $GITHUB_WORKSPACE に持ってきて、ワークフローがそのコードにアクセスできるようにする）</p>
</blockquote>
<p>↑ これを実現するためのもの
プライベートアクションはネット上に公開されていないから、
手元にあるアクション本体（コード）を<code>GitHub Actions</code>の実行環境に持っていったというだけですね。</p>
<h2 id="tips"><a name="tips" class="plugin-anchor" href="#tips"><i class="fa fa-link" aria-hidden="true"></i></a>Tips</h2>
<p><a href="https://rfs.jp/server/git/gite-lab/git-hook-post-receive.html" target="_blank">Gitのフック（hook）を使って自動的にデプロイする</a>
<a href="https://zenn.dev/jerome/articles/cc07ad73e017ad" target="_blank">複数リポジトリでのGitHub Actions運用</a></p>
<h1 id="github-action"><a name="github-action" class="plugin-anchor" href="#github-action"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Action</h1>
<p>近年主流となっているクラウド型CIサービスは基本的に設定ファイルを書くだけで環境構築が済んでしまう。
大抵はyaml形式で設定を書き込むことになる。
<a href="https://qiita.com/homoluctus/items/412d4e81b24804d75205" target="_blank">Lambdaへ自動デプロイ</a>
<a href="https://zenn.dev/snowcait/scraps/9d9c47dc4d0414" target="_blank">GitHub action ベストプラティクス</a></p>
<h2 id="ワークフローの設定"><a name="ワークフローの設定" class="plugin-anchor" href="#ワークフローの設定"><i class="fa fa-link" aria-hidden="true"></i></a>ワークフローの設定</h2>
<p>ワークフローをベースブランチにマージしないと動かない</p>
<h2 id="github-actionでci環境構築"><a name="github-actionでci環境構築" class="plugin-anchor" href="#github-actionでci環境構築"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub ActionでCI環境構築</h2>
<p><a href="https://note.com/shift_tech/n/n5edc79df5560" target="_blank">参考URL</a></p>
<h2 id="github-actionの主な構成"><a name="github-actionの主な構成" class="plugin-anchor" href="#github-actionの主な構成"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actionの主な構成</h2>
<pre><code class="lang-yaml"><span class="hljs-comment">#ワークフローの名前（省略可）</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">workflow_name</span>

<span class="hljs-comment">#ワークフローのトリガー</span>
<span class="hljs-attr">on:</span> <span class="hljs-string">trigger</span>

<span class="hljs-comment">#ジョブ（具体的に何をやるか）の設定</span>
<span class="hljs-attr">jobs:</span>
 <span class="hljs-comment">#ジョブの名前</span>
 <span class="hljs-attr">job_name:</span>
   <span class="hljs-comment">#実行マシンの指定（基本的にGitHubのVMで動作します）</span>
   <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
  <span class="hljs-comment">#決められた形式でタスクを指定</span>
   <span class="hljs-attr">steps:</span>
    <span class="hljs-comment">#usesで公開されているタスクが使用可能</span>
   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">テストコードのチェックアウト</span>
     <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v1</span>

   <span class="hljs-bullet">-</span> <span class="hljs-attr">task1:</span> <span class="hljs-string">hogehoge</span>
   <span class="hljs-bullet">-</span> <span class="hljs-attr">task2:</span> <span class="hljs-string">fooooooo!</span>
</code></pre>
<h2 id="tips"><a name="tips" class="plugin-anchor" href="#tips"><i class="fa fa-link" aria-hidden="true"></i></a>Tips</h2>
<p>GitHub cdがダサいとき
<a href="https://blog.takuchalle.dev/post/2020/02/20/github_actions_change_directory/" target="_blank">参考URL</a></p>
<h2 id="ブランチによって変数を分ける"><a name="ブランチによって変数を分ける" class="plugin-anchor" href="#ブランチによって変数を分ける"><i class="fa fa-link" aria-hidden="true"></i></a>ブランチによって変数を分ける</h2>
<p><a href="https://zenn.dev/hashito/articles/aef4de448f341b" target="_blank">参考URL</a></p>
<pre><code class="lang-yml"><span class="hljs-attr">name:</span> <span class="hljs-string">learn-github-actions</span>
<span class="hljs-attr">on:</span> [<span class="hljs-string">push</span>]
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">check-bats-version:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&quot;ENV_1=main&quot;</span> <span class="hljs-string">&gt;&gt;</span> <span class="hljs-string">$GITHUB_ENV</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">github.ref</span> <span class="hljs-string">==</span> <span class="hljs-string">&apos;refs/heads/main&apos;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&quot;ENV_1=main2&quot;</span> <span class="hljs-string">&gt;&gt;</span> <span class="hljs-string">$GITHUB_ENV</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">github.ref</span> <span class="hljs-string">==</span> <span class="hljs-string">&apos;refs/heads/main2&apos;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&quot;branch=$ENV_1&quot;</span>
</code></pre>
<h2 id="working-directoryについて"><a name="working-directoryについて" class="plugin-anchor" href="#working-directoryについて"><i class="fa fa-link" aria-hidden="true"></i></a>working-directoryについて</h2>
<p><strong>working-directory は run のときにしか適用されず、actionを使うときは適用されない</strong>
そのためuseで他actionを使用する時はworking-directoryを使えるか確認する必要がある（ただし使用するGitHubアプリが対応していないこともある）</p>
<p><a href="https://intothelambda.com/blog/github-actions-with-paths/" target="_blank">参考URL</a></p>
<p>モノレポの時に設定ディレクトリが困るため以下を設定しろ</p>
<p>working-directory
実行するときのワーキングディレクトリを<code>working-directory</code>で設定している。
これは<code>jobs.&lt;job_id&gt;.steps[*].run</code> でその都度指定してもいいが、面倒なので<code>defaults.run</code>を使用すれば設定できる。</p>
<pre><code class="lang-yml"><span class="hljs-attr">defaults:</span>
  <span class="hljs-attr">run:</span>
    <span class="hljs-attr">working-directory:</span> <span class="hljs-string">python</span>
</code></pre>
<p>注意点
<code>jobs.&lt;job_id&gt;.steps[*].uses</code>を使うと、自分でrunを書かなくても、誰かが公開したactionを使える。だがactionによっては、今回のユースケースに合わず、使えないものがある。</p>
<h2 id="今回のpushはciをスキップしたい"><a name="今回のpushはciをスキップしたい" class="plugin-anchor" href="#今回のpushはciをスキップしたい"><i class="fa fa-link" aria-hidden="true"></i></a>今回のpushはCIをスキップしたい</h2>
<p><a href="https://zenn.dev/snowcait/articles/ef60401313a3fc" target="_blank">参考URL</a></p>
<h2 id="jest-coverage-report"><a name="jest-coverage-report" class="plugin-anchor" href="#jest-coverage-report"><i class="fa fa-link" aria-hidden="true"></i></a>Jest coverage report</h2>
<p><a href="https://oikawa.dev/posts/20210810_jest-coverage-report-action" target="_blank">Jest coverage report でプルリクエスト毎にコードカバレッジを可視化する</a></p>
<h2 id="artifacts-成果物をuploadする。"><a name="artifacts-成果物をuploadする。" class="plugin-anchor" href="#artifacts-成果物をuploadする。"><i class="fa fa-link" aria-hidden="true"></i></a>artifacts: 成果物をuploadする。</h2>
<p><a href="https://littleengineer.jp/github-actionsunittest%E3%81%AE%E6%88%90%E6%9E%9C%E7%89%A9%E3%81%AE%E4%BF%9D%E5%AD%98%E3%81%A8%E5%8F%96%E5%BE%97/" target="_blank">参考URL</a></p>
<p>GitHub Actionsには成果物といって</p>
<ol>
<li>ジョブからジョブに受け渡したいもの</li>
<li><a href="../../../GLOSSARY.html#test" class="glossary-term" title="これは、テスト用の単語です。">Test</a>結果など保存しておきたいもの</li>
</ol>
<p>上記をActions上に保存できる機能がある。</p>
<p><a href="https://zenn.dev/jordan/articles/b6c1e905adab31" target="_blank">参考URL2</a></p>
<p>Artifactsとはfileやfileのコレクションのことをartifactという
引用の内容はartifactsはjobの終了後にデータを保持し、同じworkflow内の他のjobとデータを共有することができると書いてます。
たとえばbuildと<a href="../../../GLOSSARY.html#test" class="glossary-term" title="これは、テスト用の単語です。">test</a>終了後のデータをartifactとして保存が可能</p>
<h2 id="github-actions-ワークフローファイル共通化"><a name="github-actions-ワークフローファイル共通化" class="plugin-anchor" href="#github-actions-ワークフローファイル共通化"><i class="fa fa-link" aria-hidden="true"></i></a>GitHub Actions ワークフローファイル共通化</h2>
<p><a href="https://tech.speee.jp/entry/terraform-reusable-workflow" target="_blank">GitHub Actions のワークフローファイルを共通化した話</a></p>
<h2 id="lighthouseをciで実行する"><a name="lighthouseをciで実行する" class="plugin-anchor" href="#lighthouseをciで実行する"><i class="fa fa-link" aria-hidden="true"></i></a>lighthouseをciで実行する</h2>
<p><a href="https://zenn.dev/mryhryki/articles/2020-11-02-hatena-lighthouse-ci" target="_blank">参考URL</a></p>
<h2 id="debug設定"><a name="debug設定" class="plugin-anchor" href="#debug設定"><i class="fa fa-link" aria-hidden="true"></i></a>debug設定</h2>
<p><a href="https://dev.classmethod.jp/articles/set-secrets-before-actions-test/" target="_blank">参考URL</a></p>
<h2 id="ghesgithub-enterprise-server"><a name="ghesgithub-enterprise-server" class="plugin-anchor" href="#ghesgithub-enterprise-server"><i class="fa fa-link" aria-hidden="true"></i></a>GHES(GitHub Enterprise Server)</h2>
<p>GitHub Enterprise Serverはオンプレミス用のアプライアンス（意:特化）サーバ</p>
<p><a href="https://engineering.dena.com/blog/2019/12/dena-github-enterprise-server/#:~:text=GHES%E3%81%AF%E5%88%A9%E7%94%A8%E8%80%85%E3%81%AE,%E3%81%A8%E5%A4%A7%E3%81%8D%E3%81%8F%E7%95%B0%E3%81%AA%E3%82%8B%E7%89%B9%E6%80%A7%E3%81%A7%E3%81%99%E3%80%82" target="_blank">DeNAのblog</a></p>
<p>GHESはGitHubサービスアプライアンスサーバ。
以前は単にGitHub Enterpriseと呼ばれていましたが、GitHub.comのbusiness cloudサービスを拡充し、クラウド側の GitHub.com business cloudとオンプレミス側のGitHub Enterpriseを合わせて、GitHub Enterpriseと呼ぶようになりました。そしてクラウド側に限定する場合はGitHub Enterprise Cloud、そしてここで取り上げるオンプレミス側をGitHub Enterprise Serverと呼ぶようになりました。昨今は単に「GitHub Enterprise」で検索などすると、GitHub Enterprise Cloudな記事が多くなったような気がして寂しい限りです。</p>
<h2 id="private-actionsworkflow-stepを共有する"><a name="private-actionsworkflow-stepを共有する" class="plugin-anchor" href="#private-actionsworkflow-stepを共有する"><i class="fa fa-link" aria-hidden="true"></i></a>Private ActionsWorkflow Stepを共有する</h2>
<p><a href="https://dev.classmethod.jp/articles/composite-run-step-with-private-repos/" target="_blank">PrivateリポジトリのActionsWorkflow内Stepを共有するためCompositeRunStepを外部参照無しに同リポジトリ内で完結させてみた</a></p>
<h2 id="ホームディレクトリ"><a name="ホームディレクトリ" class="plugin-anchor" href="#ホームディレクトリ"><i class="fa fa-link" aria-hidden="true"></i></a>ホームディレクトリ</h2>
<p>debugで試しに<code>ls -a</code>をしたらホームディレクトリがこんな感じだった。</p>
<pre><code class="lang-sh">Run mkdir -p ~/.cache/yarn
  mkdir -p ~/.cache/yarn
  mkdir -p /home/runner/work/parrot/parrot/.next/cache
  ls -a ~/
  shell: /usr/bin/bash -e {0}
.
..
.bash_logout
.bash_profile
.bashrc
.cache <span class="hljs-comment"># これは作った</span>
.cargo
.composer
.config
.docker
.dotnet
.ghcup
.nvm
.profile
.rustup
factory
perflog
runners
warmup
work
</code></pre>
<h2 id="作業ディレクトリdefault"><a name="作業ディレクトリdefault" class="plugin-anchor" href="#作業ディレクトリdefault"><i class="fa fa-link" aria-hidden="true"></i></a>作業ディレクトリ(default)</h2>
<p><a href="https://www.bioerrorlog.work/entry/github-actions-default-workspace" target="_blank">参考URL</a></p>
<h2 id="重複したstepを分ける-composite-run-step"><a name="重複したstepを分ける-composite-run-step" class="plugin-anchor" href="#重複したstepを分ける-composite-run-step"><i class="fa fa-link" aria-hidden="true"></i></a>重複したStepを分ける &apos;Composite Run Step&apos;</h2>
<p><a href="https://dev.classmethod.jp/articles/composite-run-step-with-private-repos/" target="_blank">参考URL</a>
<a href="https://dev.classmethod.jp/articles/using-uses-on-composite-steps/" target="_blank">usesも使えるようになった</a></p>
<p>public &amp; privateどっちもできる。</p>
<p>注意点</p>
<blockquote>
<p>checkout actionはcompositeに含めないようにします。checkoutすることでworkflowやcomposite run stepsのファイルがダウンロードされるため、composite stepのファイルが見つからずにエラーとなります。</p>
</blockquote>
<p>現時点でできないこと
<a href="https://blog.beachside.dev/entry/2021/09/24/220000" target="_blank">参考URL</a></p>
<blockquote>
<p>現時点では、steps の中で run を使う際は必ず shell を指定する必要があります。defaults の設定はできないので毎回書くのはちょっと面倒と感じたり...
以下のような | を使った multi line でのコマンドも実行もできないってのも注意ですね。</p>
<pre><code class="lang-yml"><span class="hljs-comment"># &quot;|&quot; を使うと syntax error になる</span>
<span class="hljs-attr">run:</span> <span class="hljs-string">|
  echo hello
  echo world
</span></code></pre>
</blockquote>
<h2 id="特定のイベント時にだけ実行する"><a name="特定のイベント時にだけ実行する" class="plugin-anchor" href="#特定のイベント時にだけ実行する"><i class="fa fa-link" aria-hidden="true"></i></a>特定のイベント時にだけ実行する</h2>
<pre><code class="lang-yml"><span class="hljs-attr">if:</span> <span class="hljs-string">contains(github.event_name,</span> <span class="hljs-string">&apos;***&apos;</span><span class="hljs-string">)</span>
</code></pre>
<h2 id="concurrency"><a name="concurrency" class="plugin-anchor" href="#concurrency"><i class="fa fa-link" aria-hidden="true"></i></a>concurrency</h2>
<p><a href="https://zenn.dev/korosuke613/scraps/4e465aad5538d0" target="_blank">一つのジョブが終われずにおなじジョブが再度実行された時に止める</a></p>
<p>トップレベルで<code>concurrency</code>を設定することで同じ名前の<code>concurrency</code>ワークフローは同時実行されない。
※キャンセルすることなども可能。</p>
<h2 id="composite-action-複合アクション"><a name="composite-action-複合アクション" class="plugin-anchor" href="#composite-action-複合アクション"><i class="fa fa-link" aria-hidden="true"></i></a>Composite Action: 複合アクション</h2>
<p><a href="https://docs.github.com/ja/actions/creating-actions/about-custom-actions" target="_blank">リファレンス（様々なモジュール化）</a>
<a href="https://docs.github.com/ja/actions/creating-actions/creating-a-composite-action" target="_blank">リファレンス（composite）</a>
<a href="https://zenn.dev/tmknom/books/pragmatic-composite-action/viewer/introduction" target="_blank">Composite Action実践ガイド</a>
<a href="https://srz-zumix.blogspot.com/2022/08/github-actions-composite-action-post.html" target="_blank">GitHub Actions の Composite Action で post 処理を実現する方法</a></p>
<p>Composite ActionはGitHub Actionsのモジュール化技法の1つ。
よくある処理をまとめ、再利用性・メンテナンス性・一貫性を高めます。</p>
<blockquote>
<p>GitHub Actions での処理の共有方法として action がありますが、現在この action は javascript と docker そして composite の3つの方法で作成することができます。</p>
</blockquote>
<h3 id="制約"><a name="制約" class="plugin-anchor" href="#制約"><i class="fa fa-link" aria-hidden="true"></i></a>制約</h3>
<p><a href="https://dev.classmethod.jp/articles/use-composite-run-steps-wisely/" target="_blank">制約一覧</a>
ファイル名は<code>action.yml</code> or <code>action.yaml</code>でないといけない。</p>
<h3 id="作成するときに考慮するべきこと"><a name="作成するときに考慮するべきこと" class="plugin-anchor" href="#作成するときに考慮するべきこと"><i class="fa fa-link" aria-hidden="true"></i></a>作成するときに考慮するべきこと</h3>
<ul>
<li>タグはつけるべき</li>
<li>アクションのREADMEファイルを作成するべき</li>
</ul>
<h2 id="使える言語"><a name="使える言語" class="plugin-anchor" href="#使える言語"><i class="fa fa-link" aria-hidden="true"></i></a>使える言語</h2>
<p>jsなども使える。</p>
<pre><code class="lang-sh">.github/
├── actions
│   └── hello
│       ├── action.yml
│       └── index.js
└── workflows
    └── hello.yml
</code></pre>
<hr>
<h2 id="tips"><a name="tips" class="plugin-anchor" href="#tips"><i class="fa fa-link" aria-hidden="true"></i></a>Tips</h2>
<p><a href="https://qiita.com/technote-space/items/253290d1f2a0f99409ae" target="_blank">GitHub Actionsによる作業自動化 実例集</a></p>
<p><a href="https://blog.sa2taka.com/post/github-actions-diff-branches/" target="_blank">後で読め</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../git.html" class="navigation navigation-prev " aria-label="Previous page: 2. Git">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../template/PULL_REQUEST_TEMPLATE.html" class="navigation navigation-next " aria-label="Next page: PULL_REQUEST_TEMPLATE">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"GitHub Actions","level":"2.14.2.1","depth":3,"next":{"title":"PULL_REQUEST_TEMPLATE","level":"2.14.2.2","depth":3,"path":"tools/git/template/PULL_REQUEST_TEMPLATE.md","ref":"tools/git/template/PULL_REQUEST_TEMPLATE.md","articles":[]},"previous":{"title":"2. Git","level":"2.14.2","depth":2,"path":"tools/git/git.md","ref":"tools/git/git.md","articles":[{"title":"GitHub Actions","level":"2.14.2.1","depth":3,"path":"tools/git/actions/actions.md","ref":"tools/git/actions/actions.md","articles":[]},{"title":"PULL_REQUEST_TEMPLATE","level":"2.14.2.2","depth":3,"path":"tools/git/template/PULL_REQUEST_TEMPLATE.md","ref":"tools/git/template/PULL_REQUEST_TEMPLATE.md","articles":[]},{"title":"Git CLI","level":"2.14.2.3","depth":3,"path":"tools/git/cli/cli.md","ref":"tools/git/cli/cli.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["anchors","hide-published-with","copy-code-button","intopic-toc","back-to-top-button","expand-active-chapter"],"root":"./docs","styles":{"website":"styles/website.css","mobi":"styles/mobi.css"},"pluginsConfig":{"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","mode":"nested","maxDepth":6,"isCollapsed":true,"isScrollspyActive":true,"visible":true,"label":"In this article"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"hide-published-with":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"expand-active-chapter":{},"copy-code-button":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"naohito-T","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"naopedia","language":"ja","gitbook":"*"},"file":{"path":"tools/git/actions/actions.md","mtime":"2023-01-12T15:12:56.849Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2023-01-12T15:13:06.168Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-hide-published-with/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expand-active-chapter/expand-active-chapter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

