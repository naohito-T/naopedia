# VPC(Virtual Private Cloud)

## VPCとは

VPCは、主に**プライベートなリソース**（例：データベースサーバーやバックエンドアプリケーション）を保護し、インターネットから隔離するために使用される。  
フロントエンドは一般的に公開されるコンポーネントであり、ユーザーから直接アクセス可能な部分です。そのため、VPC内にフロントエンドを配置する必要はほとんどない

一般的なアーキテクチャでは、フロントエンド（Next.jsなどのLambda関数を含む）はパブリックなインターネットに接続される場所に配置されます。一般的に、フロントエンドはクライアントのブラウザから直接アクセスされ、ユーザーに対してウェブサイトやアプリケーションのコンテンツを提供します。

一方、バックエンドのリソースやデータベースなどは、セキュリティ上の理由からVPC内に配置することが一般的です。VPC内のリソースはインターネットから直接アクセスできないため、より高いセキュリティレベルでアクセス制御が可能となります。

ただし、特定の要件やセキュリティ上の懸念がある場合は、フロントエンドをVPC内に配置することも考えられる。  
一般的なケースではフロントエンドはVPC外に配置することが多い。  
適切なアーキテクチャを選択するためには、具体的な要件やセキュリティポリシーを考慮し、適切な設計を行うことが重要

## VPCにフロントエンドは配置するべきなのか

一般的に、フロントエンド（プレゼンテーション層）はパブリックなインターネットに配置され、ユーザーから直接アクセスできるようになっている。  
一方、バックエンド（アプリケーション層）とデータベース（データ層）はセキュリティ上の理由からVPC内に配置されることがよくある。

つまり、三層アーキテクチャを採用している場合でも、フロントエンドはVPC外に配置されることが多い。  
フロントエンドはクライアントから直接アクセスされる部分であり、インターネットからのアクセスを受け付ける必要があるため。  
一方、バックエンドとデータベースは、セキュリティを高めるためにVPC内に配置されることが一般的

## VPCエンドポイント（AWS PrivateLink）

VPCと他のVPC外のサービス間の通信を可能にするサービスで、たとえばLambdaとParameter Store間にVPCエンドポイントを作成することで、LambdaからParameter Storeにアクセスが可能になる。  
インターフェイスエンドポイントとゲートウェイエンドポイントの2種類があり、前者は有料ですが後者は無料です。S3とDynamo DBではゲートウェイエンドポイントが利用できる。

## VPCのCIDR (Classless Inter-Domain Routing) ブロックは、一般的に`10.0.0.0/16`がよく使用される理由

1. **プライベートなIPアドレス範囲**: CIDRブロック`10.0.0.0/8`はプライベートなIPアドレス範囲に属しています。  
これは、インターネット上の他のデバイスとの衝突を避けるために、プライベートネットワーク内でのみ使用することを意味します。

2. **大規模なIPアドレス範囲**: /16サブネットは、65,536のIPアドレスを含む広範なアドレススペースを提供します。これにより、VPC内のリソースに対して十分なIPアドレスを割り当てることができます。

3. **AWSの推奨設定**: Amazon Web Services (AWS) は、デフォルトで新しいVPCを作成する際に、CIDRブロック`10.0.0.0/16`を使用します。これにより、多くのユーザーが同じCIDRブロックを利用することになり、VPC間でのIPアドレスの競合を防ぎます。

4. **CIDRの慣例**: CIDRブロック`10.0.0.0/16`は、IPv4アドレスの範囲内で一般的に使用される慣例的な選択です。他のプライベートなIPアドレス範囲（たとえば、172.16.0.0/12や192.168.0.0/16）も利用されますが、10.0.0.0/16がもっとも広範で一般的です。

ただし、必ずしも`10.0.0.0/16`を使用する必要はありません。VPCのサイズや要件に応じて適切なCIDRブロックを選択することが重要です。複数のVPCを設定する場合は、異なるCIDRブロックを選択してIPアドレスの競合を回避する必要があります。

## サブネット

サブネットはネットワークレベルでのセグメンテーションを提供する

