# Domain

色々なdomainについて

[Google Domain](https://domains.google/intl/ja_jp/learn/5-things-to-watch-out-for-when-buying-a-domain/)

## ドメインとは

ドメイン名は、ネットワーク上でホストとして認識される名前。  
インターネット上でアクセス可能なサーバーには、IPアドレスが割り当てられていますが、IPアドレスは覚えにくいため、代わりにドメイン名が使われる。

## 構成

ドメイン名は`ホスト名.ドメインのサフィックス`という形式で構成されています。  
ホスト名は、Webサイトをホストしているサーバーの名前で、サフィックスは、そのWebサイトの種類を表すために使用されます。

ドメイン名のサフィックスは、インターネット上で一意である必要があります。そのため、ドメインのサフィックスは、国際的な標準であるICANN（Internet Corporation for Assigned Names and Numbers）によって管理されています。

## サフィックスとは

ドメインのサフィックス（Suffix）とは、ドメイン名の最後の部分を指す部分。  
たとえば`.com、.jp、.edu`などがドメインのサフィックスになる。

## ドメインに証明書が必要な理由

ドメインに証明書が必要な理由は主に以下の点

1. **データの暗号化**: SSL/TLS証明書は、クライアントとサーバ間の情報を暗号化するのに役立つ。暗号化された情報は、第三者によって盗聴された場合でも、その内容を理解することができません。これにより、パスワード、クレジットカード情報、個人データなどの機密情報が安全にインターネット上で送受信できます。

2. **身元の検証**: 証明書は、証明書の発行者（Certificate Authority, CA）によって発行され、そのドメインの所有者が正当であることを証明します。これにより、ユーザーは彼らが訪れるウェブサイトが偽造や中間者攻撃（Man-in-the-Middle attack）の対象でないことを確信できます。

3. **SEOの向上**: 検索エンジンは安全なサイトを好みます。Googleなどの検索エンジンは、HTTPSを使用するサイトを高く評価し、検索結果でのランキングを向上させることが知られています。

4. **信頼性の向上**: 多くのブラウザは、HTTPSを使用していないサイトを訪れると、ユーザーに警告メッセージを表示します。この警告は、サイトが安全でないというメッセージとして受け取られ、ユーザーの信頼を損なう可能性があります。逆に、HTTPSを使用すると、アドレスバーに緑色の鍵アイコンや「安全」という表示がされ、ユーザーの信頼を得るのに役立ちます。

5. **データの完全性**: SSL/TLSは、データが変更されずに正確に送受信されることを保証します。これは、データの途中での改ざんを防ぐために重要です。

6. **規制や要件の準拠**: 一部の業界や国では、機密情報を扱う際にHTTPSを使用することが義務付けられています。たとえば、オンラインでの支払い情報の取り扱いに関するPCI DSSという規制では、情報の暗号化が要求されています。

これらの理由から、ウェブサイトやオンラインサービスを運営する際には、SSL/TLS証明書を導入し、HTTPSを使用することが強く推奨されている。

## 証明書がないとHTTPS(HTTP over Secure Socket Layer/Transport Layer Security)が使えない理由

HTTPS（HTTP over Secure Socket Layer/Transport Layer Security）を使用するためには、SSL/TLS証明書が必要です。HTTPSは、ウェブトラフィックを暗号化して安全に通信するためのプロトコルです。

以下の点を明確にしましょう：

1. **HTTPSとSSL/TLS証明書**: HTTPSは、HTTPトラフィックを暗号化するためのプロトコルです。この暗号化を行うためには**SSL/TLS証明書がサーバーにインストールされている必要**がある。

2. **証明書の役割**: SSL/TLS証明書は、暗号化のための鍵のペア（公開鍵と秘密鍵）を提供します。公開鍵は証明書と共に供給され、秘密鍵はサーバー上に保持されます。これらの鍵を使用して、データの暗号化と復号化が行われます。

3. **証明書の信頼性**: 証明書は信頼された証明書発行機関（CA: Certificate Authority）によって発行されます。ブラウザやオペレーティングシステムは、信頼されたCAのリストを持っており、このリストに基づいて証明書の信頼性を判断します。自己署名証明書（自分で発行した証明書）はこのリストに含まれていないため、ブラウザは警告メッセージを表示することが多いです。

4. **暗号化の保証**: 証明書がサーバーにインストールされていると、そのサーバーとの通信はHTTPSを使用して暗号化されます。この暗号化により、データは途中で第三者に盗聴・改ざんされるリスクが大幅に低減します。

要するに、HTTPSを使用して安全に通信を行うためには、SSL/TLS証明書の取得とサーバーへのインストールが必須となります。

## 証明書通信の手順

HTTPSを使用した通信の手順

1. **クライアントのリクエスト**:
   - ユーザーがブラウザでHTTPS URLを入力するか、HTTPSのリンクをクリックします。
   - クライアント（通常はウェブブラウザ）はサーバーに接続を要求します。

2. **サーバーからの証明書の提示**:
   - サーバーは自身のSSL/TLS証明書をクライアントに送ります。この証明書には公開鍵、証明書の有効期限、発行者（CA）などの情報が含まれています。

3. **証明書の検証**:
   - クライアントは受け取った証明書が信頼されたCAによって発行されたものであるかを確認します。クライアントは内部的に保持している「信頼されたCAのリスト」と証明書の発行者を照合します。
   - また、証明書の有効期限や対象ドメインもチェックされます。

4. **鍵の生成と暗号化**:
   - クライアントは一時的なセッションキー（通常は対称キー）を生成します。このキーを使用して、セッション中のデータの暗号化・復号化が行われます。
   - このセッションキーをサーバーの公開鍵で暗号化し、暗号化されたキーをサーバーに送ります。

5. **サーバーでの復号化と通信の開始**:
   - サーバーは受け取った暗号化されたセッションキーを、自身の秘密鍵を使用して復号化します。
   - サーバーとクライアントはこのセッションキーを使用して、通信の内容を暗号化し合います。これにより、通信が第三者によって盗聴された場合でも、内容を解読することは非常に困難となります。

6. **通信の終了**:
   - セッションが終了すると、使用されたセッションキーは破棄されます。次回の通信時には新しいセッションキーが生成されます。

このプロセスは、HTTPS接続が確立されるたびに高速に行われます。この手順を通じて、ユーザーとサーバーの間のデータのプライバシーと完全性が保たれます。