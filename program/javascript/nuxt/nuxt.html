
<!DOCTYPE HTML>
<html lang="ja" >
    <head>
        <meta charset="UTF-8">
        <title>Nuxt · naopedia</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        <meta name="author" content="naohito-T">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../react/react.html" />
    
    
    <link rel="prev" href="../vue/vue.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="検索ワードを入力" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Summary</li>
        
        
    

    
        
        <li class="header">book</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../../book/book.html">
            
                <a href="../../../book/book.html">
            
                    
                    1. book
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../../book/principle/principle.html">
            
                <a href="../../../book/principle/principle.html">
            
                    
                    1.1 principle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">cli</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../../cli/cli.html">
            
                <a href="../../../cli/cli.html">
            
                    
                    1. cli
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../../cli/file-manager/file-manager.html">
            
                <a href="../../../cli/file-manager/file-manager.html">
            
                    
                    1.1 file-manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../../cli/make/make.html">
            
                <a href="../../../cli/make/make.html">
            
                    
                    1.2 make
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../../cli/shell/shell.html">
            
                <a href="../../../cli/shell/shell.html">
            
                    
                    1.3 shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="../../../cli/shell/bash/bash.html">
            
                <a href="../../../cli/shell/bash/bash.html">
            
                    
                    bash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.2" data-path="../../../cli/shell/command/command.html">
            
                <a href="../../../cli/shell/command/command.html">
            
                    
                    command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.3" data-path="../../../cli/shell/env/env.html">
            
                <a href="../../../cli/shell/env/env.html">
            
                    
                    env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.4" data-path="../../../cli/shell/script/script.html">
            
                <a href="../../../cli/shell/script/script.html">
            
                    
                    script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.5" data-path="../../../cli/shell/zsh/zsh.html">
            
                <a href="../../../cli/shell/zsh/zsh.html">
            
                    
                    zsh
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.6" data-path="../../../cli/shell/zsh/zsh.html">
            
                <a href="../../../cli/shell/zsh/zsh.html">
            
                    
                    zsh
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Coding</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../../coding/coding.html">
            
                <a href="../../../coding/coding.html">
            
                    
                    2. coding
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../../../coding/algorithm/algorithm.html">
            
                <a href="../../../coding/algorithm/algorithm.html">
            
                    
                    2.1 algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../../../coding/atcoder/atcoder.html">
            
                <a href="../../../coding/atcoder/atcoder.html">
            
                    
                    2.2 AtCoder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../../../coding/namerules/namerules.html">
            
                <a href="../../../coding/namerules/namerules.html">
            
                    
                    2.3 命名規則
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../../../coding/designpattern/designpattern.md">
            
                <span>
            
                    
                    2.4 Design Pattern
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">DB</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../../db/db.html">
            
                <a href="../../../db/db.html">
            
                    
                    3. DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../../db/nosql/nosql.html">
            
                <a href="../../../db/nosql/nosql.html">
            
                    
                    3.1 NoSQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1.1" data-path="../../../db/nosql/redis/redis.html">
            
                <a href="../../../db/nosql/redis/redis.html">
            
                    
                    Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../../db/orm/orm.html">
            
                <a href="../../../db/orm/orm.html">
            
                    
                    3.2 ORM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.2.1" data-path="../../../db/orm/typeorm/typeorm.html">
            
                <a href="../../../db/orm/typeorm/typeorm.html">
            
                    
                    TypeORM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../../db/sql/sql.html">
            
                <a href="../../../db/sql/sql.html">
            
                    
                    3.3 SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.1" data-path="../../../db/sql/mysql/mysql.html">
            
                <a href="../../../db/sql/mysql/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2" data-path="../../../db/sql/postgres/postgres.html">
            
                <a href="../../../db/sql/postgres/postgres.html">
            
                    
                    Postgres
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.3" data-path="../../../db/sql/sqlite/sqlite.html">
            
                <a href="../../../db/sql/sqlite/sqlite.html">
            
                    
                    sqlite
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="../../../db/tuning/tuning.html">
            
                <a href="../../../db/tuning/tuning.html">
            
                    
                    3.4 Tuning
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Programing</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../program.html">
            
                <a href="../../program.html">
            
                    
                    2. program
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="../../c/c_c++.html">
            
                <a href="../../c/c_c++.html">
            
                    
                    2.1 C/C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="../../go/go.html">
            
                <a href="../../go/go.html">
            
                    
                    2.2 Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" data-path="../javascript.html">
            
                <a href="../javascript.html">
            
                    
                    2.3 JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.3.1" data-path="../dom/dom.html">
            
                <a href="../dom/dom.html">
            
                    
                    DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.2" data-path="../canvas/canvas.html">
            
                <a href="../canvas/canvas.html">
            
                    
                    Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.3" data-path="../ts/typescript.md">
            
                <span>
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.4" data-path="../vue/vue.html">
            
                <a href="../vue/vue.html">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="7.1.3.5" data-path="nuxt.html">
            
                <a href="nuxt.html">
            
                    
                    Nuxt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.6" data-path="../react/react.html">
            
                <a href="../react/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.7" data-path="../node/node.html">
            
                <a href="../node/node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3.8" data-path="../json/package.md">
            
                <span>
            
                    
                    JSON
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.1.4" data-path="../../php/php.html">
            
                <a href="../../php/php.html">
            
                    
                    2.4 PHP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.4.1" data-path="../../php/Laravel/Laravel.html">
            
                <a href="../../php/Laravel/Laravel.html">
            
                    
                    Laravel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.1.5" data-path="../../python/python.html">
            
                <a href="../../python/python.html">
            
                    
                    2.5 Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.6" data-path="../../ruby/ruby.html">
            
                <a href="../../ruby/ruby.html">
            
                    
                    2.6 Ruby
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.6.1" data-path="../../ruby/rails/rails.html">
            
                <a href="../../ruby/rails/rails.html">
            
                    
                    Rails
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.1.7" data-path="../../dsl/dsl.html">
            
                <a href="../../dsl/dsl.html">
            
                    
                    2.7 DSL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.7.1" data-path="../../dsl/xml.html">
            
                <a href="../../dsl/xml.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.7.2" data-path="../../dsl/toml.html">
            
                <a href="../../dsl/toml.html">
            
                    
                    TOML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.7.3" data-path="../../dsl/正規表現.html">
            
                <a href="../../dsl/正規表現.html">
            
                    
                    正規表現
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.1.8" data-path="../../全体に適用できる考え方.html">
            
                <a href="../../全体に適用できる考え方.html">
            
                    
                    全体に適用できる考え方
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Design</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../../../design/design.html">
            
                <a href="../../../design/design.html">
            
                    
                    3. design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="../../../design/html/html.html">
            
                <a href="../../../design/html/html.html">
            
                    
                    3.1 html
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1.1" data-path="../../../design/html/tag.html">
            
                <a href="../../../design/html/tag.html">
            
                    
                    tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.1.2" data-path="../../../design/html/archit1ecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="../../../design/css/css.html">
            
                <a href="../../../design/css/css.html">
            
                    
                    3.2 css
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.2.1" data-path="../../../design/css/property.md">
            
                <span>
            
                    
                    property
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2.2" data-path="../../../design/css/design.md">
            
                <span>
            
                    
                    design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2.3" data-path="../../../design/css/architecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="../../../design/pwa/pwa.html">
            
                <a href="../../../design/pwa/pwa.html">
            
                    
                    3.3 pwa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.4" data-path="../../../design/sass/sass.md">
            
                <span>
            
                    
                    3.4 sass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.5" data-path="../../../design/animation/animation.html">
            
                <a href="../../../design/animation/animation.html">
            
                    
                    3.5 animation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.5.1" data-path="../../../design/animation/flash.html">
            
                <a href="../../../design/animation/flash.html">
            
                    
                    flash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.5.2" data-path="../../../design/animation/gsap.html">
            
                <a href="../../../design/animation/gsap.html">
            
                    
                    gsap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.5.3" data-path="../../../design/animation/webgl.md">
            
                <span>
            
                    
                    WebGL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.1.6" data-path="../../../design/3D/3d.html">
            
                <a href="../../../design/3D/3d.html">
            
                    
                    3.6 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.7" data-path="../../../design/web/web.html">
            
                <a href="../../../design/web/web.html">
            
                    
                    3.7 Web(Webでのdesign案)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../../../middleware/README.md">
            
                <span>
            
                    
                    7. middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../../../infrastructure/infrastructure.html">
            
                <a href="../../../infrastructure/infrastructure.html">
            
                    
                    8. infrastructure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.2.1" data-path="../../../infrastructure/docker/docker.html">
            
                <a href="../../../infrastructure/docker/docker.html">
            
                    
                    8.1 docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.2.1.1" data-path="../../../infrastructure/docker/docker-compose.html">
            
                <a href="../../../infrastructure/docker/docker-compose.html">
            
                    
                    docker compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../../../hardware/hardware.html">
            
                <a href="../../../hardware/hardware.html">
            
                    
                    9. hardware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.3.1" data-path="../../../hardware/lowlayer/program.html">
            
                <a href="../../../hardware/lowlayer/program.html">
            
                    
                    9.1 低レイヤー
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.2" data-path="../../../hardware/os/os.html">
            
                <a href="../../../hardware/os/os.html">
            
                    
                    9.2 OS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="../../../security/security.html">
            
                <a href="../../../security/security.html">
            
                    
                    10. セキュリティ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="../../../test/test.html">
            
                <a href="../../../test/test.html">
            
                    
                    11. テスト
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.5.1" data-path="../../../test/webUI/Cypress.md">
            
                <span>
            
                    
                    11.1 WebUI テスト
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="../../../performance/performance.html">
            
                <a href="../../../performance/performance.html">
            
                    
                    12. パフォーマンス
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="../../../plan/plan.html">
            
                <a href="../../../plan/plan.html">
            
                    
                    11. 設計思想
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.7.1" data-path="../../../plan/front/front.html">
            
                <a href="../../../plan/front/front.html">
            
                    
                    11.1 フロントエンド
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.7.1.1" data-path="../../../plan/spa/ssr.md">
            
                <span>
            
                    
                    SPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.1.2" data-path="../../../plan/ssr/ssr.md">
            
                <span>
            
                    
                    SSR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.1.3" data-path="../../../plan/front/flux/flux.html">
            
                <a href="../../../plan/front/flux/flux.html">
            
                    
                    Flux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.1.4" data-path="../../../plan/front/bff/bff.html">
            
                <a href="../../../plan/front/bff/bff.html">
            
                    
                    BFF(Backends For Frontends)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.1.5" data-path="../../../plan/front/structure.html">
            
                <a href="../../../plan/front/structure.html">
            
                    
                    システムがWeb Pageを表示する仕組み
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.7.2" data-path="../../../plan/server/server.html">
            
                <a href="../../../plan/server/server.html">
            
                    
                    11.2 Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.7.2.1" data-path="../../../plan/server/mvc/mv*.html">
            
                <a href="../../../plan/server/mvc/mv*.html">
            
                    
                    MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.2.2" data-path="../../../plan/server/object/object.md">
            
                <span>
            
                    
                    Object指向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.2.3" data-path="../../../plan/server/ddd/ddd.html">
            
                <a href="../../../plan/server/ddd/ddd.html">
            
                    
                    DDD(Domain Driven Design)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.7.2.4" data-path="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                <a href="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                    
                    Clean Architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.7.3" data-path="../../../plan/infra/infra.html">
            
                <a href="../../../plan/infra/infra.html">
            
                    
                    11.3 インフラ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.7.3.1" data-path="../../../plan/infra/micro/micro.html">
            
                <a href="../../../plan/infra/micro/micro.html">
            
                    
                    マイクロサービスアーキテクチャ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.8" data-path="../../../requirement/requirement.md">
            
                <span>
            
                    
                    12. My Product要件定義
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.9" data-path="../../../tool/tool.md">
            
                <span>
            
                    
                    13. Tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.9.1" data-path="../../../tool/git/git.md">
            
                <span>
            
                    
                    13. 1 Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.9.1.1" data-path="../../../tool/git/作法.md">
            
                <span>
            
                    
                    作法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.9.1.2" data-path="../../../tool/git/github_actions.md">
            
                <span>
            
                    
                    GitHub Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.9.1.3" data-path="../../../tool/git/PULL_REQUEST_TEMPLATE.md.md">
            
                <span>
            
                    
                    PULL_REQUEST_TEMPLATE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.9.2" data-path="../../../tool/codepen/codepen.md">
            
                <span>
            
                    
                    13. 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.9.3" data-path="../../../tool/vscode/vscode.md">
            
                <span>
            
                    
                    13. 3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.10" data-path="../../../shell/shell.md">
            
                <span>
            
                    
                    14. shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.10.1" data-path="../../../shell/env/env.md">
            
                <span>
            
                    
                    14.1 env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.10.2" data-path="../../../shell/makefile/makefile.md">
            
                <span>
            
                    
                    14.2 Makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.10.3" data-path="../../../shell/zsh/zsh.md">
            
                <span>
            
                    
                    14.1 zsh
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.11" data-path="../../../word/word.md">
            
                <span>
            
                    
                    15. IT単語
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.11.1" data-path="../../../word/jword.md">
            
                <span>
            
                    
                    日本語 単語
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.11.2" data-path="../../../word/bword.md">
            
                <span>
            
                    
                    ビジネス 用語
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.12" data-path="../../../mathematics/mathematics.md">
            
                <span>
            
                    
                    15. 数学
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            HonKitで公開 
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Nuxt</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="nuxt"><a name="nuxt" class="plugin-anchor" href="#nuxt"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt</h1>
<p>nodeのconsole.logはターミナル上、つまりSSR時
csr（ブラウザ）のconsole.logは検証で出力される
※Nextjs</p>
<p><a href="https://medium.com/veltra-engineering/in-ssr-vue-js-is-created-twice-7f9122de9b77" target="_blank">nuxtでのfetchについてめちゃくちゃ詳しい</a></p>
<p><a href="https://www.i-ryo.com/entry/2020/02/13/083521" target="_blank">これは素晴らしいBlog</a>
<a href="https://nansystem.com/nuxt-composition-api-v2-diff/" target="_blank">composition apiの違いについて</a></p>
<p>Vueのフレームワーク</p>
<p>前提（Vueとは）
Vueとは、JavaScriptを用いたViewのライブラリのこと。
<strong>HTMLの見た目に関すること</strong>を実装できる（SPAアプリケーションは作成できるよ）</p>
<h2 id="nuxtを使うことでのメリット"><a name="nuxtを使うことでのメリット" class="plugin-anchor" href="#nuxtを使うことでのメリット"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtを使うことでのメリット</h2>
<p><strong>SSR(Server Side Rendering)がすぐに実装できる。</strong>
SEOが必要な動的ページをたくさんできるようなサービスではSSRが必要になる。
また<strong>VueでもSSRをできるが設定に骨が折れる</strong></p>
<h2 id="nuxtの仕組み"><a name="nuxtの仕組み" class="plugin-anchor" href="#nuxtの仕組み"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtの仕組み</h2>
<p><a href="https://www.i-ryo.com/entry/2020/02/13/083521" target="_blank">参考URL</a>
<a href="https://qiita.com/amakawa_/items/e7d0720e1ab8632769bf" target="_blank">SPA,SSR,プリレンダリングの違い</a></p>
<p><strong>SSRとは</strong>
Vue.jsやReactがSPA（シングルページアプリケーション）として行っている仮想DOMなどのHTMLレンダリングをクライアントサイド（ブラウザ上）ではなくサーバサイド（Node環境）で行うイメージ
SSRはあくまでHTMLの生成（レンダリング）をサーバサイドで行うだけであり、JSONデータを返すことは行わない。
つまりバックエンドはJSONだけを返すのに集中ができる（RESTApiになぞれる）</p>
<p>そもそもSEOを改善させるために、Nuxt.jsではSSR（サーバサイドレンダリング）を利用している。
SSRはAjaxデータをフェッチし、<strong>Vue.jsのコンポーネントをサーバー（Node.js）上のHTML文字列にレンダリングする。</strong>
すべての非同期ロジックが完了すると、それらを直接ブラウザに送信し、最後にスタティックなマークアップをクライアント上の完全にインタラクティブなアプリに提供する。
この機能により、GoogleSEOパーサーを使ってDOM要素を通して素晴らしい解析を行うことができます</p>
<p><strong>SSR(Server Side レンダリング)</strong>
Nuxt.jsでSSRを使う場合は、<strong>初回の描画時はSSRとCSR</strong>
それ以降の再描画時はCSRのみとなっている。</p>
<h2 id="nuxt-各ディレクトリについて"><a name="nuxt-各ディレクトリについて" class="plugin-anchor" href="#nuxt-各ディレクトリについて"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt 各ディレクトリについて</h2>
<p><strong>assets</strong>
基本的にはcss/scss/imageはこのフォルダー内で管理します。</p>
<p><strong>components</strong>
各ページで共通化して利用するコンポーネント置き場</p>
<p><strong>layouts</strong>
各ページで利用するレイアウト置き場</p>
<h2 id="middleware"><a name="middleware" class="plugin-anchor" href="#middleware"><i class="fa fa-link" aria-hidden="true"></i></a>middleware</h2>
<p>指定したページで<strong>asyncDataやfetchよりも先に呼ばれる共通処理の置き場</strong>
<code>nuxt.config.js</code>で全ページ指定するケースもあれば、必要なページからのみ呼び出して使うこともある。</p>
<p>利用用途が多い例
<strong>ユーザ認証に使われる</strong></p>
<p><strong>SSR</strong>
ミドルウェアはサーバサイドでは一度だけ呼び出され（Nuxtアプリケーションへの最初のリクエスト時、またはページの再読込み時）クライアントサイドでは他のルートへ移動したときに呼び出されます。</p>
<p><strong>SPA</strong>
ミドルウェアはクライアントサイドで最初のリクエスト時と他のルートへ移動したときに呼び出されます。</p>
<p><strong>plugins</strong>
Vueインスタンスの設定を行うファイル置き場。ここに置いたファイルをnuxt.config.jsで読み込む、というのがよくある流れです。</p>
<p><strong>static</strong>
外部から読み込まれるfavicon.icoなど、外部から読み込まれる可能性があるファイル置き場。</p>
<p><strong>store</strong>
コンポーネント間の値の管理。小規模なプロジェクトであれば、index.jsの1つのファイルで十分かと思います。
途中からindex.jsのファイルを複数に分けることは可能ですが、地味に手間なので、storeをガンガン使う予定のサイトの場合は、初めからある程度分けて始めることをおすすめします。</p>
<h2 id="はまりどころ"><a name="はまりどころ" class="plugin-anchor" href="#はまりどころ"><i class="fa fa-link" aria-hidden="true"></i></a>はまりどころ</h2>
<p>SSRについて</p>
<blockquote>
<p>SSRはNuxt.jsが提供している機能だと思っていましたが、大元は vue-server-render が提供しているのですね。だからVue.jsのドキュメントにもSSRについての記載があります。困ったらまずは公式ドキュメントに立ち戻
るのが、やっぱり早道ですね。</p>
</blockquote>
<p><strong>stateの内容はリロードすると消えてしまう</strong>
それ前提で設計しないといけない</p>
<p><a href="https://logmi.jp/tech/articles/322003" target="_blank">設計参考</a>
<a href="https://zenn.dev/koudaiishigame/articles/810ce2d0ee8ade" target="_blank">設計参考2compositionapi</a></p>
<h2 id="フレームワークはまりどころポイント欄"><a name="フレームワークはまりどころポイント欄" class="plugin-anchor" href="#フレームワークはまりどころポイント欄"><i class="fa fa-link" aria-hidden="true"></i></a>フレームワークはまりどころポイント欄</h2>
<h2 id="nuxt-導入に必要なサーバ要件について"><a name="nuxt-導入に必要なサーバ要件について" class="plugin-anchor" href="#nuxt-導入に必要なサーバ要件について"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt 導入に必要なサーバ要件について</h2>
<p><a href="https://qiita.com/kaketechjapan/items/af5524f2bed5238aefcd" target="_blank">サーバ要件</a></p>
<h2 id="nuxtにおけるssr・ssg・spaの設定方法"><a name="nuxtにおけるssr・ssg・spaの設定方法" class="plugin-anchor" href="#nuxtにおけるssr・ssg・spaの設定方法"><i class="fa fa-link" aria-hidden="true"></i></a>NuxtにおけるSSR・SSG・SPAの設定方法</h2>
<p>Nuxtはnuxt.config.jsのmodeプロパティとtargetプロパティによってアプリケーションのモードが管理されている(SPA or SSR or SSG)</p>
<h2 id="nuxt-各コマンドについて"><a name="nuxt-各コマンドについて" class="plugin-anchor" href="#nuxt-各コマンドについて"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt 各コマンドについて</h2>
<p><a href="https://nishinatoshiharu.com/nuxt-build-generate-befavior/" target="_blank">各コマンド参考</a></p>
<ul>
<li><p>dev
devコマンドはtargetの設定値に影響せず同じ仕様</p>
</li>
<li><p>start
startコマンドはサーバーを立ち上げるが、targetの設定値によって読み込むディレクトリが異なる
nuxt start : 静的なホスティング（Netlify, Vercel, Surgeなど）のようにdist/ディレクトリを提供し、<strong>デプロイ前のテストに最適です。</strong></p>
</li>
<li><p>build
アプリケーションをwebpackでビルドし、JSとCSSをminifyするコマンド
ビルドファイルの出力先は<code>.nuxt/</code>配下
<strong>buildコマンドはtarget: server専用</strong></p>
</li>
<li><p>generate
静的ウェブサイトへデプロイする静的ファイルを生成するコマンド
静的ファイルの出力先はdist配下
<strong>※generateコマンドはtarget: static専用</strong>
静的ウェブサイトのホスティングサービスではNetlifyやAmazon S3などが有名</p>
</li>
</ul>
<h2 id="運用"><a name="運用" class="plugin-anchor" href="#運用"><i class="fa fa-link" aria-hidden="true"></i></a>運用</h2>
<ul>
<li><p>SSR
SSRでアプリケーションを運用する場合、nuxt buildでファイルをビルド後、nuxt startでNuxtアプリケーションをサーバー上で起動という流れ。</p>
</li>
<li><p>SSG or SPA
nuxt generateで静的ファイルを生成後、静的ウェブサイトにアップロードするという流れになります。</p>
</li>
</ul>
<h2 id="props"><a name="props" class="plugin-anchor" href="#props"><i class="fa fa-link" aria-hidden="true"></i></a>Props</h2>
<p>setupで渡されてくるpropsを分割代入してはいけない</p>
<pre><code class="lang-js"><span class="hljs-comment">// NG</span>
<span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params">{foo}</span>)</span> {
  <span class="hljs-comment">// foo を使う</span>
}
<span class="hljs-comment">// OK</span>
<span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params">props</span>)</span> {
  <span class="hljs-comment">// props.foo を使う</span>
}
</code></pre>
<h2 id="vuejsのcreated、mounted、data"><a name="vuejsのcreated、mounted、data" class="plugin-anchor" href="#vuejsのcreated、mounted、data"><i class="fa fa-link" aria-hidden="true"></i></a>Vue.jsのcreated、mounted、data</h2>
<p><a href="https://medium.com/veltra-engineering/in-ssr-vue-js-is-created-twice-7f9122de9b77" target="_blank">Vue.jsのcreated、mounted、data</a></p>
<p>nuxtの前にそもそもVue.jsのライフサイクルフックとして用意されている created と mounted 、およびデータをリアクティブにする dataプロパティについて理解する。</p>
<h2 id="nuxt2と3の違い非同期関数について"><a name="nuxt2と3の違い非同期関数について" class="plugin-anchor" href="#nuxt2と3の違い非同期関数について"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt2と3の違い(非同期関数について)</h2>
<p><a href="https://zenn.dev/coedo/articles/cc000738a0f069" target="_blank">参考URL</a>
<a href="https://zenn.dev/kawahara/scraps/38cc622c73f27a" target="_blank">参考URL2</a></p>
<p>ちなみに自分のプロジェクトではNuxt2で使われている。</p>
<blockquote>
<p>Nuxt 2 では Options API の asyncData() や Composition API の useAsync(), useFetch(), useStatic() などを使用し、おもに SSG などにおいて画面描画に必要なデータを非同期に取得するといった使い方をしてきました。
Nuxt 3 ではそれらが新たに useFetch() と useAsyncData() のふたつにアップデートされています。
（くわえてデータ取得時に画面描画をブロックしない<code>useLazyFetch()</code>と<code>useLazyAsyncData()</code>も加わりました）</p>
</blockquote>
<p><strong>Nuxt2</strong>
Options APIのasyncData()やComposition APIのuseAsync(), useFetch(), useStatic()</p>
<h3 id="asyncdata"><a name="asyncdata" class="plugin-anchor" href="#asyncdata"><i class="fa fa-link" aria-hidden="true"></i></a>asyncData()</h3>
<p>ページがロードされる前に（Vueインスタンスが作成される前）に呼び出される関数で、通常API呼び出しなどの非同期処理を記述する</p>
<h3 id="created"><a name="created" class="plugin-anchor" href="#created"><i class="fa fa-link" aria-hidden="true"></i></a>created()</h3>
<p>API通信を行うもの。基本はcreated()を使用しDOMを操作しないといけない時にmounted()を使用する手法
createdは、Vueインスタンスが作成された直後に呼ばれる関数で、Vueインスタンスの各種プロパティ、メソッドは利用できますが、レンダリングが完了していないため、エレメントは利用できません。
mounted は、レンダリングが完了した直後に呼ばれる関数で、エレメントへのアクセスも可能となります。なお、子コンポーネントのレンダリング完了は保証されていません。</p>
<h3 id="useasync-options-apiベースで言うとasyncdataでやっていたことに対応する場合"><a name="useasync-options-apiベースで言うとasyncdataでやっていたことに対応する場合" class="plugin-anchor" href="#useasync-options-apiベースで言うとasyncdataでやっていたことに対応する場合"><i class="fa fa-link" aria-hidden="true"></i></a>useAsync() Options APIベースで言うとasyncDataでやっていたことに対応する場合</h3>
<p>@nuxtjs/composition-apiにあるuseAsync は、setup() 時に呼ぶ関数で、SSR時はサーバサイドで情報を取得し、SPA時にはページ遷移時に呼び出したいものを用意できるという代物。</p>
<p><strong>useAsync の利用上の注意</strong>
asyncDataのようにuseAsyncはサーバサイドでロードされ、結果をHTMLに書き出す挙動になっている。
<strong>このためクライアントでは再実行されなくて済む</strong></p>
<pre><code class="lang-js"><span class="hljs-comment">// サーバでクライアントでもFunctionがコールされてしまう NG</span>
<span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {
    useAsync(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> someFunction()
    })
  <span class="hljs-keyword">return</span> {}
}
<span class="hljs-comment">// SSR及び画面遷移したクライアントでのみ呼ばれる OK (1)</span>
<span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {
  useAsync(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> someFunction()

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  })
  <span class="hljs-keyword">return</span> {}
}

<span class="hljs-comment">// SSR及び画面遷移したクライアントでのみ呼ばれる OK (2)</span>
<span class="hljs-keyword">const</span> foo = useAsync(<span class="hljs-function">() =&gt;</span> someFunction())
<span class="hljs-keyword">return</span> {foo}
</code></pre>
<h3 id="usefetch"><a name="usefetch" class="plugin-anchor" href="#usefetch"><i class="fa fa-link" aria-hidden="true"></i></a>useFetch</h3>
<p>useAsyncとは別に単純に非同期な関数をSSR時と画面遷移時に実行したいという目的のためにuseFetchが存在するが、これはcomputedと同時に利用しようとするとエラーが発生する
非常にやっかみのある問題である。。解決としては現状は、、useFetch を使いたい場合は computed を使わないか、 useAsync を使うということになりそうだ。</p>
<hr>
<p><strong>Nuxt3(アップデートされている)</strong>
useFetch() と useAsyncData()
加えて、データ取得時に画面描画をブロックしないuseLazyFetch()と、useLazyAsyncData()も加わった。</p>
<p><strong>今後 Page Component は、いわばページレイアウトを記述するだけのラッパー的な存在になっていくかもしれません。</strong></p>
<h2 id="nuxt処理順序"><a name="nuxt処理順序" class="plugin-anchor" href="#nuxt処理順序"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt処理順序</h2>
<p><a href="https://www.japon-line.co.jp/tech/post/nuxt-js%E3%81%AEssr-csr%E5%87%A6%E7%90%86%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/" target="_blank">参考URL(これはやばい)</a></p>
<p>まず大前提でNuxtやReactなどのJSで呼ばれる時、SSRとCSRの処理に分かれる
CSR : ブラウザで動作する部分</p>
<p>以下例</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mode&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span> target = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;mode&apos;</span>) <span class="hljs-comment">// CSR</span>
  <span class="hljs-keyword">if</span> (target != <span class="hljs-literal">null</span>) target.innerHTML = <span class="hljs-string">&apos;csr&apos;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>SSR(Server Side Rendering) : サーバーサイドレンダリング
CSR(Client Side Rendering) : クライアントサイドレンダリング</p>
<p>処理順序（上から順に処理されます）
<strong>ここからSSR</strong>
nuxtServerInit（SSR）
plugins（SSR）
middleware（SSR）
asyncData（SSR）
fetch（SSR）
beforeCreate（SSR）
created（SSR）CSRでも呼ばれる
<strong>ここからCSR</strong>
plugins（CSR）
beforeCreate（CSR）
created（CSR）
beforeMount（CSR）
mounted（CSR）</p>
<p>内部ナビゲーション時(nuxt-link)
<strong>上記以外の画面遷移時には、CSRの処理のみが走ります。</strong>
pluginsは動かないため<strong>どのページに遷移しても共通の処理を行いたい場合はmiddlewareなどを検討する</strong></p>
<p>処理順序（上から順に処理されます）
middleware（CSR）
asyncData（CSR）
fetch（CSR）
beforeCreate（CSR）
created（CSR）
beforeMount（CSR）
mounted（CSR）</p>
<h2 id="どちらを使うか明記させる"><a name="どちらを使うか明記させる" class="plugin-anchor" href="#どちらを使うか明記させる"><i class="fa fa-link" aria-hidden="true"></i></a>どちらを使うか明記させる</h2>
<p>created()はSSR, CSRどちらでも呼ばれる。
そのためどちらか明記させないといけない。
以下は例</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> { <span class="hljs-comment">// or mounted()</span>
  <span class="hljs-keyword">if</span> (process.client) { <span class="hljs-comment">// ここで明記</span>
    <span class="hljs-keyword">const</span> target = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;mode&apos;</span>)
    <span class="hljs-keyword">if</span> (target != <span class="hljs-literal">null</span>) target.innerHTML = <span class="hljs-string">&apos;csr&apos;</span>
  }
}
</code></pre>
<h2 id="middleware"><a name="middleware" class="plugin-anchor" href="#middleware"><i class="fa fa-link" aria-hidden="true"></i></a>middleware</h2>
<p><a href="https://designsupply-web.com/media/programming/6864/" target="_blank">TS参考URL</a></p>
<p>ページをレンダリングする前に実行する関数。
ライフサイクルはnuxtServerInitの後、asyncDataの前に実行される
※pagesやlayoutsのレンダリングの前に実行される関数
<strong>pagesの前のため、まだrouterの設定もされていない状態で関数が実行される</strong>
storeの情報を扱ったりもできる</p>
<p>middlewareの指定方法は3つある</p>
<p>1 プロジェクト全体で指定する
すべてのページ遷移で呼び出す場合は、nuxt.config.jsに登録します。</p>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">router</span>: {
    <span class="hljs-attr">middleware</span>: <span class="hljs-string">&apos;authenticated&apos;</span>
    <span class="hljs-comment">// 複数ファイル指定の場合は配列で</span>
    <span class="hljs-comment">// middleware: [&apos;authenticated&apos;, &apos;stats&apos;]</span>
  }
}
</code></pre>
<p>2 特定のページで指定する
ページ単位で指定する場合は、Vueファイルのmiddlewareプロパティにファイル名を指定します。
レイアウト単位でも指定可能です。</p>
<pre><code class="lang-js">&lt;script&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">middleware</span>: <span class="hljs-string">&apos;authenticated&apos;</span>
  }
&lt;/script&gt;
</code></pre>
<p>3 特定のページで関数を指定する</p>
<pre><code class="lang-js">&lt;script&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-function"><span class="hljs-title">middleware</span>(<span class="hljs-params">{ store, redirect }</span>)</span> {
      <span class="hljs-keyword">if</span> (!store.state.authenticated) {
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&apos;/login&apos;</span>)
      }
    }
  }
&lt;/script&gt;
</code></pre>
<h2 id="nuxtjsのライフサイクル深堀り"><a name="nuxtjsのライフサイクル深堀り" class="plugin-anchor" href="#nuxtjsのライフサイクル深堀り"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt.jsのライフサイクル(深堀り)</h2>
<p><strong>初回アクセス時やリロード時には SSR処理とCSR処理がどちらも動作する。</strong>
lugins と created（beforeCreate）が 2 回走る点に注意です。</p>
<ul>
<li><p>created
createdはVueインスタンスが作成された直後に呼ばれる関数で、Vueインスタンスの各種プロパティ、メソッドは利用できるがレンダリングが完了していないためElementは利用できな</p>
</li>
<li><p>mouted
レンダリングが完了した直後に呼ばれる関数でElementへのアクセスも可能となる。
※なお<strong>子コンポーネントのレンダリング完了は保証されていない。</strong>
子コンポーネントのDOMにアクセスしたい場合はnextTickを使う必要がある。</p>
</li>
<li><p>mounted</p>
</li>
<li><p>初回アクセス時</p>
</li>
</ul>
<h2 id="nuxtで少しでもセキュアに情報を扱うためにできること"><a name="nuxtで少しでもセキュアに情報を扱うためにできること" class="plugin-anchor" href="#nuxtで少しでもセキュアに情報を扱うためにできること"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtで少しでもセキュアに情報を扱うためにできること</h2>
<h2 id="pluginsディレクトリで忘れてはいけないこと"><a name="pluginsディレクトリで忘れてはいけないこと" class="plugin-anchor" href="#pluginsディレクトリで忘れてはいけないこと"><i class="fa fa-link" aria-hidden="true"></i></a>Pluginsディレクトリで忘れてはいけないこと</h2>
<p>初回アクセス時やリロード時には、SSR処理とCSR処理がどちらも動作する。
plugins と created（beforeCreate）が 2 回走る点に注意。</p>
<blockquote>
<p>認証系は middleware や plugins に記述することが多いかもしれませんが、middleware の場合は内部ナビゲーション遷移時は CSR 側でしか呼ばれないため、どちらの処理も書いておく必要があります。 plugins の場合は、内部ナビゲーション遷移時は呼ばれないので注意が必要。
<strong>plugins の場合は、内部ナビゲーション遷移時は呼ばれないので注意が必要</strong></p>
</blockquote>
<h2 id="プラグインとモジュールの違い"><a name="プラグインとモジュールの違い" class="plugin-anchor" href="#プラグインとモジュールの違い"><i class="fa fa-link" aria-hidden="true"></i></a>プラグインとモジュールの違い</h2>
<p><strong>プラグイン</strong>
$rootやcontextから呼び出すことができる何かを提供する
Vue インスタンスと、サーバコンテキストから特定のオブジェクトを利用できるようにするために利用されるもの。</p>
<p><strong>モジュール</strong>
ビルドの動きを変えたい場合。設定により動的な挙動を持つプラグインとして提供したい場合</p>
<h2 id="内部リンクとはnuxt-link"><a name="内部リンクとはnuxt-link" class="plugin-anchor" href="#内部リンクとはnuxt-link"><i class="fa fa-link" aria-hidden="true"></i></a>内部リンクとは(nuxt-link)</h2>
<p>nuxt-linkを使用することでページをリロードすることなくページ固有の要素のみを追加でロードするだけで画面遷移を行うことができる。</p>
<p><a href="https://hafilog.com/nuxt-link-and-atag" target="_blank">内部リンクと外部リンク共有化</a></p>
<h2 id="nuxt注意点"><a name="nuxt注意点" class="plugin-anchor" href="#nuxt注意点"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt注意点</h2>
<p>まずはじめに、Nuxt.jsはSSRとCSRの境界が曖昧で、明確に分けて設計・実装することが慣れるまでは意外と難しかったりします。たとえばcreated()はSSRでもCSRでもどちらでも動きますので、<strong>createdで初期化処理をする際、初回アクセス時は2回同じ処理をしていることはご存知ない方もいらっしゃるかもしれません。</strong></p>
<h2 id="nuxtjsとは"><a name="nuxtjsとは" class="plugin-anchor" href="#nuxtjsとは"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt.jsとは</h2>
<p>Nust.jsはvue.jsのフレームワーク</p>
<blockquote>
<p>たとえばNuxt.jsにはルーティングのVue Routerやデータ管理のVuex、HTMLのメタタグ管理のvue-metaなどのプラグインを使用するために必要となる設定が事前に行われているため細かな設定を行う必要がなくすぐに利用することができます。</p>
</blockquote>
<p>Vue.jsとは違い、Nuxt.jsには静的サイトジェネレートという強力な機能がある。
Nuxtの静的化のための機能はOption APIで提供されていたがCompotion APIでの使い方はあまり解説記事がなかった。</p>
<p><a href="https://ics.media/entry/210120/" target="_blank">Nuxtでの静的サイトジェネレート作り方</a></p>
<h2 id="nuxt-ディレクトリ構成"><a name="nuxt-ディレクトリ構成" class="plugin-anchor" href="#nuxt-ディレクトリ構成"><i class="fa fa-link" aria-hidden="true"></i></a>nuxt ディレクトリ構成</h2>
<p><a href="https://ja.nuxtjs.org/docs/2.x/get-started/directory-structure" target="_blank">リファレンス</a></p>
<ul>
<li><p>pagesディレクトリ
pagesディレクトリにはアプリケーションのビューとルートが含まれている
Nuxt.jsはこのディレクトリ内の.vueファイルをすべて読み込み、アプリケーションのルーターを作成する。</p>
</li>
<li><p>componentsディレクトリ
componentsディレクトリにはページにインポートするすべてのVue.jsのコンポーネントファイルを入れる
Nuxt.jsを使用すると作成したコンポーネントを.vueファイルに自動でインポートすることができる。
nuxt.config.js内のcomponentsをtrueに設定するとNuxt.jsがスキャンして自動でインポートしてくれる。</p>
</li>
<li><p>layoutディレクトリ
layoutディレクトリのdefault.vueファイルを追加することですべてのpageに適用ができるデフォルトレイアウトを定義できる。
これは特定のレイアウトを持たないすべてのページで使用される。
レイアウトに含める必要があるのは、ページコンポーネントをレンダリングする<code>&lt;Nuxt /&gt;</code>だけ</p>
</li>
<li><p>middlewareディレクトリ
アプリケーションミドルウェアが含まれている。ミドルウェアを使用すると、<strong>ページまたはページのグループ(レイアウト)をレンダリングする前に実行できるカスタム関数を定義できる。</strong>
共有ミドルウェアはmiddleware/ディレクトリに配置する必要がある。ファイル名はミドルウェアの名前になる<code>(middleware/auth.js)</code>はauthミドルウェアになる。</p>
</li>
</ul>
<h2 id="nuxtでの-spa・ssr・ssg-とは"><a name="nuxtでの-spa・ssr・ssg-とは" class="plugin-anchor" href="#nuxtでの-spa・ssr・ssg-とは"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtでの SPA・SSR・SSG とは</h2>
<p><a href="https://qiita.com/nishinoshake/items/f42e2f03663b00b5886d" target="_blank">URL</a></p>
<p>Nuxt.jsではSPA・SSR・SSGの中から好きなものを選んで開発ができる
<strong>初期設定ではSSRで動作するようになっている</strong>。</p>
<p>SPA・SSR・SSGでの仕組みは別pageを参照する。</p>
<hr>
<h2 id="vuexの導入方法"><a name="vuexの導入方法" class="plugin-anchor" href="#vuexの導入方法"><i class="fa fa-link" aria-hidden="true"></i></a>Vuexの導入方法</h2>
<p><a href="https://qiita.com/Takabun/items/e0b0c139ccf53c7bb561" target="_blank">参考URL</a></p>
<h2 id="vuexについて"><a name="vuexについて" class="plugin-anchor" href="#vuexについて"><i class="fa fa-link" aria-hidden="true"></i></a>Vuexについて</h2>
<p>Vuexは<strong>Vue.jsでグローバルでのデータの状態管理を行うことができるライブラリ</strong>
Vuexは<strong>これまでprops, emitを利用した親子間のコンポーネントでの状態管理の複雑さを解消するために用いられてきた。</strong>
このライブラリによりどのコンポーネントからでも状態にアクセスしたり、アクションを実行することができる</p>
<h2 id="vuexを使用するにあたっての弊害"><a name="vuexを使用するにあたっての弊害" class="plugin-anchor" href="#vuexを使用するにあたっての弊害"><i class="fa fa-link" aria-hidden="true"></i></a>Vuexを使用するにあたっての弊害</h2>
<p>・TypeScriptとの相性が悪い
・アーキテクチャが複雑で手軽に扱うことが難しい
・コンポーネントをテストすることが難しい</p>
<p>こういった課題を解決するためにVue.jsの2.2以降にprovide、injectといったDIを行うことができる関数が追加された</p>
<ul>
<li>DI 依存性の注入
依存性の注入とはコンポーネント間の依存関係をプログラムのソースコードから排除するために、外部の設定ファイルなどでオブジェクトを注入できるようにするソフトウェアパターンである。</li>
</ul>
<h2 id="今日のvuexとは"><a name="今日のvuexとは" class="plugin-anchor" href="#今日のvuexとは"><i class="fa fa-link" aria-hidden="true"></i></a>今日のVuexとは</h2>
<p>今までのVue2時にはVuex。しかしVue3ではprovide/injectを使ったステート管理が推進されている
しかしVuexを導入する場合は、Nuxt.jsで公式で推奨されているvuex-module-decoratorsを使用する</p>
<p><a href="https://qiita.com/azukiazusa/items/a50b1ffe05d9937a4db0" target="_blank">参考URL</a></p>
<hr>
<h2 id="composition-apiとは"><a name="composition-apiとは" class="plugin-anchor" href="#composition-apiとは"><i class="fa fa-link" aria-hidden="true"></i></a>composition APIとは</h2>
<p><a href="https://qiita.com/karamage/items/7721c8cac149d60d4c4a" target="_blank">参考URL</a></p>
<p>Vue3の目玉の機能としてComposition APIがある。
Compositionは構成(すること),組み立て(ること)という意味</p>
<ul>
<li>なぜComposition APIを使うのか
理由としてはロジックの抽出と再利用をするため。他にもTypeScript型強化などが理由に挙げられる</li>
</ul>
<p>ロジックの抽出と再利用が必要な理由は
複雑に肥大化したコンポーネントを小分けにして関心事で分別し、クリーンな状態に整理するため
近年Vueを使用して大規模なプロジェクトを構築することが増えた。肥大化してメンテしにくいコンポーネントを目の辺りにしエンジニアが苦しむことがあった。</p>
<h2 id="composition-apiが生まれた経緯"><a name="composition-apiが生まれた経緯" class="plugin-anchor" href="#composition-apiが生まれた経緯"><i class="fa fa-link" aria-hidden="true"></i></a>composition apiが生まれた経緯</h2>
<ul>
<li>今までのVue
Vue2.xではコンポーネントをSFC(シングルファイルコンポーネント)ファイルに記述する
SFCにコンポーネントのView/状態/ロジックをまとめて閉じ込めて記述することできて便利だが
これ以上は分割ができないという欠点があった。
これを解決するのがComposition API</li>
</ul>
<p>Composition APIによってコンポーネントのコードを整理する際に開発者により高い柔軟性を提供する。
コンポーネント間でロジックや状態を抽出して再利用することが簡単になる。</p>
<p>SFCに記述するのはViewの見た目に関することだけにして、ロジックや状態を外部に切り出せるようになる。</p>
<p>ただしComposition APIのベストプラクティスを今決めるのは時期尚早であり、手探りですすめる必要がある
つまりVueが管理している壁の中の世界から壁の外の無秩序な荒野へと放たれる
設計が重要になる。</p>
<p>Composition APIを使用するデメリットは設計やアーキテクチャを考えなければならない。
たとえばクリーンアーキテクチャを理解して実装していくことが求められる</p>
<h2 id="composition-apiにおいてのproviderパターン"><a name="composition-apiにおいてのproviderパターン" class="plugin-anchor" href="#composition-apiにおいてのproviderパターン"><i class="fa fa-link" aria-hidden="true"></i></a>composition APIにおいてのProviderパターン</h2>
<p><a href="https://qiita.com/karamage/items/4bc90f637487d3fcecf0" target="_blank">参考URL</a></p>
<ul>
<li>Providerパターンとは
VueにおけるProviderパターンとはprovide/inject APIを使用して
<strong>Composition APIで切り出した状態やロジックをコンポーネント間で共有することを指す。</strong></li>
</ul>
<h2 id="provideinjectの使い方"><a name="provideinjectの使い方" class="plugin-anchor" href="#provideinjectの使い方"><i class="fa fa-link" aria-hidden="true"></i></a>provide/injectの使い方</h2>
<p>提供する側(provide)と注入する側(inject)に分かれる</p>
<ul>
<li><p>送信側(provide)
親コンポーネントで送信を定義</p>
</li>
<li><p>受信側(inject)
親コンポーネントから呼び出されている子コンポーネントはinject(key)で使用する。</p>
</li>
</ul>
<h2 id="今後providerのapiは変わるかも"><a name="今後providerのapiは変わるかも" class="plugin-anchor" href="#今後providerのapiは変わるかも"><i class="fa fa-link" aria-hidden="true"></i></a>今後ProviderのAPIは変わるかも</h2>
<p>もともとPlugin開発やライブラリ開発向けのAPIとして「provide/inject」が用意されていました。
つまり、「provide/inject」はVue3用に用意されたAPIではないのです。
よって、Providerの仕組みは、今後、変わるかもしれません。
「provide/inject」仕組みは、問題点も多いからです。
たとえばKeyを書き間違えたら不具合を引き起こしますが、それが実行時にしかわからないです。
injectの対象がコンポーネント単位のため、依存が大きいです。(もっと依存度を下げて使いたい)
今後Vue3で改善されると予想しています。</p>
<p>しかし、抽象レベルの「Providerパターン」の考え方は変わりませんので、知っておいて損はないかと思います。</p>
<ul>
<li>まとめ
Composition APIを使って、散らかった部屋の荷物をダンボールに梱包して、外に出そう。
Composition APIを使って梱包した荷物を運ぶのがProviderの役目
Providerで、親コンポーネントから子コンポーネントに共通の状態を簡単に受け渡すことができる。
Prop渡しと違ってバケツリレーをする必要がない。
今後、Vue3ではProviderの改善が進むと予想</li>
</ul>
<h2 id="nuxt-linkについて"><a name="nuxt-linkについて" class="plugin-anchor" href="#nuxt-linkについて"><i class="fa fa-link" aria-hidden="true"></i></a>nuxt-linkについて</h2>
<p>Vue.jsのrouter-linkを拡張しているもの
そのためrouter-linkと同じ使い方ができる。</p>
<ul>
<li>nuxt-linkを使うメリット</li>
</ul>
<blockquote>
<p>このコンポーネントは、ページコンポーネント間のナビゲーションを提供し、賢い prefetching（先読み）でパフォーマンスを高めるのに使用します。</p>
</blockquote>
<ul>
<li>nuxt-link注意点</li>
</ul>
<p>外部サイトには移動できない。</p>
<h2 id="nuxt-専用メソッドについて"><a name="nuxt-専用メソッドについて" class="plugin-anchor" href="#nuxt-専用メソッドについて"><i class="fa fa-link" aria-hidden="true"></i></a>nuxt 専用メソッドについて</h2>
<ul>
<li>asyncData
Vueインスタンスが生成される前に実行されるメソッド
thisは使えない。contextは使える</li>
</ul>
<p>SSR実行時のnodeにはlocalstorageがありませんから、window.localstorageはさわれません。
そのため、今回のプラグインも{... , ssr; false}として、SSR時は起動しないようにする必要があります。</p>
<h2 id="nuxtconfig"><a name="nuxtconfig" class="plugin-anchor" href="#nuxtconfig"><i class="fa fa-link" aria-hidden="true"></i></a>nuxt.config</h2>
<p>tsにする方法を記載する。</p>
<ul>
<li>buildModules</li>
</ul>
<blockquote>
<p>一部のモジュールは開発時およびビルド時にのみ必要になります。buildModules を使うことで本番環境の起動を速くし、本番環境にデプロイされる node_modules のサイズを大幅に減らすことができます。それぞれのモジュールのドキュメントを参照して、modules と buildModules どちらを使うのが推奨されているかを確認してください。</p>
</blockquote>
<p>使用方法の違いは以下のとおりです:
nuxt.config.js に modules を追加するかわりに buildModules を使います
package.json に dependencies を追加するかわりに devDependencies を使います（yarn add --dev または npm install --save-dev）</p>
<h2 id="tips"><a name="tips" class="plugin-anchor" href="#tips"><i class="fa fa-link" aria-hidden="true"></i></a>tips</h2>
<p><a href="https://zenn.dev/kawahara/scraps/38cc622c73f27a" target="_blank">Vue2.xで、composition-api + TypeScript使っているときのメモ</a></p>
<h2 id="watch"><a name="watch" class="plugin-anchor" href="#watch"><i class="fa fa-link" aria-hidden="true"></i></a>watch</h2>
<p>変更を検知し指定のmethodを実行する
※複数の検知も可能</p>
<pre><code class="lang-js">
watch(<span class="hljs-function">() =&gt;</span> {},<span class="hljs-function">() =&gt;</span> {}, [method1の結果, method2の結果])
</code></pre>
<h2 id="setup内でのdocument使用について"><a name="setup内でのdocument使用について" class="plugin-anchor" href="#setup内でのdocument使用について"><i class="fa fa-link" aria-hidden="true"></i></a>setup内でのdocument使用について</h2>
<p><a href="https://qiita.com/syu_ikeda/items/ea1e6931643aa812e6a2" target="_blank">参考URL</a></p>
<p>Next.jsはサーバーサイド、クライアントサイド両方で動くフレームワーク。そのため、定義したソースはサーバー、ブラウザ両方の環境で実行されます。</p>
<p>そして、documentやwindowはクライアント(ブラウザ)だけで定義されているグローバル変数です。サーバー環境で動かそうとすると「そんなグローバル変数は定義されていない！」とエラーが発生します。</p>
<p>なので、if (process.browser)でブラウザのみの判定を入れればサーバー環境での実行時には無視され、クライアント環境だけで動くのです。</p>
<h2 id="nuxtでの完全静的サイトジェネレート"><a name="nuxtでの完全静的サイトジェネレート" class="plugin-anchor" href="#nuxtでの完全静的サイトジェネレート"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtでの完全静的サイトジェネレート</h2>
<p><a href="https://ics.media/entry/210120/" target="_blank">参考URL</a></p>
<p>Nuxt.js 2.13からasyncData()メソッド・fetch()メソッドで取得するデータが静的化された。
nuxt.config.jsのtargetを &quot;static&quot;と設定しgenerateすると、asyncData()およびfetch()で取得する内容が<strong>payload.jsという静的データで保存される。</strong>
それと同時に各ページで取得した内容が織り込み済みのHTMLが生成されます。</p>
<p><strong>Composition APIにはasyncDataがない</strong>
完全静的化を強力にサポートするasyncData()とfetch()ですが、残念ながらNuxt Composition APIにはそれらが用意されていません。その代わり、useAsync(), useFetch(), useStatic()の3つの非同期処理メソッドが用意されています。</p>
<p>この3つの非同期処理うち、<strong>完全静的化で使用するのは</strong>useFetch()およびuseStatic()になる。
useAsync()はgenerate後もページ遷移時には非同期通信を行って内容を取得します。</p>
<p>Nuxt Composition APIのv0.20.0未満ではuseFetch()を利用してgenerateを行っても静的化されない不具合がありました。最新のバージョンでは修正されているので、完全静的化を行う場合にはuseFetch()を使うのが便利でしょう。</p>
<p><strong>useFetch()はasyncData()とは違い、ページコンポーネント以外でも利用できます。最新の記事を表示するサイドバーのようなコンポーネントからでも呼び出せます。</strong></p>
<h2 id="usefetch-useasyncの違い"><a name="usefetch-useasyncの違い" class="plugin-anchor" href="#usefetch-useasyncの違い"><i class="fa fa-link" aria-hidden="true"></i></a>useFetch, useAsyncの違い</h2>
<h2 id="nuxt-error"><a name="nuxt-error" class="plugin-anchor" href="#nuxt-error"><i class="fa fa-link" aria-hidden="true"></i></a>nuxt error</h2>
<p>process.server, process.client による条件分岐により、必要なコードだけをそれぞれの環境（Nuxt サーバー上、ブラウザ上）で実行できるようにする
ブラウザ上の JavaScript に慣れていると window オブジェクトはあることが当たり前だけれど、Nuxt サーバー上にはもちろん存在しない
Nuxt サーバーによる SSR（Server Side Rendering）では、created 時までのライフサイクルのコードが実行されるため、created までに書いている API 通信結果は DOM に格納されるが、CSR（Client Side Rendering）時にも実行されるため、通信が無駄になることがある。その場合 beforeMount に書くのが良い
SSR 時と CSR 時の情報の差がある場合、エラーを吐く。そのため、ホットリロードではなく全画面リロードして動作の確認をする必要がある。条件分岐をコントロールする変数が、asyncData や created で更新される場合は要注意</p>
<p><strong>Nuxtでアプリを作る際は、SSRでもCSRでも問題なく表示できるように作る必要がある。</strong></p>
<p><strong>クローラーなどからのアクセスは常にSSRになるため、クローラーなどに拾ってほしい情報はSSRの段階で確定させる必要がある。</strong></p>
<p><strong>一方で、windowオブジェクトにアクセスするもの、たとえばlocalStorageを使うようなものはクライアントサイドのみでしか実行することはできません。 mounted 以外で書く場合は process.server 変数などを使って分岐させる必要があります。</strong></p>
<p><strong>特に注意したいのが created で（ beforeCreate も）、SSR時とCSR時の両方で呼ばれます。普通に書くと二重に処理してしまうことになるので、意識して書かないと意図しない挙動になる可能性があります。</strong></p>
<p><a href="https://nazo.hatenablog.com/entry/nuxt-ssr-lifecycle" target="_blank">参考URL</a></p>
<h2 id="nuxt-でのモックサーバの作り方"><a name="nuxt-でのモックサーバの作り方" class="plugin-anchor" href="#nuxt-でのモックサーバの作り方"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt でのモックサーバの作り方</h2>
<p><a href="https://qiita.com/m_mitsuhide/items/b8e073cba0dae5af2359" target="_blank">参考URL</a></p>
<h2 id="nuxt-でのprocessclient-prosessserverについて"><a name="nuxt-でのprocessclient-prosessserverについて" class="plugin-anchor" href="#nuxt-でのprocessclient-prosessserverについて"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt でのprocess.client, prosess.serverについて</h2>
<p>NuxtではNodeの環境変数processを拡張する形で、process.server, process.clientが設定されている
<strong>つまり、created()の時、SSRとCSRでどちらも実行されるため、created()内でCSR処理を行いたい時などに分岐できる。</strong></p>
<p><a href="https://qiita.com/geerpm/items/64caf4ebaf5122b71549" target="_blank">参考定義URL</a></p>
<ul>
<li><p>process.client
<strong>クライアントサイドでその処理が実行されるか</strong>というのを制御できる。</p>
</li>
<li><p>process.server
<strong>サーバサイドでその処理が実行されるか</strong>というのを制御できる。</p>
</li>
</ul>
<p><a href="https://qiita.com/yamotuki/items/ebd5fed5d75ff80c66ee" target="_blank">nuxt pluginでのaxiosエラー</a></p>
<hr>
<h2 id="nuxtライフサイクルフック"><a name="nuxtライフサイクルフック" class="plugin-anchor" href="#nuxtライフサイクルフック"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtライフサイクルフック</h2>
<p><img src="image/lifecycle.png" alt="lifeCycle"></p>
<p>mounted()
CSR(クライアントサイドレンダリング)の略。</p>
<p>created()
<strong>SSRでも呼ばれる</strong>
createdで使う場合はSSRかCSRどちらで動作させるか明確にする。
まずはじめに、Nuxt.jsはSSRとCSRの境界が曖昧で、明確に分けて設計・実装することが慣れるまでは意外と難しかったりします。たとえばcreated()はSSRでもCSRでもどちらでも動きますので、createdで初期化処理をする際、初回アクセス時は2回同じ処理をしていることはご存知ない方もいらっしゃるかもしれません。</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> {
  <span class="hljs-keyword">if</span> (process.client) { <span class="hljs-comment">// ここでclientとする</span>
    <span class="hljs-comment">// dom操作をここでする。</span>
  }
}
</code></pre>
<hr>
<h2 id="ここから超重要"><a name="ここから超重要" class="plugin-anchor" href="#ここから超重要"><i class="fa fa-link" aria-hidden="true"></i></a>ここから超重要</h2>
<p><a href="https://www.japon-line.co.jp/tech/nuxt-js%E3%81%AEssr-csr%E5%87%A6%E7%90%86%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/" target="_blank">参考URL</a></p>
<ul>
<li>初回アクセス
初回アクセスやリロード時にはSSR処理とCSR処理がどちらも動作する。
pluginsとcreated(beforeCreate)が2回走る点に注意。</li>
</ul>
<p>認証系はmiddlewareやpluginsに記述することが多いかもしれませんが、middlewareの場合は内部ナビゲーション遷移時はCSR側でしか呼ばれないため、どちらの処理も書いておく必要があります。</p>
<ul>
<li><p>middleware
内部ナビゲーション遷移時はCSR側でしか呼ばれないため、どちらの処理も書く必要がある。</p>
</li>
<li><p>plugins
内部ナビゲーション遷移時は呼ばれない</p>
</li>
</ul>
<h2 id="処理順序（上から順に処理されます）"><a name="処理順序（上から順に処理されます）" class="plugin-anchor" href="#処理順序（上から順に処理されます）"><i class="fa fa-link" aria-hidden="true"></i></a>処理順序（上から順に処理されます）</h2>
<p><strong>ここからSSR</strong>
nuxtServerInit（SSR）
plugins（SSR）
middleware（SSR）
asyncData（SSR）
fetch（SSR）
beforeCreate（SSR）
created（SSR）
<strong>ここからCSR</strong>
plugins（CSR）
beforeCreate（CSR）
created（CSR）
beforeMount（CSR）
mounted（CSR）</p>
<h2 id="内部ナビゲーション時"><a name="内部ナビゲーション時" class="plugin-anchor" href="#内部ナビゲーション時"><i class="fa fa-link" aria-hidden="true"></i></a>内部ナビゲーション時</h2>
<p><strong>上記以外の画面遷移時には、CSRの処理のみが走ります。</strong>
pluginsは動かないため、どのページに遷移しても共通の処理を行いたい場合はmiddlewareなどを検討しましょう。</p>
<p>処理順序（上から順に処理されます）
middleware（CSR）
asyncData（CSR）
fetch（CSR）
beforeCreate（CSR）
created（CSR）
beforeMount（CSR）
mounted（CSR）</p>
<h2 id="nuxtでbffを作成する"><a name="nuxtでbffを作成する" class="plugin-anchor" href="#nuxtでbffを作成する"><i class="fa fa-link" aria-hidden="true"></i></a>NuxtでBFFを作成する</h2>
<p><a href="https://dev.appswingby.com/nuxt/nuxt-js%E3%81%AEserver-middleware%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%89%8B%E8%BB%BD%E3%81%ABbffbackends-for-frontends%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B/" target="_blank">参考URL</a></p>
<p>Nuxt.jsには、serverMiddlewareという機能があります。この機能を利用するとNuxt.js内部でAPIサーバを構築することができる。</p>
<h2 id="nuxtのtokenの作成"><a name="nuxtのtokenの作成" class="plugin-anchor" href="#nuxtのtokenの作成"><i class="fa fa-link" aria-hidden="true"></i></a>NuxtのTokenの作成</h2>
<p>nuxtはSSRで動作をさせるのであれば、SSRとCSRのどちらでもlogin処理を行わないといけない。
つまり、ts側とvue側
こんな感じでapiに問い合わせてjwtを取得している。
取得後はlocalStorageに保存。かつencordしている
decordできないものはおかしいと判断。</p>
<pre><code class="lang-ts"><span class="hljs-comment">/** トークンの取得 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">const</span> fetchTokens(code: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;ApiTokens&gt; =&gt; {
  <span class="hljs-keyword">const</span> ichikaraIdAPIServer = process.env.NUXT_ICHIKARA_CONNECT_ID_API_SERVER;
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${ichikaraIdAPIServer}</span>/v1/auth/token`</span>;
  <span class="hljs-keyword">const</span> data = { code };
  <span class="hljs-keyword">const</span> tokens = <span class="hljs-keyword">await</span> Axios.post&lt;ApiTokens&gt;(url, data, {
    <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span>,
  }).then(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> convertToCamelKeys&lt;ApiTokens&gt;(r.data));

  saveApiTokens(tokens);
  <span class="hljs-keyword">return</span> tokens;
}
</code></pre>
<h2 id="nuxtのtargetとmodeとssrについて"><a name="nuxtのtargetとmodeとssrについて" class="plugin-anchor" href="#nuxtのtargetとmodeとssrについて"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxtのtargetとmodeとssrについて</h2>
<p><a href="https://zenn.dev/kurosame/articles/52e96b724380d2" target="_blank">参考URL</a></p>
<ul>
<li>targetプロパティ</li>
</ul>
<p>設定可能な値はserverかstaticのどちらかで、デフォルトは<code>target: server</code>
<strong>これから開発するアプリのデプロイ先によってこの値を判断する</strong></p>
<p>サーバーホスティング</p>
<p><code>target: server</code>とする
サーバ上でNuxtを動かすとき
EC2, ECS, レンタルサーバーなど</p>
<p>静的サイトホスティング</p>
<p><code>target: static</code>とする
ホスティングサービスへブラウザがそのまま実行できるHTMLやJSをデプロイするとき</p>
<p>S3+CloudFront、Netlify、Vercel、Firebase Hosting など</p>
<ul>
<li>modeプロパティ</li>
</ul>
<p>設定可能な値はspaかuniversalのどちらかで、デフォルトは<code>mode: &apos;universal&apos;</code></p>
<p><img src="image/nuxt_ssr.png" alt></p>
<h2 id="nuxt-envについて"><a name="nuxt-envについて" class="plugin-anchor" href="#nuxt-envについて"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt envについて</h2>
<p><a href="https://zenn.dev/kouchanne/articles/83466e36e1c30f174ae8" target="_blank">参考URL(結構つかえる)</a>
<a href="https://blog.cloud-acct.com/posts/u-nuxt-module-cryptojs" target="_blank">参考URL</a>
<a href="https://blog.microcms.io/nuxt-secure-api-key/" target="_blank">参考URL</a></p>
<p><strong>そもそもの原因</strong></p>
<p><strong>nuxt.config.jsのenvがサーバーからもクライアントからも読み取れるようになってしまうのが原因</strong></p>
<p>2.13以降に使える</p>
<p>publicRuntimeConfig : CSR時・SSR時どちらでも利用したいもの
<strong>※publicRuntimeConfigに登録した値は<code>window.__NUXT__.config</code>に登録されHTMLに展開される。</strong></p>
<p>privateRuntimeConfig : SSR時のサーバーサイド限定で利用したいもの
<strong>ただ、SPAモードでは、クライアントでレンダリングを行なっているため、ここに登録した値を参照することはできません。</strong></p>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">privateRuntimeConfig</span>: {
    <span class="hljs-attr">apiKey</span>: API_KEY
  },
  <span class="hljs-comment">// yarn dev時はクライアントサイドでも処理は行われるため</span>
  <span class="hljs-attr">publicRuntimeConfig</span>: {
    <span class="hljs-attr">apiKey</span>: process.env.NODE_ENV !== <span class="hljs-string">&apos;production&apos;</span> ? API_KEY : <span class="hljs-literal">undefined</span>
  },
  <span class="hljs-comment">// 略</span>
}
</code></pre>
<h2 id="envの扱いenv-プロパティの環境変数は漏洩します"><a name="envの扱いenv-プロパティの環境変数は漏洩します" class="plugin-anchor" href="#envの扱いenv-プロパティの環境変数は漏洩します"><i class="fa fa-link" aria-hidden="true"></i></a>.envの扱い(env プロパティの環境変数は漏洩します)</h2>
<p>プロジェクトルートに.envファイルを作成すればデフォルトの変数がセットされるようになった。
<strong>※envプロパティに登録した値もそうですが、基本的にクライアントで使用する環境変数はソースコード上に展開されます。</strong></p>
<p>envプロパティに登録した環境変数はコンパイル中に変換され値がセットされる
<strong>コンパイルが実行されるタイミングは、nuxt buildコマンドが実行された時</strong>
buildコマンド以前に環境変数の値を定義していないとenvプロパティで参照することができない。</p>
<blockquote>
<p>envプロパティに定義する環境変数は、DockerfileのENVで定義する必要があります。</p>
</blockquote>
<hr>
<h2 id="nuxtでsassを使うには"><a name="nuxtでsassを使うには" class="plugin-anchor" href="#nuxtでsassを使うには"><i class="fa fa-link" aria-hidden="true"></i></a>nuxtでsassを使うには</h2>
<p>NuxtでSassを使うにはnode-sass、sass-loader2種類のパッケージが必要
@nuxtjs/style-resourcesは変数を使用したい場合に使う。</p>
<p>どうやら作成直前にversionのアップデートがあったとのこと。</p>
<p>以下は結構重要</p>
<p>今まで出来ていたことが
エラーになってしまった場合、
リリース情報を見て
サポートしているバージョンを
確認するのは大事</p>
<p><code>$ yarn add --dev node-sass sass-loader @nuxtjs/style-resources</code></p>
<p>nuxt.config.tsに以下を記載する。</p>
<pre><code class="lang-ts">modules: [<span class="hljs-string">&apos;@nuxtjs/style-resources&apos;</span>],
</code></pre>
<h2 id="nuxt-で-di-っぽいことをする"><a name="nuxt-で-di-っぽいことをする" class="plugin-anchor" href="#nuxt-で-di-っぽいことをする"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt で DI っぽいことをする</h2>
<h2 id="nuxt-eslint-prettier-stylelint-設定"><a name="nuxt-eslint-prettier-stylelint-設定" class="plugin-anchor" href="#nuxt-eslint-prettier-stylelint-設定"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt eslint prettier stylelint 設定</h2>
<p><a href="https://inokawablog.org/vue-js/nuxt-typescript-stylelint-eslint-prettier/" target="_blank">nuxt typescript eslint prettier</a>
<a href="https://qiita.com/y-w/items/bd7f11013fe34b69f0df" target="_blank">stylelint 設定</a>
<a href="https://toragramming.com/web/nuxtjs/nuxt-stylelint-prettier-vscode-format-scss-on-save/" target="_blank">こちらの stylelint 設定がよい</a></p>
<h2 id="nuxt-ホスティング-tips"><a name="nuxt-ホスティング-tips" class="plugin-anchor" href="#nuxt-ホスティング-tips"><i class="fa fa-link" aria-hidden="true"></i></a>Nuxt ホスティング tips</h2>
<p><a href="https://kosukesaigusa.com/tech/2021-07-22-nuxtjs-ssr-firebase-hosting/" target="_blank">firebase</a></p>
<ul>
<li>Firebase hostingを利用する場合</li>
</ul>
<p><strong>静的なサイトをホスティングするため</strong>のサービス
SSRの場合、buildで生成されるdistディレクトリの中身をそのままデプロイすれば良いわけではない。</p>
<p><strong>SSRを静的サイトホスティング</strong>でdeployする方法
Nuxt.jsのSSRサイトの成果物であるJavaScriptのファイル郡とその他の必要な静的なassetsをFirebase Hosting にデプロイし、
そのURLに対するアクセスをFirebase Hosting の rewrites ルールによって、同じく Firebase で提供されている Cloud Functions に作った HTTP 関数に向けるようにし、その HTTP 関数で Nuxt.js のレンダリング関数を実行するという流れを実現すれば良いということです。
ディレクトリ構成や使用しているパッケージ、Nuxt.js の各種設定などはこれを実現するための唯一の方法はなく、どのような方法でも上記の流れを実現することができれば問題がない</p>
<h2 id="tips参考書類"><a name="tips参考書類" class="plugin-anchor" href="#tips参考書類"><i class="fa fa-link" aria-hidden="true"></i></a>Tips(参考書類)</h2>
<p><a href="https://zenn.dev/00_/articles/c5130802d384b8238e4c" target="_blank">VueのSSR時におけるハイドレーションエラー対処法</a>
<a href="https://qiita.com/too/items/e8ffcf7de7d48dcb9a9b" target="_blank">nuxt lifecycle</a>
<a href="https://tjmschk.hatenablog.com/entry/2020/12/14/231800" target="_blank">Composition API + Typescript で Vuex をリアクティブに安全に使いたい</a></p>
<ul>
<li>nuxt buildを高速化する
<a href="https://tech.contracts.co.jp/entry/2020/12/14/161147" target="_blank">参考URL</a></li>
</ul>
<p>hardSource &amp; プロパティ共に未だNuxt.jsとしては実験的機能の扱いとなっていること。
調べてみますとhardSourceをONにしてビルドすると稀にビルドに失敗することがあるようです。解決方法としてはnode_modules/hard_source/*(hardSourceのキャッシュファイル群)を削除するとエラー解消されるようですので</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../vue/vue.html" class="navigation navigation-prev " aria-label="Previous page: Vue">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../react/react.html" class="navigation navigation-next " aria-label="Next page: React">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Nuxt","level":"7.1.3.5","depth":3,"next":{"title":"React","level":"7.1.3.6","depth":3,"path":"program/javascript/react/react.md","ref":"program/javascript/react/react.md","articles":[]},"previous":{"title":"Vue","level":"7.1.3.4","depth":3,"path":"program/javascript/vue/vue.md","ref":"program/javascript/vue/vue.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchors","hide-published-with","copy-code-button","intopic-toc","back-to-top-button"],"root":"./docs","styles":{"website":"styles/website.css"},"pluginsConfig":{"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","mode":"nested","maxDepth":6,"isCollapsed":true,"isScrollspyActive":true,"visible":true,"label":"In this article"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"hide-published-with":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"copy-code-button":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"naohito-T","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"naopedia","language":"ja","gitbook":"*"},"file":{"path":"program/javascript/nuxt/nuxt.md","mtime":"2023-01-12T13:58:46.990Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2023-01-12T13:58:59.079Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-hide-published-with/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

