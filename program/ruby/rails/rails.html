
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Rails · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../dsl/dsl.html" />
    
    
    <link rel="prev" href="../ruby.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Summary</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../../coding/coding.html">
            
                <a href="../../../coding/coding.html">
            
                    
                    1. coding
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../../coding/algorithm/algorithm.html">
            
                <a href="../../../coding/algorithm/algorithm.html">
            
                    
                    1.1 algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../../coding/atcoder/atcoder.html">
            
                <a href="../../../coding/atcoder/atcoder.html">
            
                    
                    1.2 AtCoder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../../coding/namerules/namerules.html">
            
                <a href="../../../coding/namerules/namerules.html">
            
                    
                    1.3 命名規則
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../../coding/designpattern/designpattern.html">
            
                <a href="../../../coding/designpattern/designpattern.html">
            
                    
                    1.4 Design Pattern
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../../../coding/principle/principle.html">
            
                <a href="../../../coding/principle/principle.html">
            
                    
                    1.5 プリンシプル オブ プログラミング
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../../../coding/tips/tips.html">
            
                <a href="../../../coding/tips/tips.html">
            
                    
                    1.6 Tips(コーディングアイデア集)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../program.html">
            
                <a href="../../program.html">
            
                    
                    2. program
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../c/c_c++.html">
            
                <a href="../../c/c_c++.html">
            
                    
                    2.1 C/C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../go/go.html">
            
                <a href="../../go/go.html">
            
                    
                    2.2 Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../../javascript/javascript.html">
            
                <a href="../../javascript/javascript.html">
            
                    
                    2.3 JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.3.1" data-path="../../javascript/dom/dom.html">
            
                <a href="../../javascript/dom/dom.html">
            
                    
                    DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.2" data-path="../../javascript/canvas/canvas.html">
            
                <a href="../../javascript/canvas/canvas.html">
            
                    
                    Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.3" data-path="../../javascript/ts/typescript.md">
            
                <span>
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.4" data-path="../../javascript/vue/vue.html">
            
                <a href="../../javascript/vue/vue.html">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.5" data-path="../../javascript/nuxt/nuxt.html">
            
                <a href="../../javascript/nuxt/nuxt.html">
            
                    
                    Nuxt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.6" data-path="../../javascript/react/react.html">
            
                <a href="../../javascript/react/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.7" data-path="../../javascript/node/node.html">
            
                <a href="../../javascript/node/node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.8" data-path="../../javascript/json/package.md">
            
                <span>
            
                    
                    JSON
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../../php/php.html">
            
                <a href="../../php/php.html">
            
                    
                    2.4 PHP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.4.1" data-path="../../php/Laravel/Laravel.html">
            
                <a href="../../php/Laravel/Laravel.html">
            
                    
                    Laravel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../../python/python.html">
            
                <a href="../../python/python.html">
            
                    
                    2.5 Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.6" data-path="../ruby.html">
            
                <a href="../ruby.html">
            
                    
                    2.6 Ruby
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.2.6.1" data-path="rails.html">
            
                <a href="rails.html">
            
                    
                    Rails
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="../../dsl/dsl.html">
            
                <a href="../../dsl/dsl.html">
            
                    
                    2.7 DSL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.7.1" data-path="../../dsl/xml.html">
            
                <a href="../../dsl/xml.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.2" data-path="../../dsl/toml.html">
            
                <a href="../../dsl/toml.html">
            
                    
                    TOML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.3" data-path="../../dsl/正規表現.html">
            
                <a href="../../dsl/正規表現.html">
            
                    
                    正規表現
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.8" data-path="../../全体に適用できる考え方.html">
            
                <a href="../../全体に適用できる考え方.html">
            
                    
                    全体に適用できる考え方
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../../design/design.html">
            
                <a href="../../../design/design.html">
            
                    
                    3. design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../../../design/html/html.html">
            
                <a href="../../../design/html/html.html">
            
                    
                    3.1 html
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1.1" data-path="../../../design/html/tag.html">
            
                <a href="../../../design/html/tag.html">
            
                    
                    tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.1.2" data-path="../../../design/html/archit1ecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../../../design/css/css.html">
            
                <a href="../../../design/css/css.html">
            
                    
                    3.2 css
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.2.1" data-path="../../../design/css/property.md">
            
                <span>
            
                    
                    property
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2.2" data-path="../../../design/css/design.md">
            
                <span>
            
                    
                    design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2.3" data-path="../../../design/css/architecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../../../design/pwa/pwa.html">
            
                <a href="../../../design/pwa/pwa.html">
            
                    
                    3.3 pwa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="../../../design/sass/sass.md">
            
                <span>
            
                    
                    3.4 sass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5" data-path="../../../design/animation/animation.html">
            
                <a href="../../../design/animation/animation.html">
            
                    
                    3.5 animation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.5.1" data-path="../../../design/animation/flash.html">
            
                <a href="../../../design/animation/flash.html">
            
                    
                    flash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5.2" data-path="../../../design/animation/gsap.html">
            
                <a href="../../../design/animation/gsap.html">
            
                    
                    gsap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5.3" data-path="../../../design/animation/webgl.md">
            
                <span>
            
                    
                    WebGL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.6" data-path="../../../design/3D/3d.html">
            
                <a href="../../../design/3D/3d.html">
            
                    
                    3.6 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.7" data-path="../../../design/web/web.html">
            
                <a href="../../../design/web/web.html">
            
                    
                    3.7 Web(Webでのdesign案)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../../web/web.html">
            
                <a href="../../../web/web.html">
            
                    
                    4. Web(web作成の時に使うもの)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../../web/darkmode.html">
            
                <a href="../../../web/darkmode.html">
            
                    
                    4.1 darkmode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../../../web/loading.html">
            
                <a href="../../../web/loading.html">
            
                    
                    4.2 Loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="../../../web/login.html">
            
                <a href="../../../web/login.html">
            
                    
                    4.3 login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="../../../web/modal.html">
            
                <a href="../../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="../../../web/pagenation.html">
            
                <a href="../../../web/pagenation.html">
            
                    
                    4.5 pagenation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.6" data-path="../../../web/pc_sp_判断.html">
            
                <a href="../../../web/pc_sp_判断.html">
            
                    
                    4.6 pcsp判断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.7" data-path="../../../web/progressbar.md">
            
                <span>
            
                    
                    4.7 progressbar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.8" data-path="../../../web/modal.html">
            
                <a href="../../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.9" data-path="../../../web/modal.html">
            
                <a href="../../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../../db/db.html">
            
                <a href="../../../db/db.html">
            
                    
                    5. DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../../../db/sql/sql.html">
            
                <a href="../../../db/sql/sql.html">
            
                    
                    5.1 SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1.1" data-path="../../../db/sql/mysql/mysql.html">
            
                <a href="../../../db/sql/mysql/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../../../db/orm/orm.html">
            
                <a href="../../../db/orm/orm.html">
            
                    
                    5.2 ORM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.2.1" data-path="../../../db/orm/typeorm/typeorm.html">
            
                <a href="../../../db/orm/typeorm/typeorm.html">
            
                    
                    TypeORM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../../../db/redis/redis.html">
            
                <a href="../../../db/redis/redis.html">
            
                    
                    5.3 Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../../cloud/cloud.md">
            
                <span>
            
                    
                    6. cloud
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="../../../cloud/gcp/firebase.md">
            
                <span>
            
                    
                    6.1 gcp
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../../../middleware/README.md">
            
                <span>
            
                    
                    7. middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../../../infrastructure/infrastructure.html">
            
                <a href="../../../infrastructure/infrastructure.html">
            
                    
                    8. infrastructure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.8.1" data-path="../../../infrastructure/docker/docker.html">
            
                <a href="../../../infrastructure/docker/docker.html">
            
                    
                    8.1 docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.8.1.1" data-path="../../../infrastructure/docker/docker-compose.html">
            
                <a href="../../../infrastructure/docker/docker-compose.html">
            
                    
                    docker compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../../../hardware/hardware.html">
            
                <a href="../../../hardware/hardware.html">
            
                    
                    9. hardware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1" data-path="../../../hardware/lowlayer/program.html">
            
                <a href="../../../hardware/lowlayer/program.html">
            
                    
                    9.1 低レイヤー
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.2" data-path="../../../hardware/os/os.html">
            
                <a href="../../../hardware/os/os.html">
            
                    
                    9.2 OS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="../../../security/security.html">
            
                <a href="../../../security/security.html">
            
                    
                    10. セキュリティ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="../../../test/test.html">
            
                <a href="../../../test/test.html">
            
                    
                    11. テスト
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.11.1" data-path="../../../test/webUI/Cypress.md">
            
                <span>
            
                    
                    11.1 WebUI テスト
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="../../../performance/performance.html">
            
                <a href="../../../performance/performance.html">
            
                    
                    12. パフォーマンス
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="../../../plan/plan.html">
            
                <a href="../../../plan/plan.html">
            
                    
                    11. 設計思想
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1" data-path="../../../plan/front/front.html">
            
                <a href="../../../plan/front/front.html">
            
                    
                    11.1 フロントエンド
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1.1" data-path="../../../plan/spa/ssr.md">
            
                <span>
            
                    
                    SPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.2" data-path="../../../plan/ssr/ssr.md">
            
                <span>
            
                    
                    SSR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.3" data-path="../../../plan/front/flux/flux.html">
            
                <a href="../../../plan/front/flux/flux.html">
            
                    
                    Flux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.4" data-path="../../../plan/front/bff/bff.html">
            
                <a href="../../../plan/front/bff/bff.html">
            
                    
                    BFF(Backends For Frontends)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.5" data-path="../../../plan/front/structure.html">
            
                <a href="../../../plan/front/structure.html">
            
                    
                    システムがWeb Pageを表示する仕組み
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.2" data-path="../../../plan/server/server.html">
            
                <a href="../../../plan/server/server.html">
            
                    
                    11.2 Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.2.1" data-path="../../../plan/server/mvc/mv*.html">
            
                <a href="../../../plan/server/mvc/mv*.html">
            
                    
                    MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.2" data-path="../../../plan/server/object/object.md">
            
                <span>
            
                    
                    Object指向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.3" data-path="../../../plan/server/ddd/ddd.html">
            
                <a href="../../../plan/server/ddd/ddd.html">
            
                    
                    DDD(Domain Driven Design)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.4" data-path="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                <a href="../../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                    
                    Clean Architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.3" data-path="../../../plan/infra/infra.html">
            
                <a href="../../../plan/infra/infra.html">
            
                    
                    11.3 インフラ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.3.1" data-path="../../../plan/infra/micro/micro.html">
            
                <a href="../../../plan/infra/micro/micro.html">
            
                    
                    マイクロサービスアーキテクチャ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="../../../requirement/requirement.html">
            
                <a href="../../../requirement/requirement.html">
            
                    
                    12. My Product要件定義
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="../../../tool/tool.md">
            
                <span>
            
                    
                    13. Tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.15.1" data-path="../../../tool/git/git.md">
            
                <span>
            
                    
                    13. 1 Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.15.1.1" data-path="../../../tool/git/作法.md">
            
                <span>
            
                    
                    作法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.1.2" data-path="../../../tool/git/github_actions.md">
            
                <span>
            
                    
                    GitHub Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.1.3" data-path="../../../tool/git/PULL_REQUEST_TEMPLATE.md.md">
            
                <span>
            
                    
                    PULL_REQUEST_TEMPLATE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.15.2" data-path="../../../tool/codepen/codepen.md">
            
                <span>
            
                    
                    13. 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.3" data-path="../../../tool/vscode/vscode.md">
            
                <span>
            
                    
                    13. 3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="../../../shell/shell.md">
            
                <span>
            
                    
                    14. shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.16.1" data-path="../../../shell/env/env.md">
            
                <span>
            
                    
                    14.1 env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.16.2" data-path="../../../shell/makefile/makefile.md">
            
                <span>
            
                    
                    14.2 Makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.16.3" data-path="../../../shell/zsh/zsh.md">
            
                <span>
            
                    
                    14.1 zsh
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="../../../word/word.md">
            
                <span>
            
                    
                    15. IT単語
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.17.1" data-path="../../../word/jword.md">
            
                <span>
            
                    
                    日本語 単語
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.17.2" data-path="../../../word/bword.md">
            
                <span>
            
                    
                    ビジネス 用語
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="../../../mathematics/mathematics.md">
            
                <span>
            
                    
                    15. 数学
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Rails</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ruby-on-rails">Ruby on Rails</h1>
<p><a href="https://railsguides.jp/" target="_blank">Railsガイド(これを見ろ)(本リファレンス)</a>
<a href="https://atmarkit.itmedia.co.jp/ait/articles/1102/23/news109_3.html" target="_blank">Rails</a>
<a href="https://qiita.com/shunjikonishi/items/e39ed8091e1dca817468" target="_blank">Railsのクリーンアーキテクチャ</a>
<a href="https://techtechmedia.com/hashid-rails/" target="_blank">【Rails】hashid-railsを用いてIDを難読化・暗号化させる方法</a>
<a href="https://ja.stackoverflow.com/questions/86424/rails%E3%81%AE%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%81%AE%E7%9B%AE%E7%9A%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E7%96%91%E5%95%8F" target="_blank">Railsでの名前空間について(わかりやすい)</a></p>
<h2 id="rails作者">Rails作者</h2>
<p>DHHが語っているシリーズ
<a href="https://pr.forkwell.com/articles/dhh-rails-large-scale-development/" target="_blank">大規模開発に強い理由</a></p>
<hr>
<h2 id="最新railsについて">最新Railsについて</h2>
<p><a href="https://qiita.com/jnchito/items/5c41a7031404c313da1f" target="_blank">Rails7変更点</a></p>
<h2 id="rails-apiモード">Rails apiモード</h2>
<p><a href="https://railsguides.jp/api_app.html" target="_blank">リファレンス（apiモードについて）</a></p>
<p>以下の3つが行われる。</p>
<ul>
<li><p>利用するミドルウェアを通常よりも絞り込んでアプリケーションを起動するよう設定する。特に、ブラウザ向けアプリケーションで有用なミドルウェア（cookiesのサポートなど）はデフォルトでは利用しません。</p>
</li>
<li><p>ApplicationControllerが通常のActionController::BaseではなくActionController::APIを継承します。ミドルウェアと同様、Action Controllerモジュールのうち、ブラウザ向けアプリケーションでしか使われないモジュールをすべて除外します。</p>
</li>
<li><p>ビュー、ヘルパー、アセットを生成しないようジェネレーターを設定します。</p>
</li>
</ul>
<h2 id="rails-70-node">Rails 7.0 Node</h2>
<p>importmap
Rails 7といえば、Node.jsを裏で使う必要がなくなった。
<code>importmap-rails</code>が目玉のリリース。
<code>importmap-rails</code>を使うことで、フロントエンドのJavaScriptのライブラリを管理してくれるようになる。</p>
<h2 id="importmap-rails">importmap-rails</h2>
<p><a href="https://www.bokukoko.info/entry/2022/02/15/153751" target="_blank">参考URL</a></p>
<blockquote>
<p>これで初期化した Rails アプリには なんと、package.json, yarn.lock が存在しない！
その代わりに、config/importmap.rb にて以下の記載がある。</p>
</blockquote>
<p>初期化</p>
<pre><code class="lang-sh">$ vim Gemfile
gem <span class="hljs-string">&apos;importmap-rails&apos;</span>

$ bundle install
$ bundle <span class="hljs-built_in">exec</span> rails importmap:install
</code></pre>
<h2 id="rails-70-assetsまわり">Rails 7.0 assetsまわり</h2>
<p>webpackerはなくなっている！</p>
<p><a href="https://qiita.com/suketa/items/837eb97bdb48dd8c4688" target="_blank">参考URL</a>
<a href="https://qiita.com/kazutosato/items/1ae1cf0ec380a75d4dc4" target="_blank">JavaScript BundlingとCSS Bundlingのしくみ</a></p>
<p>railsではJS/CSSなどを総称してassetsと呼んでいる</p>
<blockquote>
<p>Rails 5-6時代に使われたwebpackerは、公式に「has been retired」とされ、Rails 7では<code>importmap</code>が標準となりました。
Rails7はimportmapとは別に、JavaScriptのバンドラやCSSのフレームワークを導入するしくみを用意している。</p>
</blockquote>
<h3 id="rails70でのアセット管理">Rails7.0でのアセット管理</h3>
<p><a href="https://re-engines.com/2021/12/27/rails7-frontend/" target="_blank">Rails 7でフロントエンド開発が大きく変わる</a></p>
<blockquote>
<p>Rails 7.0 では、新たに4つのGemが登場します。これまでとは異なり、開発者はこれらのGemを自分のプロジェクトに合う組み合わせで採用することになります。</p>
</blockquote>
<hr>
<h2 id="rails7にあとからフロントエンドに入れる">Rails7にあとからフロントエンドに入れる</h2>
<p><a href="https://qiita.com/kazutosato/items/1ae1cf0ec380a75d4dc4" target="_blank">Rails7にあとからフロントエンドに入れる</a></p>
<p>2つのgem</p>
<ol>
<li>JavaScript Bundling（jsbundling-rails）</li>
<li>CSS Bundling（cssbundling-rails）</li>
</ol>
<h3 id="javascript-bundling（jsbundling-rails）">JavaScript Bundling（jsbundling-rails）</h3>
<p>JSファイルを<code>app/assets</code>の下に出力するもの。</p>
<h3 id="css-bundling（cssbundling-rails）">CSS Bundling（cssbundling-rails）</h3>
<p>CSSフレームワーク（Bootstrapやbulma）をsassコマンドでapp/assetsの下に出力する。
バンドラやCSSフレームワークはyarnコマンドでnode_modules下にインストールされる</p>
<h3 id="後から入れる">後から入れる</h3>
<p>各コマンドは、package.jsonの中で指定されます。
開発環境では、foreman（bin/dev）を使ってRailsサーバー、JSの変更監視、CSSの変更監視、の3つを動かす。</p>
<pre><code class="lang-sh"><span class="hljs-comment"># 後からbootstrapを入れる</span>
bin/rails css:install:bootstrap

<span class="hljs-comment"># Procfile.dev</span>
<span class="hljs-comment"># package.json</span>
<span class="hljs-comment"># bin/dev</span>
<span class="hljs-comment"># 3つができる</span>
</code></pre>
<h3 id="procfiledev">Procfile.dev</h3>
<p>アプリケーションのルートにできる<code>Procfile.dev</code>では、一度に3つのプログラム（rails、JSバンドラ、sass）が常駐するように設定してある。
<code>--watch</code>オプションによってファイルを監視し、変更があれば自動的に変換する。</p>
<p>binディレクトリの下のdevコマンドでは、foremanを使って<code>Procfile.dev</code>のコマンドを動かしている。
foremanがないときは自動的にインストールされる。</p>
<hr>
<h2 id="railsスタイルガイド">Railsスタイルガイド</h2>
<p>シンボル名、メソッド名、変数名は<strong>スネークケース</strong>にする</p>
<h2 id="rails欠点">Rails欠点</h2>
<p><a href="https://techlife.cookpad.com/entry/2017/04/06/172601" target="_blank">参考URL</a></p>
<p>RailsはDBのテーブルをそのまま読み書きするような単純なアプリケーションは簡単にできるが、より複雑なアプリケーションではそのぶん慎重な設計が必用になるため、Trailblazerのような複雑なWebアプリケーション構築を支援するライブラリが注目を集めている。</p>
<h2 id="railsの設計哲学">Railsの設計哲学</h2>
<ol>
<li>DRY(Don&apos;t Repeat Yourself): 繰り返しを避けよ</li>
</ol>
<p>DRYはDRY原則とも呼ばれる。Railsを使ったWebアプリケーションでは同じことを繰り返し記述するのは避けなければならない。
同じことをソースコードや設定ファイルの中で繰り返し記述するのはムダ。
仕様変更やバグフィックスのときに一部を変更し忘れる可能性が高くなる。
DRYを意識することで効率よく、品質のよいアプリケーションが作成できる。</p>
<ol>
<li>設定より規約（Conventition over Configurations）</li>
</ol>
<p>「規約」とは、言い換えれば「デフォルトの設定」です。<strong>あらかじめ用意された規約にしたがってアプリケーションを開発することで、記述量を大幅に減らせる。</strong>
たとえば、モデルには命名規約がありテーブル名をmembersのように複数形にすると、モデルのクラス名は単数形のMember、クラスを記述するファイル名はmember.rbとなります。決まりきった手順に従うことで余計な設定を記述する必要がなくなり、プログラマはコードへ集中できるようになります。</p>
<p>Railsで採用されているルール（規約）にしたがっていれば、Active Recordモデルの作成時に書かなければならない設定用コードは最小限で済みますし、設定用コードが完全に不要になることすらあります。これは「設定がほとんどの場合で共通ならば、その設定をアプリケーションのデフォルトにすべきである」という考えに基づいてる。</p>
<h2 id="rails-でのアーキテクチャー">Rails でのアーキテクチャー</h2>
<p><img src="image/rails.png" alt="アーキテクチャ"></p>
<h2 id="mvcへの対応">MVCへの対応</h2>
<p>RailsではMVCでの役割をフォルダーごとに分けることで開発もスムーズに行えるような仕組みになっている。</p>
<hr>
<h2 id="rails-model">Rails model</h2>
<p>モデルとDBは1対1の相互関係で成り立っている。
※開発現場でもモデルが一番最初に作られる。
※モデルはただのクラスだがDBと連携するクラスをRailsではモデルと呼ぶ。</p>
<h2 id="rails-ディレクトリ詳細">Rails ディレクトリ詳細</h2>
<p><a href="http://www.code-magagine.com/?p=4326" target="_blank">参考URL</a></p>
<hr>
<h2 id="rails-便利コマンド">Rails 便利コマンド</h2>
<p>Railsでは<code>rails generate controller</code>などのコマンドでcontrollerやmodelをコマンドラインから生成することができる。
※設定で生成するファイルを絞ることができる。</p>
<h3 id="binrailsとbundle-exec-railsの違い">bin/railsとbundle exec railsの違い</h3>
<p><a href="https://k-koh.hatenablog.com/entry/2020/05/15/124256" target="_blank">参考URL</a></p>
<blockquote>
<p>bin/rails読むと
config/bootを読み込んでいる事が分かると思います。
config/boot.rbを読むとbundler/setupを読んでいます。
bundler/setupが実行されるとbundle execと同じ事が行われるので
結論としては違いはありません。</p>
</blockquote>
<hr>
<h2 id="rails-タイムゾーン">Rails タイムゾーン</h2>
<p>デフォルトではUTC
そのため<code>created_at</code>や<code>update_at</code>は日本時刻の9時間前になる。</p>
<h2 id="railsで新規タグ">Railsで新規タグ</h2>
<p>Railsでクラスを作るには、直接ファイルを作成するのではなく専用のコマンドをつかうことが多い。</p>
<h2 id="rails-3つのモードenvironment">Rails 3つのモード(environment)</h2>
<p>Railsには3種類ある</p>
<p>開発 : develop : コードを書きながらブラウザで確認するための環境
テスト : test : 自動テストのための環境
本番 : production : ウェブサイトを一般に公開する時の環境</p>
<h2 id="dockerを使わない場合のrails">Dockerを使わない場合のRails</h2>
<p>Dockerを使わないRailsデプロイでは、以下の環境変数が自動で設定される。
<strong>Docker経由の場合は、自分で本番用の環境変数を設定する必要がある。</strong></p>
<ul>
<li><p><code>LANG</code>: en_US.UTF-8</p>
</li>
<li><p><code>RACK_ENV</code>: production
Rackへ現在の環境を示す変数
Rackとは … http送受信処理を担当するモジュールのこと。</p>
</li>
<li><p><code>RAILS_ENV</code>: production
Railsへ現在の環境を示す変数</p>
</li>
<li><p><code>RAILS_LOG_TO_STDOUT</code>: enabled
logを標準で出力するか否かのフラグ。enabled = 出力する。</p>
</li>
<li><p><code>RAILS_SERVE_STATIC_FILES</code>: enabled
publicディレクトリからの静的ファイルを提供してもらう（apiモードではあんま意味ないかも）</p>
</li>
</ul>
<h2 id="railsで使われているmvcのデザインパターン">Railsで使われているMVCのデザインパターン</h2>
<p><img src="image/mvc.png" alt="MVC"></p>
<p><strong>APIモードではViewは存在しない。</strong></p>
<ul>
<li>モデル
モデルはデータとビジネスロジックを表す。ビジネスロジックとはたとえば給与計算ロジックのようなアプリケーションドメイン特有の処理のこと(localhost/api/users)→userの一覧を出すみたいな
Railsではモデル層はActiveModelという概念に抽象化され、デフォルトではActiveRecordというO/Rマッピングの機能を提供するライブラリが使われる。
ActiveRecordでは、リレーショナルデータベースのテーブルに対応するモデルクラスにアプリケーションのデータとロジックを実装していきます。データの永続化に関する処理の多くはActiveRecordが担当してくれるので、単純なモデルであれば、プログラマが書かなければならないコードの量は、ごくわずかです。一般的にプログラマがモデルに追加することの多いコードとしては、クラスの持つ値の検証や、他モデルとの連携が挙げられます。</li>
</ul>
<ul>
<li>コントローラ
ユーザのリクエストを受けて、モデルに適切な動作を要求する。
またどのビューをどの組み合わせで利用するかを決定する。
Webアプリケーションにおけるコントローラーには、このほかWebに関する一般的な仕事を受け持つという側面があります。たとえばセッション管理や、URLの解釈、HTTPリクエスト・レスポンスの処理、クッキーの管理などを担当します
Railsでは、コントローラーはAbstractControllerとして抽象化された上で、Webアプリケーション用の機能がActionControllerとして実現されています。プログラマは、これを継承したApplicationController（アプリケーションごとに1つ用意されます）に共通機能を追加したり、さらにこのApplicationControllerを継承した各種のコントローラークラスを追加していくことで開発を進めます。なお、個々のリクエストに直接的に対応する機能を実装した部分はアクションと呼ばれ、コントローラークラスのpublicなインスタンスメソッドとして実装されます。</li>
</ul>
<h2 id="railsの構成と機能">Railsの構成と機能</h2>
<p>Railsは<strong>復数のコンポーネントで構成されている。</strong>
Railsの実体はコンポーネント（Rubyで書かれたライブラリ）の集合体
<strong>基本とある3つのコンポーネントの名前を覚える</strong></p>
<ul>
<li>Active Record : モデル</li>
<li>Active View : ビュー</li>
<li>Active Controller : コントローラー</li>
</ul>
<h2 id="rails-apiモードとは">Rails APIモードとは</h2>
<p>Rails APIモードとは、API作成に特化したモード
APIモードではMVCのV(ビュー)が存在しないため、rails newを実行した際にビューに関するファイルやGemが生成されません。
API作成に特化したモードのことで、Rails5で実装された機能らしいです。 簡単に今までのRailsとの違いを説明すると、MVCでいう、Viewの部分が存在しません。 変わりにそのURLにアクセスするとerbを返さず、jsonを返す仕様になっています。 また、標準で入っているGemもViewの分が必要なくなっているので、普通に立ち上げたRailsのプロジェクトよりも少なくなっています。 詳しくは各々で調べてみてください。</p>
<ul>
<li>APIモードの違い
<a href="https://note.com/icchoco/n/nd408d2a9b2c8" target="_blank">参考URL</a></li>
</ul>
<hr>
<h2 id="gemとは">gemとは</h2>
<p>gemはRubyGemsと呼ばれるRuby用のパッケージ管理システムによって管理されたライブラリ
RubyGemsが提供するgemコマンドを通じてインストール等ができます。</p>
<p><strong>インストールしたgemを削除する</strong>
Gemfileから記述を消し<code>bundle install</code>する。</p>
<h2 id="gem-version-up-作成">gem version up 作成</h2>
<blockquote>
<p>Railsアプリケーションの開発現場で、いつどのようにgemをバージョンアップしたらよいかは悩ましい問題です。こまめにバージョンアップしていくのが一番ですが、テストコードが書かれておらず確認のコストが高いなどの理由で、リリース後にまったくバージョンを上げられないようなプロジェクトも少なくありません。しかし、Railsアプリケーションの開発でgemのバージョンをまったく上げずにすませることはほぼ不可能です。もし利用しているgemに脆弱性が発見されたらどうしたらよいでしょうか？バージョンが上げられないと、そのまま脆弱性のあるコードを使い続けるか、自分たちでパッチを当てる必要があります。ただ、gemのバージョンを固定している環境であれば、脆弱性対策は何もしない、となる可能性が高そうです。これはビジネスにおける大きなリスクになるでしょう。</p>
</blockquote>
<p>上記にもあるように
gemのバージョンを上げていくには<strong>まずテストを書き、その上でバージョンアップを続けられる仕組みを作ることが重要。</strong>
自動でgemバージョンアップ用のプルリクエストを作成してくれるサービスを使ったりする（GitHub Dependabotなど）</p>
<hr>
<h2 id="bundler、gemfile、gemfilelockの関係性について">bundler、Gemfile、Gemfile.lockの関係性について</h2>
<p><a href="https://qiita.com/nishina555/items/1b343d368c5ecec6aecf" target="_blank">参考URL</a></p>
<p>Ruby on RailsでWebアプリケーション（以降ではRailsアプリと略します）を開発をするにあたり、gemの活用は開発効率をあげるために重要</p>
<h3 id="bundler（yarn-npmと同一）">bundler（yarn, npmと同一）</h3>
<p>bundlerは依存関係にあるgemの依存関係やバージョンを管理してくれるgem
<strong>bundlerを利用することで依存関係にあるgemの一括インストール。gemのバージョン管理ができるようになる</strong>
<code>$ bundle install</code>を使って、Gemfileに記載されたgemをインストールする。
※<code>--without</code>なしに<code>bundle install</code>した場合は、すべてのgemがインストールされる。</p>
<p>bundle configとは
<a href="https://qiita.com/ren0826jam/items/1a2131f8e0f6921a0b98" target="_blank">参考URL</a>
Bundlerの設定システムと対話をできるもの。</p>
<p>Bundlerは設定を下記の優先順位にしたがって取得する。</p>
<ol>
<li>ローカルアプリケーション（app/.bundle/configp）</li>
<li>環境変数</li>
<li>ユーザのホームディレクトリ（~/.bundle/config）</li>
</ol>
<p><code>bundle list</code>
プラグインが入っているか確認ができる。</p>
<h2 id="bundle-install時に---path-vendorbundleをつける必要性">bundle install時に --path vendor/bundleをつける必要性</h2>
<p><a href="https://qiita.com/jnchito/items/99b1dbea1767a5095d85" target="_blank">bundle install時に--path vendor/bundleを付ける必要性は本当にあるのか、もう一度よく考えてみよう</a></p>
<p><code>bundle install</code>コマンドを実行するときRuby界には大きく分けて2つの流派がある。
それは「--path vendor/bundleを付ける派」と「付けない派」</p>
<h3 id="gemfile-packagejsonみたいな）">Gemfile (package.jsonみたいな）</h3>
<p>GemfileとはRailesアプリで利用されるgemの一覧を管理するファイル
bundlerによってインストールされるgemはどこで管理されているのか。</p>
<h2 id="rails-開発モードと本番モード">Rails 開発モードと本番モード</h2>
<p><a href="http://programing-kiso-note.blogspot.com/2014/01/ruby-on-rails.html" target="_blank">参考URL</a></p>
<p>Railsには開発モードと本番モードという2つのモードがあり、それぞれ<strong>役割ごとにデータベースを切り替えて使う機能</strong>が備わっている。</p>
<p>本番環境への切り替え方は以下の用にする</p>
<ol>
<li><p>環境変数の設定</p>
<pre><code class="lang-sh"><span class="hljs-comment"># Linuxの場合</span>
<span class="hljs-built_in">export</span> RAILS_ENV=production
<span class="hljs-comment"># windowsの場合は</span>
<span class="hljs-built_in">set</span> RAILS_ENV=production
</code></pre>
</li>
<li><p>モードが変わったかどうかは以下のコマンドで確認</p>
</li>
</ol>
<p><code>rails console</code>でコンソールを開く。
<code>Rails.env</code>とコマンドを叩く、これで現在の開発モードが出てくる。</p>
<p>3.precompileをする。
assetsの圧縮ファイルを作成する事が目的？SASSのbuild、JSファイルの圧縮などを行っておくのだと思われる。これを行う事により高速に動作する。
確認したところ圧縮しているわけではなさそう。キャッシュファイルの生成と書いてはいる。</p>
<ol>
<li>本番モードに切り替えた場合データベースをシードから作っていないので
作成する。
rake db:create
rake db:migrate</li>
</ol>
<hr>
<h2 id="rails-フォルダー構成">Rails フォルダー構成</h2>
<p><a href="https://railstutorial.jp/chapters/beginning?version=6.0" target="_blank">pageの真ん中らへんにある</a></p>
<pre><code class="lang-sh">store            … アプリケーションのルートディレクトリ
  app            … MVCに関わるアプリケーションの中心的なコード（モデル・ビュー・コントローラ・ヘルパー）
    controllers  … コントローラークラス
    helpers      … ヘルパーモジュール（ビュー用のヘルパーメソッド）
    mailers      … メール用のコントローラー
    models       … モデルクラス
    views        … テンプレート類
      layouts    … テンプレートに適用するレイアウト
  config         … 設定ファイル類
    environments … 開発、テスト、本番運用といった環境ごとの設定
    initializers … アプリケーション起動時に実行したいファイル
    locales      … 国際化に関するリソース
  db             … データベースに関するファイル
  doc            … rdocなどのドキュメント
  lib            … アプリケーションが使うライブラリコード全般（taskは`lib/tasks/*`に配置する）
  <span class="hljs-built_in">log</span>            … アプリケーションが出力するログ
  public         … Webの静的なコンテンツ
  script         … ユーティリティースクリプト
  <span class="hljs-built_in">test</span>           … Railsのデフォルトの自動テストに関するファイル
  tmp            … 一時ファイル
  vendor         … アプリケーション外部に由来するコード
    plugin       … Railsプラグイン
</code></pre>
<p><code>app</code>にはモデル、コントローラー、ヘルパー等の決まった物以外は置かない方がいい。
<code>app</code>内のパス構成は、Railsで決められた通りであることが前提となっているため、将来のバージョンアップで予期せぬ衝突が発生する可能性。
それらではない自作のクラスやモジュールは&quot;lib&quot;内に置く方が良いでしょう。</p>
<h3 id="initializers">initializers</h3>
<p>initializers以下においたファイルはサーバ起動時にのみ読み込まれるため、追加や編集をした場合は<strong>サーバを再起動する必要がある。</strong></p>
<hr>
<h2 id="rails-url">Rails url</h2>
<p><a href="https://qiita.com/190131start/items/49e2e9a42f49f17e45c6" target="_blank">参考URL</a></p>
<p>resources :users
6つのアクションが自動生成されますね。
これはREST設計になっています。</p>
<p>GET /users            users#index
POST /users           users#create
GET /users/:id        users#show
PATCH /users/:id      users#update
PUT /users/:id        users#update
DELETE /users/:id     users#destroy</p>
<h3 id="リソースベースのルーティングrails-default">リソースベースのルーティング(Rails default)</h3>
<p><a href="https://railsguides.jp/routing.html" target="_blank">リファレンス</a></p>
<p>リソースベースのルーティング（以下リソースルーティング）を使うことで以下が勝手に定義される。</p>
<p><strong>ルーティング</strong>
リソースベースで構成されたコントローラーに対応する共通のルーティングを手軽に宣言できます。resourcesを宣言するだけで、コントローラーのindex、show、new、edit、create、update、destroyアクションを個別に宣言しなくても1行で宣言が完了します。</p>
<p><strong>ヘルパーメソッド</strong>
リソースフルなルーティングを作成すると、アプリケーションのコントローラで多くのヘルパーが利用できるようになります。resources :photosというルーティングを例に取ってみましょう。</p>
<p>photos_pathは/photosを返します
new_photo_pathは/photos/newを返します
edit_photo_path(:id)は/photos/:id/editを返します（edit_photo_path(10)であれば/photos/10/editを返します）
photo_path(:id)は/photos/:idを返します（photo_path(10)であれば/photos/10を返します）</p>
<h2 id="rails--ルーティングを確認する方法">Rails  ルーティングを確認する方法</h2>
<p><a href="https://sakurawi.hateblo.jp/entry/rails-route" target="_blank">参考URL</a></p>
<p>ファイルで確認する方法は<code>config/routes.rb</code>でみる</p>
<p>Railsの流れとしては
URLにアクセス（+アクションメソッド）すれば、どのコントローラーアクションが実行されるかを示したもの。</p>
<p>CLI上
<code>$ rails routes</code>
<code>config/routes.rb</code>の中身がCLIで見られる。</p>
<p>ブラウザで確認</p>
<h2 id="puma">Puma</h2>
<p><a href="https://nekorails.hatenablog.com/entry/2018/10/12/101011" target="_blank">参考URL</a></p>
<p>Pumaとは、複数のリクエストを並行しうて処理することができる高速化を目的としたWebサーバ
Rails5以降はデフォルトでpumaが導入されており、自ら導入する必要はありません。</p>
<h2 id="docker--rails">docker  rails</h2>
<p><a href="https://qiita.com/eighty8/items/0288ab9c127ddb683315" target="_blank">参考URL</a></p>
<hr>
<h2 id="rails-debug">rails debug</h2>
<p><a href="https://qiita.com/nishina555/items/e5886339d381db61b412" target="_blank">参考URL</a></p>
<pre><code class="lang-ruby">puts ps
puts current_external_id
puts new_external_id

<span class="hljs-comment"># get fire again22</span>
<span class="hljs-comment"># &lt;PaymentSetting:0x0000ffff50fbe668&gt;</span>
<span class="hljs-comment"># price_1GwjUCI8OazorEAhkvB0EXBI</span>
<span class="hljs-comment"># price_1GwjUCI8OazorEAhtLlr784x</span>
<span class="hljs-comment"># get fire again2</span>

<span class="hljs-comment"># inspectを使えば、メモリ値の中身を見れる。</span>
puts ps.inspect
puts current_external_id
puts new_external_id

<span class="hljs-comment"># get fire again22</span>
#&lt;PaymentSetting id: 1, service_type: &quot;stripe&quot;, payment_type: &quot;card&quot;, is_subscription: true, period: 1, status: &quot;active&quot;, created_at: &quot;2022-02-03 07:29:41&quot;, updated_at: &quot;2022-02-03 07:29:41&quot;, visible: true&gt;
<span class="hljs-comment"># price_1GwjUCI8OazorEAhkvB0EXBI</span>
<span class="hljs-comment"># price_1GwjUCI8OazorEAhtLlr784x</span>
<span class="hljs-comment"># get fire again2</span>
</code></pre>
<h2 id="rails-logger">Rails logger</h2>
<p><a href="https://qiita.com/NaokiIshimura/items/dbf072c313f36c2d9dcc" target="_blank">参考URL</a>
<code>puts</code> or <code>logger</code>がある。</p>
<p><code>puts</code>はどの環境（ENV）でも標準出力に吐かれる。
<code>logger</code>はdevelopmentのみが標準出力される。</p>
<h2 id="b-0000">-b 0.0.0.0</h2>
<p>Rails側がとくに説明しなく仕様変更したっぽい</p>
<blockquote>
<p>実は、rails のプロジェクトのポカです。
危ないので、デフォルトを、ローカルからしか接続できない様に変更したのに
マニュアルを変更するのを忘れているのです。
<a href="http://localhost:3000" target="_blank">http://localhost:3000</a>
と、表示されているので、実は、分かりますけどもね。
<a href="http://0.0.0.0:3000" target="_blank">http://0.0.0.0:3000</a>
と表示されていないと、グローバルアドレスからは、接続できません。
起動時に
rails server -b 0.0.0.0
とやらないといけなくなったようです。
今まで、何も指定しなくても接続できたものを、
-b 0.0.0.0
を指定しないと、localhost からしか接続できない仕様変更をして、説明をするのを怠っているのです。</p>
</blockquote>
<p><a href="https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q10142609100" target="_blank">参考URL</a></p>
<p>rails serverのコマンドオプションとなります。
<strong>railsのプロセスをどのipアドレスにバインドするかを指定</strong>する。
ここではlocalhostのipアドレス「127.0.0.1」を「0.0.0.0」にバインドしています。
なぜこんな事をするのか
<strong>仮想環境で起動したRailsは、localhostのipアドレス「127.0.0.1」でアクセスできない</strong>
そこで仮想外部からアクセスできるように、ip「0.0.0.0」に紐付けをする必要がある。
これにより自分のPC上ブラウザからRailsへアクセスできるようになる。</p>
<h2 id="tips">Tips</h2>
<p><a href="https://hacktomo.hatenablog.com/entry/2017/12/14/012423" target="_blank">参考URL</a></p>
<pre><code class="lang-sh"><span class="hljs-comment"># ルーティング確認(api起動をしている際)</span>
$ rails routes
<span class="hljs-comment"># rails内の環境変数を確認したい場合(コンソールを出す : console の略)</span>
$ rails c
</code></pre>
<h2 id="dbの読み書きに使用するタイムゾーン">DBの読み書きに使用するタイムゾーン</h2>
<p>Railsにはアプリのタイムゾーンとは別に、DBの読み書きに使用するタイムゾーンがある。
※これはどのバックエンドでも言えることだろう</p>
<h2 id="定数管理">定数管理</h2>
<p><a href="https://techblog.kyamanak.com/entry/2017/07/05/002655" target="_blank">参考URL</a>
<a href="https://qiita.com/srockstyle/items/daed31a78c343e607822" target="_blank">config</a>
<a href="http://vdeep.net/rubyonrails-config-gem" target="_blank">config/gem初期設定</a></p>
<p>自分で作るパターンもあればgemを使うパターンもある。
gemを使わないパターンがあるとしたら以下がオーソドックス</p>
<ol>
<li><code>application_controller.rb</code>で定数を管理する方法</li>
<li><code>config/initializers/constants.rb</code>のようなファイルを用意して、そこで定数を管理する方法</li>
</ol>
<p><code>application_controller.rb</code>は<strong>アプリケーション共通の処理を管理する場所</strong>なので、ここで定数を管理するのはあまり相応しくない。</p>
<p><code>config/initializers/constants.rb</code>のようにファイルを用意して、そこで定数を管理する方法のがいい。</p>
<ul>
<li>gemを使うパターン
<a href="https://qiita.com/sazumy/items/8d3b06d0d42af114a383" target="_blank">参考URL</a></li>
</ul>
<p><code>config</code>が一番定番。
Settingslogic→あまり使われていない。</p>
<hr>
<h2 id="rails6でのzeitwerkツァイトベルク">Rails6でのZeitwerk(ツァイトベルク)</h2>
<p><a href="https://zenn.dev/murakamiiii/articles/893d83626c9f15" target="_blank">参考URL</a></p>
<ul>
<li>そもそもなぜRailsではrequireなしにファイルを読み込むのか</li>
</ul>
<p>他の言語などにおいて、他のファイルを読み込むとなればimportするなどして明示的に読み込む必要があるが、<strong>Railsではそれをよしなにやってくれる。</strong>
Zeitwerkという仕組みがRailsには組み込まれているから</p>
<p>Rails6から自動読み込みモードZeitwerkが追加された。</p>
<hr>
<h2 id="プロジェクト構造">プロジェクト構造</h2>
<p>Railsアプリケーションでは<strong>ファイル名はそれらが定義する定数と一致する必要</strong>があり、<strong>ディレクトリは名前空間</strong>として機能する
Zeitwerkは例として、app/controllers/users_controller.rb定数を定義するUsersController（クラス）のことを期待しています。</p>
<h2 id="rails6からのlibディレクトリ以下のファイル読み込み">Rails6からのlibディレクトリ以下のファイル読み込み</h2>
<p>Rails6のデフォルトではlibディレクトリ以下のファイルは読み込まれない</p>
<p>読み込む方法は2つある</p>
<ol>
<li>requireで呼び出し</li>
</ol>
<p>読み込みたい場所でrequireで宣言する方法
Railsがデフォルトで読み込むパスにはapp/libまで設定されている。それ以下のファイルパスを渡す。</p>
<p>api/lib/validator/email_validator.rbの場合
=&gt; &quot;validator/email_validator.rb&quot;のパスを渡す</p>
<ol>
<li>application.rbで呼び出し</li>
</ol>
<p>Rails6のオートロードシステム（Zeitwerk）に読み込むパスを追加する方法</p>
<h2 id="rails-での-test">rails での test</h2>
<p>Railsのデフォルトではfixture(フィクスチャー)を使ってテストデータを生成する。</p>
<ul>
<li>fixtureとは
fixtureとは、Railsが用意しているテストデータを生成するための方法です。
この方法を使う場合、テストデータはymlファイルで生成する。</li>
</ul>
<h2 id="pundit">Pundit</h2>
<p><a href="https://qiita.com/yutaro50/items/52484b7ae4ca87aa99a2" target="_blank">参考URL</a></p>
<p>Rubyのgemライブラリ
<strong>認可の仕組みを提供してくれる</strong>
ユーザによってページ表示の許可・拒否をしたり表示情報の範囲を変えたりすることができるgem</p>
<h2 id="module">module</h2>
<p><a href="https://techplay.jp/column/536" target="_blank">参考URL</a></p>
<p>moduleには部品の集まりや区分という意味になる。
Rubyの<strong>moduleはclassと同じようにmodule内に関数の定義ができること、</strong>プログラム上での役割や振る舞いをまとめることができる。</p>
<p>classとの違いは？</p>
<ol>
<li>moduleからインスタンスが生成できないこと</li>
<li><p>moduleは継承ができない</p>
</li>
<li><p>moduleを使うメリット</p>
</li>
</ol>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Car</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperCar</span></span>
    def <span class="hljs-keyword">self</span>.introduce
      puts <span class="hljs-string">&quot;This is SuperCar&quot;</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperCar</span></span>
  def <span class="hljs-keyword">self</span>.introduce
    puts <span class="hljs-string">&quot;これはスーパーカーです&quot;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

Car::SuperCar.introduce <span class="hljs-comment"># module呼び出し</span>
SuperCar.introduce <span class="hljs-comment"># class呼び出し</span>
</code></pre>
<p>module名とclass名は同名であるが、<strong>moduleには名前空間としての役割を持っているためコンパイル上では別のものとなっている。</strong></p>
<h2 id="ruby独自の機能にmix-in">ruby独自の機能にMix-in</h2>
<p>Mix-inすることでmodule内のメソッドをインスタンスメソッドとして利用することがができる。
※includeでの拡張は静的となる。</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Lion</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cryLion</span></span>
    puts <span class="hljs-string">&quot;ガオー！&quot;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Cat</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cryCat</span></span>
    puts <span class="hljs-string">&quot;ニャー&quot;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span></span>
  <span class="hljs-keyword">include</span> Lion, Cat <span class="hljs-comment"># moduleの機能をincludeしている</span>
<span class="hljs-keyword">end</span>

obj = Animal.new

obj.cryLion <span class="hljs-comment"># Lionクラスのmethodを利用</span>
obj.cryCat  <span class="hljs-comment"># Catクラスのmethodを利用</span>
</code></pre>
<hr>
<p>ここから本</p>
<h2 id="rails処理順序基本">Rails処理順序(基本)</h2>
<p><img src="image/rails.png" alt="route">
<img src="image/modal.png" alt="コントローラからモデルとDB"></p>
<ol>
<li>ブラウザからのリクエストを受け取ると、Railsはパスを調べroutes.rbにしたがってどのコントローラのどのアクションを選べば良いかを決める(Controllerの中にアクションは複数ある)</li>
<li>Railsは選ばれたアクション(メソッド)を実行する(アクションにはモデルとの間で情報のやり取りをするプログラム)を書く</li>
<li>モデルはDBのテーブルと対応している、アクションはモデルから取得した情報のうち、表示に必要なものをインスタンス変数に保存し返す</li>
</ol>
<h2 id="route">route</h2>
<p>RailsアプリケーションではRESTの原則にしたがってデータをリソースとして扱う</p>
<blockquote>
<p>RailsにはRESTに基づいた作法でウェブアプリケーションを作成する機能がある。</p>
</blockquote>
<h2 id="railsにおけるリソースとは">Railsにおけるリソースとは</h2>
<p><strong>コントローラーが扱う対象に名前をつけたもの。</strong>
リソース名を設定するには<code>config/routes.rb</code>にresourcesメソッドを追加するだけ</p>
<p><code>resources: リソース名の複数形で記述する</code></p>
<p><strong>上記で7つのアクションのルーティングが設定できる。</strong></p>
<p>これをRESTフルなルーティング、またはリソースベースのルーティングと呼ぶ</p>
<h2 id="controllers-コントローラー">controllers コントローラー</h2>
<p>コントローラーは<strong>複数系で定義</strong>する。
※リソースを扱うコントローラーはMembersControllerの様に、リソース名+Controllerという名前が一般的</p>
<p>DHH（railsを作った人）が述べているコントローラーの作りかた
<a href="https://postd.cc/how-dhh-organizes-his-rails-controllers/" target="_blank">参考URL</a></p>
<h2 id="configroutesrb">config/routes.rb</h2>
<pre><code class="lang-ruby">resources <span class="hljs-symbol">:orders</span>, <span class="hljs-symbol">only:</span> [<span class="hljs-symbol">:index</span>]
</code></pre>
<p>必ずorderのモデルが必要ではない。
リソース名に対応したコントローラーに対して、<strong>7つのアクションのルーティングを自動的に設定するだけ</strong></p>
<h2 id="strong-parameter">strong parameter</h2>
<p><a href="https://qiita.com/ozackiee/items/f100fd51f4839b3fdca8" target="_blank">参考URL</a>
ストロングパラメーターは<strong>Web上から受けつけたパラメーターが本当に安全なデータかどうか</strong>を検証した上で、取得するための仕組み。Rails4から実装されている。
フォームから送信されてきたparameterで<strong>どのparameterを許可するかホワイトリストを実装する。</strong></p>
<p>命名規則慣例
メソッド名に命名規則はないようですが<code>モデル名_params</code>とするのが一般的。
また実行結果として、許可されたカラムの値だけを抽出しハッシュ形式で呼び出し元に値を返す。</p>
<p>permit
permitメソッドを使用する事で<strong>許可された値のみ</strong>を取得することができる。
そのため、permitメソッドの引数には登録を許可するすべてのカラム名を指定しておく必要があります。もし、許可されいないカラムがparams内に存在した場合、そのデータは取得されず無視されます。</p>
<h2 id="リソースを扱うコントローラー">リソースを扱うコントローラー</h2>
<p>コントローラーでは7つのアクションを用意する
この7つは原則としてデータベースの基本操作であるCRUDを実装したもの</p>
<p>api/app/controllers</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">User::Apis::V1::User</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PaymentHistoriesController</span> &lt; ApiController</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
      params = index_params
      offset = params[<span class="hljs-symbol">:offset</span>] <span class="hljs-params">||</span> <span class="hljs-number">0</span>
      authorize(<span class="hljs-literal">nil</span>, <span class="hljs-symbol">policy_class:</span> PaymentHistoryPolicy)

      common_query = policy_scope(<span class="hljs-literal">nil</span>, <span class="hljs-symbol">policy_scope_class:</span> PaymentHistoryPolicy::Scope).ransack(params[<span class="hljs-symbol">:q</span>]).result
      payment_histories = common_query.
                            order(<span class="hljs-symbol">captured_at:</span> <span class="hljs-symbol">:desc</span>).
                            limit(limit).
                            offset(offset)
      total_count = common_query.count

      render <span class="hljs-symbol">json:</span> payment_histories, <span class="hljs-symbol">root:</span> <span class="hljs-string">&quot;payment_histories&quot;</span>, <span class="hljs-symbol">meta:</span> total_count, <span class="hljs-symbol">meta_key:</span> <span class="hljs-string">&quot;total_count&quot;</span>,
             <span class="hljs-symbol">include:</span> SERIALIZER_INCLUDE, <span class="hljs-symbol">adapter:</span> <span class="hljs-symbol">:json</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="7つのアクション">7つのアクション</h2>
<p>7つのアクションを呼び出すには以下画像をみる。
HTTPメソッドの組み合わせを使う。
<img src="image/resource.png" alt></p>
<ul>
<li>index
リソースの一覧を表示する</li>
<li>new
リソースを追加する(テーブルに新しいレコードを作成する)ためのフォームを表示する</li>
<li>create
リソースを作成する(テーブルに新しいレコードを作成する)</li>
<li>show
リソースの属性を表示する(レコードの内容を表示する)</li>
<li>edit
リソースを更新する(既存のレコードのカラムを更新する)ためのフォームを表示する</li>
<li>update
リソースを更新する(既存のレコードのカラムを更新する)</li>
<li>destroy
リソースを削除する(テーブルからレコードを削除する)</li>
</ul>
<h2 id="7つのアクション以外の追加">7つのアクション以外の追加</h2>
<p>任意のアクションを追加するには resourcesメソッドにブロックを渡しブロックの中でもHTTPメソっドを表すメソッド アクション名を記述</p>
<h2 id="パスを返すメソッドが使えるresource">パスを返すメソッドが使える(resource)</h2>
<p>リソースを指定すると、コントローラーのアクションを表すパスを取得できる</p>
<p><img src="image/パスを返す.png" alt="パスを返す"></p>
<h2 id="特定のアクションを使わない場合">特定のアクションを使わない場合</h2>
<pre><code class="lang-ruby">resources <span class="hljs-symbol">:contents</span>, <span class="hljs-symbol">only:</span> [<span class="hljs-symbol">:index</span>, <span class="hljs-symbol">:show</span>, <span class="hljs-symbol">:create</span>, <span class="hljs-symbol">:update</span>]
</code></pre>
<p>onlyオプションに渡す
上記だと:index, :show, :create, :updateアクションのルーティングだけ設定する。</p>
<h2 id="rails起動ガイド">Rails起動ガイド</h2>
<p><a href="https://railsguides.jp/initialization.html" target="_blank">参考URL</a></p>
<ol>
<li>bin/railsが読み込まれる</li>
</ol>
<pre><code class="lang-ruby"><span class="hljs-meta">#!/usr/bin/env ruby</span>
APP_PATH = File.expand_path(<span class="hljs-string">&apos;../config/application&apos;</span>, __dir__)
require_relative <span class="hljs-string">&quot;../config/boot&quot;</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&quot;rails/commands&quot;</span> <span class="hljs-comment"># ここでAPP_PATH定数が使われる</span>
</code></pre>
<ol>
<li>/config/boot.rbが読み込まれる</li>
</ol>
<pre><code class="lang-ruby">
ENV[<span class="hljs-string">&apos;BUNDLE_GEMFILE&apos;</span>] <span class="hljs-params">||</span>= File.expand_path(<span class="hljs-string">&apos;../Gemfile&apos;</span>, __dir__)

<span class="hljs-keyword">require</span> <span class="hljs-string">&apos;bundler/setup&apos;</span> <span class="hljs-comment"># Gemfileが存在する場合は、bundler/setupをrequireする</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&apos;bootsnap/setup&apos;</span> <span class="hljs-comment"># Speed up boot time by caching expensive operations.</span>
</code></pre>
<ol>
<li>rails/commmands.rbを実行する</li>
</ol>
<p>2が終わると、次に<strong>コマンドの別名を拡張するrails/commandsをrequireする</strong>
拡張されたのは以下</p>
<pre><code class="lang-ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&quot;rails/command&quot;</span>

aliases = {
  <span class="hljs-string">&quot;g&quot;</span>  =&gt; <span class="hljs-string">&quot;generate&quot;</span>,
  <span class="hljs-string">&quot;d&quot;</span>  =&gt; <span class="hljs-string">&quot;destroy&quot;</span>,
  <span class="hljs-string">&quot;c&quot;</span>  =&gt; <span class="hljs-string">&quot;console&quot;</span>,
  <span class="hljs-string">&quot;s&quot;</span>  =&gt; <span class="hljs-string">&quot;server&quot;</span>,
  <span class="hljs-string">&quot;db&quot;</span> =&gt; <span class="hljs-string">&quot;dbconsole&quot;</span>,
  <span class="hljs-string">&quot;r&quot;</span>  =&gt; <span class="hljs-string">&quot;runner&quot;</span>,
  <span class="hljs-string">&quot;t&quot;</span>  =&gt; <span class="hljs-string">&quot;test&quot;</span>
}

command = ARGV.shift
command = aliases[command] <span class="hljs-params">||</span> command

Rails::Command.invoke command, ARGV
</code></pre>
<h2 id="initializers以下のrbファイル">/initializers以下のrbファイル</h2>
<p>アプリケーション起動時にロードされるもので、初期化処理で使われる
自分でrbファイルを追加して使うことも可能</p>
<h2 id="国際化-internationalization-略してi18nと呼ばれる">国際化 internationalization 略してi18nと呼ばれる</h2>
<hr>
<h2 id="単数リソース">単数リソース</h2>
<p>membersリソースの重要な特徴は、それが集合的な概念であるということ。
0人以上のメンバーからなる集まりを表現している。
<strong>しかしウェブアプリケーションを構成する要素の中には、多くとも1個しか存在しないものがある。</strong>
この種のリソースを単数リソースと呼ぶ</p>
<p>単数リソースの例として
セッション・自分のアカウント情報・自分のパスワード</p>
<h2 id="単数リソースのルーティング">単数リソースのルーティング</h2>
<p>単数リソースのルーティングを設定するには、config/routes.rbの中でresourcesメソッドではなく、単数系のresourceメソッドを使う。</p>
<pre><code class="lang-ruby">resource <span class="hljs-symbol">:account</span>
</code></pre>
<p>上記のように書いてもこのリソースを扱うコントローラーの名前は<code>AccountsController(複数形のs)に注意</code></p>
<p><img src="image/単数リソース.png" alt="単数リソース"></p>
<p><strong>単数リソースのため集合を扱うindexアクションはない</strong></p>
<h2 id="railsでのセッション">Railsでのセッション</h2>
<p>Railsはセッションデータを符号化してクッキーに保存するが、暗号化はしないためユーザがデータを解読できることに注意
ただし、セッションデータが改ざんされた場合はエラーになる仕組みになる。</p>
<h2 id="railsでの暗号化カラムを使う準備">Railsでの暗号化カラムを使う準備</h2>
<p>パスワードのハッシュ値(ダイジェスト)をホゾのするためのカラムは password_digestのカラム名を指定する必要がある。</p>
<ol>
<li>カラムにpassword_digestを追加する</li>
<li>クラスメソッドを追加
クラスメソッドhas_secure_passwordを用いると、パスワードの保存と認証のためのしくみをモデルクラスに追加することができる</li>
</ol>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> &lt; ApplicationRecord</span>
  has_secure_password

  validates <span class="hljs-symbol">:number</span>, <span class="hljs-symbol">presence:</span> <span class="hljs-literal">true</span>,
<span class="hljs-keyword">end</span>
</code></pre>
<p>この変更の結果、Memberクラスにpasswordおよびpassword_confirmationという2つの属性が定義される。</p>
<p>passwordカラム : パスワードそのもの
password_confirmationカラム : 確認用のパスワード</p>
<h2 id="rails-auth">Rails Auth</h2>
<p>deviseが有名
通常Railsのモデル作成は<code>rails g model User</code>などだが、deviseで新規登録やログインをしたいためdeviseのgenerateコマンドを使用する。</p>
<h2 id="devise">devise</h2>
<p><a href="https://qiita.com/tobita0000/items/866de191635e6d74e392" target="_blank">Rails deviseで使えるようになるヘルパーメソッド一覧</a></p>
<h2 id="アクション・コールバック">アクション・コールバック</h2>
<p>上は8章まで</p>
<hr>
<h2 id="モデル間の関連付け">モデル間の関連付け</h2>
<p>CarクラスとWheelsクラスがあるとする。
関連付けを行うにはCarクラスに以下を記載する。</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span></span>
  has_many <span class="hljs-symbol">:wheels</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>has_manyはモデル間の関連付けを指定するメソッド。これによりCarモデルとWheelモデルの間に<strong>1対多の関連付け</strong>が設定され、<strong>Carモデルにインスタンスメソッドwheelsが追加される。</strong></p>
<h2 id="関連付けを作るメソッド">関連付けを作るメソッド</h2>
<p>Railsでは、モデル間の関連付けをモデルクラスのメソッドhas_manyおよびbelongs_toで作る
<strong>has_manyによって使えるようになった参照元のメソッドが返すにはリレーションオブジェクト</strong></p>
<ul>
<li>1対多の関連付け
has_manyを使用
つまり、そのモデルクラスの<strong>テーブルの複数のレコードが別のテーブルのレコード1つを</strong>参照する結びつきを作る</li>
</ul>
<p>以下の図を見てほしい
<img src="image/has_many.png" alt="has_many">
参照先のモデルクラスでhas_many（~をたくさんもつ）を使えば、1対多を実現する。</p>
<pre><code class="lang-ruby"><span class="hljs-comment"># こっちが参照先のクラス</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> &lt; ApplicationRecord</span>
  <span class="hljs-symbol">has_many:</span> wheels <span class="hljs-comment"># has_manyに渡す名前は複数形にする。</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>上記により、以下が可能となる。
車輪を作成し、自動車に関連付けて保存するには次のように記述する。</p>
<pre><code class="lang-ruby"><span class="hljs-variable">@wheel</span> = Wheel.new
<span class="hljs-variable">@wheel</span>.car = <span class="hljs-variable">@car</span>
<span class="hljs-variable">@wheel</span>.save
</code></pre>
<p>自動車から車輪を関連付けるには &lt;&lt; で追加をする。&lt;&lt;を使うと、関連付けと車輪のレコードの保存が同時に行われます。</p>
<pre><code class="lang-ruby"><span class="hljs-variable">@car</span>.wheel &lt;&lt; <span class="hljs-variable">@wheel</span>
</code></pre>
<h2 id="関連付けルール">関連付けルール</h2>
<p>has_manyとbelongs_toでモデル間の関連付けを表すときには、名前について次のルールがある。
外部キーのカラム名は、car_idのように「参照先のテーブル名（モデル名）を単数形にしたもの」＋「_id」とする。
belongs_toに指定する名前は、テーブル名（モデル名）の単数形を使う。
has_manyに指定する名前は、テーブル名（モデル名）の複数形を使う。</p>
<p><strong>関連するキー(カラム名)を替えたい時</strong>
外部キーのカラム名がルールと異なるときは、foreign_keyオプションでカラム名が指定できる。</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> &lt; ApplicationRecord</span>
  has_many <span class="hljs-symbol">:engins</span>, <span class="hljs-symbol">foreign_key:</span> <span class="hljs-string">&quot;vehicle_id&quot;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Engine</span> &lt; ApplicationRecord</span>
  belongs_to <span class="hljs-symbol">:car</span>, <span class="hljs-symbol">foreign_key:</span> <span class="hljs-string">&quot;vehicle_id&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>関連付けで使われるメソッド名を替えたい時</strong>
class_nameオプションを使う。</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> &lt; ApplicationRecord</span>
  has_many <span class="hljs-symbol">:engins</span>, <span class="hljs-symbol">class_name:</span> <span class="hljs-string">&quot;Motor&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>参照元にルールを適用したい時</strong>
dependent</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> &lt; ApplicationRecord</span>
  has_many <span class="hljs-symbol">:engins</span>, <span class="hljs-symbol">dependent:</span> <span class="hljs-symbol">:destory</span> <span class="hljs-comment"># 参照先のレコードを削除した時に参照元のレコードも削除</span>
  has_many <span class="hljs-symbol">:engins</span>, <span class="hljs-symbol">dependent:</span> <span class="hljs-symbol">:nullify</span> <span class="hljs-comment"># 参照先のレコードを削除した時に参照元の外部キーがNULLになる</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="外部キー成約">外部キー成約</h2>
<p><img src="image/外部キー成約.png" alt="外部キー制約"></p>
<hr>
<h2 id="名前空間">名前空間</h2>
<p>名前空間を導入する理由
例
会員情報やニュース記事を誰でも編集できるものだった。編集権限を管理者だけにしたい</p>
<p>大体のサイトの利用者は操作権限の観点から次の3点に分けれる</p>
<ul>
<li>訪問者(サイトにログインしていないユーザ)</li>
<li>一般会員(サイトにログインしているadmin属性がfalseのユーザ)</li>
<li>管理者(サイトにログインしているadmin属性がtrueのユーザ)</li>
</ul>
<h2 id="名前空間を導入する戦術の種類">名前空間を導入する戦術の種類</h2>
<p>2通りある</p>
<p>1つめ
個々の操作ごとにユーザがその権限を持つかどうかを判定して、リンクの表示・非表示を切り替えたりリレーションオブジェクトに検索条件を加えたり、例外Forbiddenを発生させたりする</p>
<p>2つめ
ユーザの種類ごとに別々のコントローラーを用意する。
こちらの戦術の時に登場するのが名前空間という概念。</p>
<p>例</p>
<blockquote>
<p>会員の表示、追加、編集、削除を行う機能はMembersControllerクラスで実装されています。私たちは次節で別のコントローラクラスAdmin::MembersControllerを作成します。このクラスの名前は記号::で2つの部分に分かれます。Adminの部分はモジュール名です。このモジュールが付いているため、MembersControllerクラスとAdmin::MembersControllerクラスは別物として区別されます。この状況を「両者は別の名前空間にある」と表現します。</p>
</blockquote>
<h2 id="コントローラーに名前空間を導入する">コントローラーに名前空間を導入する</h2>
<p><strong>app/controllersディレクトリの下に名前空間ごとのサブディレクトリを作るのが定石</strong></p>
<ol>
<li>config/routes.rbに名前空間を定義</li>
</ol>
<pre><code class="lang-ruby">namespace <span class="hljs-symbol">:admin</span> <span class="hljs-keyword">do</span>
  root <span class="hljs-string">&quot;top#index&quot;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>引数に名前空間の名前をシンボルで指定し、ブロックの内部で名前空間に属するルーティングを記述する
上記の変更の結果として、URLパス/adminからAdmin::TopControllerのindexアクションにルーティングが設定されます。URLパスを生成するメソッドはadmin_root_path</p>
<h2 id="定数">定数</h2>
<p><a href="https://railsguides.jp/autoloading_and_reloading_constants.html" target="_blank">参考URL</a></p>
<blockquote>
<p>通常のRubyプログラムのクラスであれば、依存関係のあるプログラムを明示的に読み込む必要があります。たとえば、以下のコントローラではApplicationControllerクラスやPostクラスを用いており、通常、それらを呼び出すにはrequireする必要があります。</p>
</blockquote>
<pre><code class="lang-ruby"><span class="hljs-comment"># Railsではこのように書かないこと</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&quot;application_controller&quot;</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&quot;post&quot;</span>
<span class="hljs-comment"># Railsではこのように書かないこと</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostsController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    <span class="hljs-variable">@posts</span> = Post.all
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>Railsアプリケーションでは上のようなことはしません。アプリケーションのクラスやモジュールはどこででも利用できます。</p>
</blockquote>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostsController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    <span class="hljs-variable">@posts</span> = Post.all
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>通常のRailsアプリケーションでrequire呼び出しを行うのは、libディレクトリにあるものや、Ruby標準ライブラリ、Ruby gemなどを読み込むときだけです。そのため、これらのような自動読み込みパスに属さないものについてはすべて後述します。</p>
<p>Railsではこの機能を提供するため、いくつものZeitwerkローダーを開発者の代わりに管理しています。</p>
<h2 id="railsでのmemo化">Railsでのmemo化</h2>
<blockquote>
<p>Railsでマスター系のDBで何度も同じ内容を叩いたり、N+1問題対策でincludesをつけていても、結局
デカイSQLを発行してしまい効率的ではない場合もある。そこでメモリに保存して再利用する方法memoistを使う方法がある</p>
</blockquote>
<p><a href="https://qiita.com/kon_yu/items/c5a1a5e5a4ef878425dd" target="_blank">参考URL</a></p>
<h2 id="マイグレーションファイルとスキーマファイルの関係">マイグレーションファイルとスキーマファイルの関係</h2>
<p><a href="https://pick-up-tech.com/blog/%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%EF%BC%88migration-schema-rake%EF%BC%89" target="_blank">参考URL</a></p>
<h2 id="railsでのミドルウェア">Railsでのミドルウェア</h2>
<p><a href="https://fuqda.hatenablog.com/entry/2019/03/25/210850" target="_blank">参考URL</a></p>
<ul>
<li><p>Railsでのミドルウェアとは？
OSとアプリケーションの間に入って動作するソフトウェアのこと</p>
</li>
<li><p>現在のRailsアプリのミドルウェアの状態を知りたいときは
<code>$ bundle exec rake middleware</code></p>
</li>
<li><p>どこで読み込むのか</p>
<blockquote>
<p>config.middleware.useの引数に読み込みたいミドルウェアを指定します！
※ initializers配下のファイルであれば、ある程度どこに書いてもOKっぽい？けどカオスになるので、<code>/config/application.rb</code>に書くのが安全な気がします。</p>
</blockquote>
</li>
</ul>
<h2 id="rake">Rake</h2>
<p>rakeはcronみたいに使えるやつ
引数を渡すのに癖があるため<code>thor</code>を使う場合が多い。</p>
<h2 id="thro">thro</h2>
<p><a href="https://qiita.com/yatmsu/items/5ba7016db33c13d7a882" target="_blank">参考URL</a></p>
<hr>
<h2 id="railsでのlintツール">RailsでのLintツール</h2>
<p>RuboCopを使用する</p>
<hr>
<h2 id="ruby使用者に今すぐ伝えたいwebpackとwebpacker">ruby使用者に今すぐ伝えたいwebpackとwebpacker</h2>
<p>webpackerは、自前でwebpackをRailsに導入せずとも簡単にwebpackをRailsに取り込んで、Railsの仕様と融合させる（押し付ける？）事が出来るようにする為のGemです。
要は、webpackの事をあまり知らなくてもRailsライクにwebpackを利用できるようにしてくれるという事ですね。
また、JavaScriptファイルを呼び出すためのヘルパーメソッドが変わります。</p>
<pre><code class="lang-ruby"><span class="hljs-comment"># ヘルパーメソッドが変わる</span>
<span class="hljs-comment"># これまで</span>
&lt;%= javascript_include_tag <span class="hljs-string">&apos;notebook&apos;</span>, <span class="hljs-string">&apos;data-turbolinks-track&apos;</span>: <span class="hljs-string">&apos;reload&apos;</span> %&gt;
<span class="hljs-comment"># webpacker導入後</span>
&lt;%= javascript_pack_tag <span class="hljs-string">&apos;hoge&apos;</span> %&gt;
</code></pre>
<p><strong>つまりapi modeの時はいらないということ！！！！！！！！！！！！</strong></p>
<p><a href="https://qiita.com/jesus_isao/items/1f519b2c6d53f336cadd" target="_blank">参考URL</a></p>
<blockquote>
<p>WebpackerはRails 7以降では使う理由がなくなり、今後は開発が止まっていきます。新規PJでwebpackerは採用しない方が良いでしょう</p>
</blockquote>
<ul>
<li>webpackとwebpackerの関係
まず前提として、<strong>webpackと、webpackerは別物</strong></li>
</ul>
<blockquote>
<p>webpackはJSのnpmのパッケージです。JSのコミュニティの中で育ちました。npmというのは、Node.jsで使えるパッケージ管理ツールのことで、つまりはRubyでいうbundlerです。JSの開発者たちは、このnpmか、その代替のyarnをみんな使っています。
そしてwebpackerはRubyのgemです。Railsでもwebpackが楽に使えるように作られました。</p>
</blockquote>
<h2 id="rails-for-stripe">Rails for Stripe</h2>
<p><a href="https://qiita.com/tomokazu0112/items/89f69c47761ac782ce13" target="_blank">参考URL</a></p>
<h2 id="rails-formオブジェクト">Rails Formオブジェクト</h2>
<p><a href="https://qiita.com/ren0826jam/items/0effb716067a861e71f2" target="_blank">参考URL</a></p>
<p>モデルとフォームの責務を切り分けられることで、単体のモデルに依存しない場合やフォーム専用の特別な処理をモデルに書きたくない場合に用いたりする。</p>
<p>Railsのフォームは基本的にモデルに依存しており、たとえば<strong>1つのフォーム送信で複数のモデルの更新をしたい場合バリデーションの責務が曖昧なもの</strong>となり可読性も低下するため、責務を明確にするということで使う。</p>
<p>1つのフォームで複数モデルの操作をしたいときにForm Objectを使うと処理がすっきりかける。
またログインに関する処理など、特定のフォームでしか行わない処理もForm Objectに書くと良い。</p>
<h2 id="activerecord">ActiveRecord</h2>
<p>RDBテーブルに対応するモデルクラスへアプリケーションのデータとロジックを実装していく。</p>
<p>defaultでは以下のURL
<code>localhost:3000/admin</code>
しかしこれを認可で変更は可能
<code>localhost:3000/private/admin</code></p>
<h2 id="active-support">Active Support</h2>
<p>Active SupportはRailsに搭載されているコンポーネントの一種。
Object/Class/String/Numeric/Enumerableなど<strong>標準ライブラリを拡張</strong>することで、よりRubyの表現力を向上してくれるライブラリ。</p>
<h2 id="国際化対応i18n">国際化対応(i18n)</h2>
<p>i18nの理由 =&gt; internationalizationが「i」から「n」まで18文字あるから</p>
<p>Railsにはユーザーの国ごとに表示を簡易に切り替えられる国際化機能（i18n）が搭載されている。
日本のみで使用する場合でもこの機能を利用することでエラーメッセージの表示やラベルの表示を簡潔に記述することができるようになる（つまりはmessage定数管理）</p>
<h3 id="導入">導入</h3>
<pre><code class="lang-sh"><span class="hljs-comment"># add file</span>
touch config/initializers/locale.rb
</code></pre>
<h3 id="翻訳ファイルの管理は">翻訳ファイルの管理は</h3>
<p>翻訳ファイルはライブラリごと、モデルごとにディレクトリやファイルを分割して管理。
たとえばdeviseの翻訳ファイルであればconfig/locales/gemsディレクトリで日本語翻訳ファイルは<code>devise.ja.yml</code>として管  理できるようにする。``</p>
<p>ユーザーモデルの翻訳ファイルは<code>config/locales/models</code>ディレクトリで、日本語翻訳ファイルは<code>user.ja.yml</code>として管理できるようにします。
config/locales以下に作成したディレクトリ、ファイルが翻訳ファイルとして読み込まれるように設定をする。</p>
<h3 id="localeファイルが提供されている。">localeファイルが提供されている。</h3>
<p><a href="https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml" target="_blank">提供URL</a></p>
<h2 id="日本語対応">日本語対応</h2>
<p><a href="https://qiita.com/kusu_tweet/items/b534c808ac1ee0382f05" target="_blank">参考URL</a></p>
<h2 id="enum">enum</h2>
<p>enumを追加すると自動でメソッドが追加される。
<code>User.male</code>とすると男性一覧 (users.gender が 1 のレコード) のレコードを取得することが可能になる。
またUserモデルのインスタンスに<code>#male?</code>とすると男性の場合は<code>true</code>, 男性ではない場合は<code>false</code>が 返る。
<code>#male!</code>とすると<code>update</code>文が実行される
unanswered,female に対しても 同様のメソッドが自動で追加されます。</p>
<pre><code class="lang-rb"><span class="hljs-comment"># 0, 1, 2はdbに保存されてしまうので後から変更は難しい</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> &lt; ApplicationRecord</span>
  enum <span class="hljs-symbol">gender:</span> {
    <span class="hljs-symbol">unanswered:</span> <span class="hljs-number">0</span>,
    <span class="hljs-comment"># 男性</span>
    <span class="hljs-symbol">male:</span> <span class="hljs-number">1</span>,
    <span class="hljs-comment"># 女性</span>
    <span class="hljs-symbol">female:</span> <span class="hljs-number">2</span>
  }
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="ruby-on-rails-で-lib-ディレクトリの自作クラスを使用する">Ruby on Rails で lib ディレクトリの自作クラスを使用する</h2>
<p><a href="https://qiita.com/azusanakano/items/885fe3236977580b00c9" target="_blank">Ruby on Rails で lib ディレクトリの自作クラスを使用する</a></p>
<h2 id="rails-routing-constraints">rails routing constraints</h2>
<p>routingにさまざまな制限を設定することができる。</p>
<h2 id="beforeバリデーションをやめてセッターメソッドにする。">beforeバリデーションをやめてセッターメソッドにする。</h2>
<p><a href="https://techracho.bpsinc.jp/hachi8833/2022_03_09/59016" target="_blank">参考URL</a></p>
<h2 id="ridgepole">ridgepole</h2>
<p><a href="https://github.com/ridgepole/ridgepole" target="_blank">GitHub</a>
<a href="https://qiita.com/tetz-akaneya/items/d10570aeb028fc603b86" target="_blank">参考URL</a></p>
<p>Cookpadの菅原さんという方が作成したライブラリ
ridgepoleはRailsのデフォルトのMigrationシステムの代わりになり得るライブラリ。</p>
<h3 id="従来のmigrationシステム">従来のMigrationシステム</h3>
<blockquote>
<p>Railsのデフォルトのマイグレーションシステムを利用する場合、DBスキーマの変更を行う際にはその都度新たなMigrationファイルを作って、そこに現在の状態からの差分を記述するという使い方をすると思います。
この手法は広く使われていますが、差分を記述する度に新たにひとつファイルを作るのは大げさで面倒だと感じる人もいるでしょう。
今回紹介するridgepoleを利用すると、Migrationファイルをいちいち作らずとも単一のSchemafileというファイルを編集するだけでスキーマの変更が可能になります。</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../ruby.html" class="navigation navigation-prev " aria-label="Previous page: 2.6 Ruby">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../dsl/dsl.html" class="navigation navigation-next " aria-label="Next page: 2.7 DSL">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Rails","level":"2.2.6.1","depth":3,"next":{"title":"2.7 DSL","level":"2.2.7","depth":2,"path":"program/dsl/dsl.md","ref":"program/dsl/dsl.md","articles":[{"title":"XML","level":"2.2.7.1","depth":3,"path":"program/dsl/xml.md","ref":"program/dsl/xml.md","articles":[]},{"title":"TOML","level":"2.2.7.2","depth":3,"path":"program/dsl/toml.md","ref":"program/dsl/toml.md","articles":[]},{"title":"正規表現","level":"2.2.7.3","depth":3,"path":"program/dsl/正規表現.md","ref":"program/dsl/正規表現.md","articles":[]}]},"previous":{"title":"2.6 Ruby","level":"2.2.6","depth":2,"path":"program/ruby/ruby.md","ref":"program/ruby/ruby.md","articles":[{"title":"Rails","level":"2.2.6.1","depth":3,"path":"program/ruby/rails/rails.md","ref":"program/ruby/rails/rails.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"program/ruby/rails/rails.md","mtime":"2023-01-11T02:02:41.504Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2023-01-11T02:02:57.864Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

