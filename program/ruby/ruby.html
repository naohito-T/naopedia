
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>2.6 Ruby · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="rails/rails.html" />
    
    
    <link rel="prev" href="../python/python.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Summary</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../coding/coding.html">
            
                <a href="../../coding/coding.html">
            
                    
                    1. coding
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../coding/algorithm/algorithm.html">
            
                <a href="../../coding/algorithm/algorithm.html">
            
                    
                    1.1 algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../coding/atcoder/atcoder.html">
            
                <a href="../../coding/atcoder/atcoder.html">
            
                    
                    1.2 AtCoder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../coding/namerules/namerules.html">
            
                <a href="../../coding/namerules/namerules.html">
            
                    
                    1.3 命名規則
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../coding/designpattern/designpattern.html">
            
                <a href="../../coding/designpattern/designpattern.html">
            
                    
                    1.4 Design Pattern
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../../coding/principle/principle.html">
            
                <a href="../../coding/principle/principle.html">
            
                    
                    1.5 プリンシプル オブ プログラミング
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../../coding/tips/tips.html">
            
                <a href="../../coding/tips/tips.html">
            
                    
                    1.6 Tips(コーディングアイデア集)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../program.html">
            
                <a href="../program.html">
            
                    
                    2. program
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../c/c_c++.html">
            
                <a href="../c/c_c++.html">
            
                    
                    2.1 C/C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../go/go.html">
            
                <a href="../go/go.html">
            
                    
                    2.2 Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../javascript/javascript.html">
            
                <a href="../javascript/javascript.html">
            
                    
                    2.3 JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.3.1" data-path="../javascript/dom/dom.html">
            
                <a href="../javascript/dom/dom.html">
            
                    
                    DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.2" data-path="../javascript/canvas/canvas.html">
            
                <a href="../javascript/canvas/canvas.html">
            
                    
                    Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.3" data-path="../javascript/ts/typescript.md">
            
                <span>
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.4" data-path="../javascript/vue/vue.html">
            
                <a href="../javascript/vue/vue.html">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.5" data-path="../javascript/nuxt/nuxt.html">
            
                <a href="../javascript/nuxt/nuxt.html">
            
                    
                    Nuxt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.6" data-path="../javascript/react/react.html">
            
                <a href="../javascript/react/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.7" data-path="../javascript/node/node.html">
            
                <a href="../javascript/node/node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3.8" data-path="../javascript/json/package.md">
            
                <span>
            
                    
                    JSON
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../php/php.html">
            
                <a href="../php/php.html">
            
                    
                    2.4 PHP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.4.1" data-path="../php/Laravel/Laravel.html">
            
                <a href="../php/Laravel/Laravel.html">
            
                    
                    Laravel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../python/python.html">
            
                <a href="../python/python.html">
            
                    
                    2.5 Python
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.2.6" data-path="ruby.html">
            
                <a href="ruby.html">
            
                    
                    2.6 Ruby
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.6.1" data-path="rails/rails.html">
            
                <a href="rails/rails.html">
            
                    
                    Rails
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="../dsl/dsl.html">
            
                <a href="../dsl/dsl.html">
            
                    
                    2.7 DSL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.7.1" data-path="../dsl/xml.html">
            
                <a href="../dsl/xml.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.2" data-path="../dsl/toml.html">
            
                <a href="../dsl/toml.html">
            
                    
                    TOML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.3" data-path="../dsl/正規表現.html">
            
                <a href="../dsl/正規表現.html">
            
                    
                    正規表現
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.8" data-path="../全体に適用できる考え方.html">
            
                <a href="../全体に適用できる考え方.html">
            
                    
                    全体に適用できる考え方
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../design/design.html">
            
                <a href="../../design/design.html">
            
                    
                    3. design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../../design/html/html.html">
            
                <a href="../../design/html/html.html">
            
                    
                    3.1 html
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1.1" data-path="../../design/html/tag.html">
            
                <a href="../../design/html/tag.html">
            
                    
                    tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.1.2" data-path="../../design/html/archit1ecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../../design/css/css.html">
            
                <a href="../../design/css/css.html">
            
                    
                    3.2 css
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.2.1" data-path="../../design/css/property.md">
            
                <span>
            
                    
                    property
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2.2" data-path="../../design/css/design.md">
            
                <span>
            
                    
                    design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2.3" data-path="../../design/css/architecture.md">
            
                <span>
            
                    
                    architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../../design/pwa/pwa.html">
            
                <a href="../../design/pwa/pwa.html">
            
                    
                    3.3 pwa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="../../design/sass/sass.md">
            
                <span>
            
                    
                    3.4 sass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5" data-path="../../design/animation/animation.html">
            
                <a href="../../design/animation/animation.html">
            
                    
                    3.5 animation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.5.1" data-path="../../design/animation/flash.html">
            
                <a href="../../design/animation/flash.html">
            
                    
                    flash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5.2" data-path="../../design/animation/gsap.html">
            
                <a href="../../design/animation/gsap.html">
            
                    
                    gsap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5.3" data-path="../../design/animation/webgl.md">
            
                <span>
            
                    
                    WebGL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3.6" data-path="../../design/3D/3d.html">
            
                <a href="../../design/3D/3d.html">
            
                    
                    3.6 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.7" data-path="../../design/web/web.html">
            
                <a href="../../design/web/web.html">
            
                    
                    3.7 Web(Webでのdesign案)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../web/web.html">
            
                <a href="../../web/web.html">
            
                    
                    4. Web(web作成の時に使うもの)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../web/darkmode.html">
            
                <a href="../../web/darkmode.html">
            
                    
                    4.1 darkmode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../../web/loading.html">
            
                <a href="../../web/loading.html">
            
                    
                    4.2 Loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="../../web/login.html">
            
                <a href="../../web/login.html">
            
                    
                    4.3 login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="../../web/modal.html">
            
                <a href="../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="../../web/pagenation.html">
            
                <a href="../../web/pagenation.html">
            
                    
                    4.5 pagenation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.6" data-path="../../web/pc_sp_判断.html">
            
                <a href="../../web/pc_sp_判断.html">
            
                    
                    4.6 pcsp判断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.7" data-path="../../web/progressbar.md">
            
                <span>
            
                    
                    4.7 progressbar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.8" data-path="../../web/modal.html">
            
                <a href="../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.9" data-path="../../web/modal.html">
            
                <a href="../../web/modal.html">
            
                    
                    4.4 modal
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../db/db.html">
            
                <a href="../../db/db.html">
            
                    
                    5. DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../../db/sql/sql.html">
            
                <a href="../../db/sql/sql.html">
            
                    
                    5.1 SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1.1" data-path="../../db/sql/mysql/mysql.html">
            
                <a href="../../db/sql/mysql/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../../db/orm/orm.html">
            
                <a href="../../db/orm/orm.html">
            
                    
                    5.2 ORM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.2.1" data-path="../../db/orm/typeorm/typeorm.html">
            
                <a href="../../db/orm/typeorm/typeorm.html">
            
                    
                    TypeORM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../../db/redis/redis.html">
            
                <a href="../../db/redis/redis.html">
            
                    
                    5.3 Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../cloud/cloud.md">
            
                <span>
            
                    
                    6. cloud
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="../../cloud/gcp/firebase.md">
            
                <span>
            
                    
                    6.1 gcp
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../../middleware/README.md">
            
                <span>
            
                    
                    7. middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../../infrastructure/infrastructure.html">
            
                <a href="../../infrastructure/infrastructure.html">
            
                    
                    8. infrastructure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.8.1" data-path="../../infrastructure/docker/docker.html">
            
                <a href="../../infrastructure/docker/docker.html">
            
                    
                    8.1 docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.8.1.1" data-path="../../infrastructure/docker/docker-compose.html">
            
                <a href="../../infrastructure/docker/docker-compose.html">
            
                    
                    docker compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../../hardware/hardware.html">
            
                <a href="../../hardware/hardware.html">
            
                    
                    9. hardware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1" data-path="../../hardware/lowlayer/program.html">
            
                <a href="../../hardware/lowlayer/program.html">
            
                    
                    9.1 低レイヤー
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.2" data-path="../../hardware/os/os.html">
            
                <a href="../../hardware/os/os.html">
            
                    
                    9.2 OS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="../../security/security.html">
            
                <a href="../../security/security.html">
            
                    
                    10. セキュリティ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="../../test/test.html">
            
                <a href="../../test/test.html">
            
                    
                    11. テスト
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.11.1" data-path="../../test/webUI/Cypress.md">
            
                <span>
            
                    
                    11.1 WebUI テスト
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="../../performance/performance.html">
            
                <a href="../../performance/performance.html">
            
                    
                    12. パフォーマンス
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="../../plan/plan.html">
            
                <a href="../../plan/plan.html">
            
                    
                    11. 設計思想
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1" data-path="../../plan/front/front.html">
            
                <a href="../../plan/front/front.html">
            
                    
                    11.1 フロントエンド
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.1.1" data-path="../../plan/spa/ssr.md">
            
                <span>
            
                    
                    SPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.2" data-path="../../plan/ssr/ssr.md">
            
                <span>
            
                    
                    SSR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.3" data-path="../../plan/front/flux/flux.html">
            
                <a href="../../plan/front/flux/flux.html">
            
                    
                    Flux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.4" data-path="../../plan/front/bff/bff.html">
            
                <a href="../../plan/front/bff/bff.html">
            
                    
                    BFF(Backends For Frontends)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.1.5" data-path="../../plan/front/structure.html">
            
                <a href="../../plan/front/structure.html">
            
                    
                    システムがWeb Pageを表示する仕組み
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.2" data-path="../../plan/server/server.html">
            
                <a href="../../plan/server/server.html">
            
                    
                    11.2 Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.2.1" data-path="../../plan/server/mvc/mv*.html">
            
                <a href="../../plan/server/mvc/mv*.html">
            
                    
                    MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.2" data-path="../../plan/server/object/object.md">
            
                <span>
            
                    
                    Object指向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.3" data-path="../../plan/server/ddd/ddd.html">
            
                <a href="../../plan/server/ddd/ddd.html">
            
                    
                    DDD(Domain Driven Design)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13.2.4" data-path="../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                <a href="../../plan/server/cleanarchitecture/cleanarchitecture.html">
            
                    
                    Clean Architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.13.3" data-path="../../plan/infra/infra.html">
            
                <a href="../../plan/infra/infra.html">
            
                    
                    11.3 インフラ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.13.3.1" data-path="../../plan/infra/micro/micro.html">
            
                <a href="../../plan/infra/micro/micro.html">
            
                    
                    マイクロサービスアーキテクチャ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="../../requirement/requirement.html">
            
                <a href="../../requirement/requirement.html">
            
                    
                    12. My Product要件定義
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="../../tool/tool.md">
            
                <span>
            
                    
                    13. Tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.15.1" data-path="../../tool/git/git.md">
            
                <span>
            
                    
                    13. 1 Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.15.1.1" data-path="../../tool/git/作法.md">
            
                <span>
            
                    
                    作法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.1.2" data-path="../../tool/git/github_actions.md">
            
                <span>
            
                    
                    GitHub Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.1.3" data-path="../../tool/git/PULL_REQUEST_TEMPLATE.md.md">
            
                <span>
            
                    
                    PULL_REQUEST_TEMPLATE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.15.2" data-path="../../tool/codepen/codepen.md">
            
                <span>
            
                    
                    13. 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15.3" data-path="../../tool/vscode/vscode.md">
            
                <span>
            
                    
                    13. 3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="../../shell/shell.md">
            
                <span>
            
                    
                    14. shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.16.1" data-path="../../shell/env/env.md">
            
                <span>
            
                    
                    14.1 env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.16.2" data-path="../../shell/makefile/makefile.md">
            
                <span>
            
                    
                    14.2 Makefile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.16.3" data-path="../../shell/zsh/zsh.md">
            
                <span>
            
                    
                    14.1 zsh
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="../../word/word.md">
            
                <span>
            
                    
                    15. IT単語
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.17.1" data-path="../../word/jword.md">
            
                <span>
            
                    
                    日本語 単語
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.17.2" data-path="../../word/bword.md">
            
                <span>
            
                    
                    ビジネス 用語
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="../../mathematics/mathematics.md">
            
                <span>
            
                    
                    15. 数学
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >2.6 Ruby</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ruby">Ruby</h1>
<p><a href="https://www.ruby-lang.org/ja/documentation/ruby-from-other-languages/" target="_blank">他言語からRuby入門について</a>
<a href="https://magazine.rubyist.net/articles/0061/0061-ForeWord.html" target="_blank">Rubyist Magazine</a>
<a href="https://www.ruby-lang.org/ja/documentation/" target="_blank">ruby リファレンス</a>
<a href="https://hawksnowlog.blogspot.com/2020/09/output-ansi-color-code-with-ruby-paint.html" target="_blank">Ruby paint</a></p>
<h2 id="ruby-document">ruby document</h2>
<p><a href="https://techblg.app/articles/how-to-generate-document-by-yard-ruby/" target="_blank">参考URL</a></p>
<p>YARDで書くというのがある。やはり<code>@example</code>が重要。</p>
<h2 id="rubyを書く時意識すること">Rubyを書く時意識すること</h2>
<p>文字列も数値も配列もすべてクラスから生成されたインスタンス（その上の基底クラスが定義されているから文字列ならこのメソッドみたいに使える）
つまり、何が言いたいのかは
型を意識しながら書く。そこで調査する範囲が狭まる（stringか、ならstringのメソッド一覧を探すかみたいな）</p>
<h2 id="ruby-パッケージ">Ruby パッケージ</h2>
<p><img src="image/ruby.png" alt="Ruby"></p>
<h2 id="ruby-30xの依存関係">Ruby 3.0.Xの依存関係</h2>
<p><code>% sudo apt install -y libssl-dev libreadline-dev zlib1g-dev</code></p>
<p>※macOSだとopensslでまかなうらしい</p>
<h2 id="ruby-仕組み">Ruby 仕組み</h2>
<h3 id="変数宣言でのメモリ確保">変数宣言でのメモリ確保</h3>
<p>JavaやC#のような言語では、利用する前に変数の名前とそこに格納できるデータの種類（データ型）をあらかじめ宣言する必要がある、
JavaやC#のような言語では、宣言という行為を経て始めてデータを格納するための領域がメモリ上に確保される</p>
<p>Rubyでは？
Rubyでも変数の宣言は必要だが、スクリプト上で<strong>変数に初めて値を格納したタイミングで変数のための領域が自動的にメモリ上に確保される。</strong></p>
<h3 id="require-include-extend">require, include, extend</h3>
<p><a href="https://qiita.com/suzukiry/items/db936ff7312ba7d97315" target="_blank">違いについて</a></p>
<p>require
ファイルをメモリに読み込む
loadとの違いは、requireはすでにメモリに展開されていた場合はたとえ対象ファイルに変更があっても読み込みしないが、loadはする、そうです。
読み込み先が頻繁に更新されるときは、loadを使ってその変更をタイムリーにひろう、ために使うそうです。</p>
<p>include</p>
<h2 id="language-server-protocolはlsp">Language Server Protocolは(LSP)</h2>
<p><a href="https://zenn.dev/massu_devix/articles/e400308d55011d" target="_blank">Rubyプロジェクトにsolargraphとrobocopを入れる</a></p>
<h2 id="ruby他言語との違い">Ruby他言語との違い</h2>
<p>Perlの多くの部分を踏襲したRubyでしたが、1点決定的に異なる部分がある。
それはRubyが純粋なオブジェクト指向言語である、という点。</p>
<p>後からオブジェクト指向の仕組みを取り入れたPHPとは異なり、<strong>Rubyは最初からオブジェクト指向で記述できるよう開発された言語。実行はインタプリタ方式</strong></p>
<p>Ruby on Railsを使用した場合の最大のメリットは、<strong>開発スピード低予算でWebアプリを簡単に作ることができること。</strong></p>
<p><strong>Railsは「フレームワークに依存させることによって開発コストを最小にする」ことを極限まで追求したような化け物フレームワーク</strong></p>
<h2 id="rubyスタイルガイド">Rubyスタイルガイド</h2>
<p><a href="https://techracho.bpsinc.jp/hachi8833/2017_02_13/35364" target="_blank">スタイルガイド</a></p>
<ol>
<li><strong>シンボル名、メソッド名、変数名</strong>はスネークケースにする</li>
<li><strong>クラス名とモジュール名</strong>はキャメルケースにする（camelCase）</li>
<li><strong>ファイル名とディレクトリ名</strong>はスネークケースにする</li>
<li><strong>ソースファイル名</strong>にはクラス名やモジュール名のキャメルケースをスネークケースに変えたものを使う
5.</li>
</ol>
<h2 id="railsとクリーンアーキテクチャーの相性">Railsとクリーンアーキテクチャーの相性</h2>
<p><a href="https://qiita.com/shunjikonishi/items/e39ed8091e1dca817468" target="_blank">RailsとClean Architectureに関する考察</a></p>
<p>Clean Architectureは「使用するフレームワークにかかわらず通用する普遍的な設計手法」を目指したもの。
一方でRailsなどのアプリケーションフレームワークは「フレームワークに依存させることによって開発コストを最小にする」ことを目指したもののため、絶妙に合わないかも</p>
<h2 id="rubyのインデント">Rubyのインデント</h2>
<p>スペース2が基本</p>
<h2 id="rubyの文字コード">Rubyの文字コード</h2>
<p>UTF-8が標準</p>
<h2 id="rubyの改行コード">Rubyの改行コード</h2>
<p>LFで統一するのが慣例（macOSやLinux）</p>
<h2 id="ruby-コンパイラとインタプリタ">Ruby コンパイラとインタプリタ</h2>
<p>Rubyはインタプリタ型のプログラミング言語。
Rubyプログラムが記述されたソースコードを逐次解釈して実行する。
<strong>Ruby 1.9以降の言語実装(YARV)では処理を高速化するためにテキストコードをいったん独自のバイナリーコードに変換してから実行する。</strong>
現在のRubyはコンパイラとインタプリタの中間言語といえる。</p>
<h2 id="rubyによってできること">Rubyによってできること</h2>
<ol>
<li>Webアプリケーション</li>
<li>WebAPI</li>
<li>スクレイピング</li>
<li>スマホアプリ</li>
<li>機会学習</li>
</ol>
<h2 id="すべては値">すべては値</h2>
<p>式と文に違いはありません。 すべては値を持ちます。nilであっても例外ではありません。 Rubyでは次のように書くことが可能
<strong>※if文を変数に入れることができる</strong></p>
<pre><code class="lang-ruby">x = <span class="hljs-number">10</span>
y = <span class="hljs-number">11</span>
z = <span class="hljs-keyword">if</span> x &lt; y
      <span class="hljs-literal">true</span>
    <span class="hljs-keyword">else</span>
      <span class="hljs-literal">false</span>
    <span class="hljs-keyword">end</span>
z <span class="hljs-comment"># =&gt; true</span>
</code></pre>
<h2 id="rubyの内部実装シンボル">Rubyの内部実装(シンボル)</h2>
<p><a href="https://qiita.com/Kta-M/items/53a13ef60e14fcb41193" target="_blank">参考URL</a></p>
<p>Rubyの内部実装は、メソッド名や変数名、定数名、クラス名などの名前を整数で管理している
これは名前を直接文字列として処理するよりも速度面で有利だから。
そしてその整数をRubyのコード上で表現したものがシンボル
シンボルは、ソース上では文字列のように見え、内部では整数として扱われる、両者を仲立ちするような存在です。</p>
<p>名前を管理するという役割上、シンボルと文字列は一対一に対応します。 また、文字列と違い、immutable (変更不可）であり、同値ならば必ず同一です。</p>
<h2 id="疑問符や感嘆符のメソッド">疑問符(?)や感嘆符(!)のメソッド</h2>
<p>Rubyでは、メソッド名の最後にが
慣習的に、問い合わせ系のメソッドの最後には疑問符が使われます (例: レシーバが空の場合にtrueを返すArray#empty?)。 また、使用に危険を伴うメソッドの最後には感嘆符が使われます (例: selfあるいは引数の内容を書き換えるようなメソッド。exit!など)。 けれど、危険なメソッドすべてがこの慣習にしたがっているわけでも ないことに注意してください。 Array#replaceは、与えられた配列の内容で配列の内容を置き換えます。 この操作は、自身を変更しないようなメソッド名とは意に反する振る舞いをします。</p>
<h2 id="時間">時間</h2>
<pre><code class="lang-ruby">Time.current
<span class="hljs-comment"># Railsの独自のメソッドで、TimeWithZoneクラスを使用している。</span>
<span class="hljs-comment"># config.time_zone で設定したタイムゾーンを元に現在時刻を取得する。</span>

Time.now
<span class="hljs-comment"># Timeクラスを使用している。</span>
<span class="hljs-comment"># 環境変数TZの値。なければシステム(OS)のタイムゾーンを元に現在時刻を取得する。</span>
</code></pre>
<h2 id="ruby-定数">Ruby 定数</h2>
<p><a href="https://yulii.github.io/ruby-freeze-method-20150922.html" target="_blank">参考URL</a></p>
<p>Rubyにおける定数は不変の値というよりグローバル変数に近い（ミュータブルのため目立たないバグを埋め込む可能性がある。）
またRubyでは先頭が大文字になっている識別子のことを定数としていることからクラス名であるStringやArrayなども定数として扱っている。</p>
<p><a href="https://qiita.com/fursich/items/a1b742795cf10eebc73f" target="_blank">参考URL</a></p>
<ul>
<li>定数参照<h2 id="演算子">::演算子</h2>
<blockquote>
<p>あるクラスまたはモジュールで定義された定数を外部から参照する ためには::演算子を用います。またObjectクラスで 定義されている定数(トップレベルの定数と言う)を確実に参照する ためには左辺無しの::演算子が使えます。</p>
</blockquote>
</li>
</ul>
<h2 id="loadpathとは">$LOAD_PATHとは</h2>
<p>ファイルを読み込むRubyのメソッド<code>load</code>や<code>require</code>がファイルを参照する時に使われるディレクトリパス群
application.rbにもrequire &quot;rails&quot;などと言った記述がありますが、これだけでどうやってRailsのGemファイルを参照しているのか疑問だが、$LOAD_PATHにパスが設定されているため。</p>
<h2 id="ブロック構文">ブロック構文</h2>
<p><a href="https://qiita.com/k-penguin-sato/items/7f98335ef631ea5ce7ad" target="_blank">ブロック・Proc・lambdaを理解する</a>
Rubyに組み込まれたメソッドの中には、ブロック構文を使って処理や条件を指定可能なメソッドがある。</p>
<p>Rubyで使えるメソッドの中には引数の他に、<code>do ~ end</code>または<code>{}</code>で囲まれたブロック構文を利用するメソッドが多い。</p>
<p><strong>そして、ブロック構文は、doで始まり、endまでが範囲です。また、省略して{}で囲む書き方も可能。</strong></p>
<ul>
<li>ブロック構文の使い分け
厳密な違いは結合の強さが違い、<code>{}</code>が優先されるが、</li>
</ul>
<h2 id="rubyにおけるメソッドの呼び出し方">Rubyにおけるメソッドの呼び出し方</h2>
<p>Rubyでメソッドを呼び出す場合、次の2種類があり、<strong>どちらの方法が使われるかはメソッドによる</strong></p>
<ol>
<li>メソッドと引数で呼び出す</li>
</ol>
<p>メソッド名のみ、または、メソッドに続けて括弧内に引数を指定する方法です。引数は、値や変数の他、式も記述できます。</p>
<pre><code class="lang-ruby">hoge
hoge()
</code></pre>
<ol>
<li>ブロック付きメソッドで呼び出す</li>
</ol>
<p>do～endまたは{}で囲った制御構造を付けてメソッドを呼び出す方法です。eachメソッドなど、繰り返し処理の内容を記述する場合などで使われます。そして、do～end、または、{}内の制御構造がブロック構文です。</p>
<pre><code class="lang-ruby">hoge <span class="hljs-keyword">do</span> 制御構造 <span class="hljs-keyword">end</span>

hoge { 制御構造 }
</code></pre>
<h2 id="ruby-変数">Ruby 変数</h2>
<p><a href="https://techracho.bpsinc.jp/hachi8833/2017_02_13/35364" target="_blank">参考URL</a></p>
<p>Rubyでは<strong>変数の命名によって変数のスコープ</strong>が変わる（もちろん変数定義場所なども影響する）</p>
<ul>
<li><p>小文字または_で始まる識別子
ローカル変数（最初の代入はそのスコープに属するローカル変数の宣言になる）
またはメソッド呼び出し（宣言されていない識別子の参照は引数のないメソッド呼び出しとみなされる）</p>
</li>
<li><p>@で始まる変数
インスタンス変数（特定のオブジェクトに所属し、そのクラスまたはサブクラスのメソッドから参照できる）</p>
</li>
<li><p>@@で始まる変数
クラス変数（クラス定義の中で定義され、クラスの特異メソッド、インスタンスメソッドなどから参照・代入できる）</p>
</li>
<li><p>$で始まる変数
グローバル変数（宣言なしでコードのどこでも利用できる）</p>
</li>
<li><p>アルファベット大文字 ([A-Z]) で始まる識別子
定数（定義と初期化は代入で行われる、メソッド内では定義できない）</p>
</li>
</ul>
<pre><code class="lang-ruby"><span class="hljs-comment"># 変数</span>
price = <span class="hljs-number">100</span>
<span class="hljs-comment"># 定数（大文字で始める必要がある）</span>
TAX_RATE = <span class="hljs-number">1.1</span>
</code></pre>
<p><img src="image/変数種類.png" alt="変数種類"></p>
<h2 id>@_</h2>
<p><a href="https://qiita.com/CASIXx1/items/98d31734e26da8982f97" target="_blank">参考URL</a></p>
<p>@_hogeはただのインスタンス変数
@hogeではない理由はある命名規則に則っているから</p>
<h2 id="rubyでの文の終わり方">Rubyでの文の終わり方</h2>
<p>Rubyでは文の終わりを示すためのセミコロン（;）はない。
<strong>改行が文の終わりとみなす</strong></p>
<p>そのため以下はひとつの文</p>
<pre><code class="lang-ruby">a = <span class="hljs-literal">true</span>; b = <span class="hljs-literal">true</span>; c = <span class="hljs-literal">false</span>;
</code></pre>
<h2 id="rubyでのオブジェクトとは">Rubyでのオブジェクトとは</h2>
<p><strong>Rubyでは、すべてのデータはオブジェクト</strong>
<strong>配列やHash、数字や文字列もオブジェクト</strong>
<strong>オブジェクトは、必ず何らかのクラスのインスタンスなる</strong></p>
<p>オブジェクトとは、とても簡単に言うと、関連する変数（値）とメソッド（動作）をまとめて、そのまとまりに名前を付けたものです。関連する変数やメソッドを1つのオブジェクト内で宣言してまとめてしまうことで、管理しやすくするのがオブジェクト指向です。</p>
<p>ソースコードの見やすさや複数のソースコードファイルがあるときの管理のしやすさを考えると、関係のある変数やメソッドはまとめておく方が好ましく、それを実現できる仕組みとしてオブジェクトが用意されています。</p>
<p>Rubyでは、オブジェクトは、何かのクラスのインスタンスのことを言います。インスタンスは、クラスという設計図からnewメソッドで生成された、メモリ上の領域のことを指します。コンピューターのメモリ上に、オブジェクトの変数や元となったクラス名を保存し、Rubyはその情報を元に、処理を実行します。</p>
<h2 id="数値">数値</h2>
<p>かつてFixnumクラスとBignumクラスがあった
現在はIntegerとFloatの2つがある。</p>
<p>気をつけこと</p>
<ol>
<li>IntegerとFloatを計算したら自動的にFloatに変換される。</li>
<li>整数同士の割り算の結果は常に整数になる。</li>
</ol>
<h2 id="文字列">文字列</h2>
<p><a href="https://qiita.com/jnchito/items/e2687e2bf2f49411a1b4" target="_blank">破壊的な変更を防ぐ</a></p>
<p>将来リリースされるRuby 3ではパフォーマンスを向上させるために、文字列リテラルがデフォルトでイミュータブルになる（つまりfreezeされる）と言われています。frozen_string_literalというマジックコメントが導入されたのはRuby 3への移行を支援するためです。</p>
<p>気をつけること</p>
<ol>
<li>テンプレートリテラルは二重引用符(&quot;)で囲まれた文字列の中に#{}があると展開してくれる。</li>
<li><strong>数字と文字列の連結</strong> と <strong>&gt;で比較したりするとエラーとなる。</strong></li>
</ol>
<p><strong>もちろん参照渡し</strong>
そしてRubyの文字列はミュータブル、つまり<strong>破壊的な変更が可能なオブジェクト</strong></p>
<pre><code class="lang-ruby">a = <span class="hljs-string">&apos;hello&apos;</span>
<span class="hljs-comment"># 文字列を破壊的に変更する</span>
a.upcase!
<span class="hljs-comment"># 元の文字列が変更される</span>
a <span class="hljs-comment">#=&gt; &quot;HELLO&quot;</span>
</code></pre>
<p>破壊的な変更を防止したい場合</p>
<pre><code class="lang-ruby">a = <span class="hljs-string">&apos;hello&apos;</span>

<span class="hljs-comment"># 初期状態ではfreezeしていない</span>
a.frozen? <span class="hljs-comment">#=&gt; false</span>

<span class="hljs-comment"># 文字列をfreezeさせる</span>
a.freeze
a.frozen? <span class="hljs-comment">#=&gt; true</span>

<span class="hljs-comment"># freezeされると破壊的な変更ができない（エラーになる）</span>
a.upcase! <span class="hljs-comment">#=&gt;RuntimeError: can&apos;t modify frozen St</span>
</code></pre>
<h2 id="配列">配列</h2>
<p>要素の番号は0から始まる。
現在の要素数より、大きな番号を指定して要素を取り出すと、何もないことを表すnilが返される</p>
<p>気をつけること</p>
<ol>
<li>要素数の数より大きな数を指定して要素を入れると可変してくれる。</li>
</ol>
<pre><code class="lang-ruby"><span class="hljs-meta">irb(main):011:0&gt;</span> ani = [<span class="hljs-string">&apos;a&apos;</span>,<span class="hljs-string">&apos;b&apos;</span>,<span class="hljs-string">&apos;c&apos;</span>]
<span class="hljs-meta">irb(main):012:0&gt;</span> ani[<span class="hljs-number">8</span>] = <span class="hljs-string">&apos;d&apos;</span>
<span class="hljs-meta">irb(main):013:0&gt;</span> puts ani
a
b
c





d
=&gt; nil
</code></pre>
<ol>
<li>配列に要素として、様々な雑多なオブジェクトを入れることができる(文字列・数字・オブジェクトをごちゃまぜ可能)</li>
<li>%w()の中にスペースで区切って文字列を並べると配列を簡潔に記述できる。文字列の中で式展開などを使いたい場合は%W()を使う</li>
</ol>
<h2 id="デバッグで使うメソッド">デバッグで使うメソッド</h2>
<p>inspect
オブジェクトの内容を読みやすい形にした文字列を返す。</p>
<p>p
putsと同じ結果を返す</p>
<h2 id="式">式</h2>
<p><strong>式は何らかの値を返す</strong>
Rubyでは式と文の区別はあまりない(if文の結果を変数に入れられるため)</p>
<h2 id="演算子">演算子</h2>
<p>気をつけること</p>
<pre><code class="lang-ruby">=~ <span class="hljs-comment"># 文字列と正規表現が一致するかを判定するRubyの演算子</span>
</code></pre>
<h2 id="演算子">||演算子</h2>
<p><a href="https://qiita.com/ngron/items/4d3ca9827d1969fccd60" target="_blank">参考URL</a></p>
<pre><code class="lang-ruby"><span class="hljs-comment"># 代入</span>
hoge = <span class="hljs-literal">nil</span> <span class="hljs-params">||</span> <span class="hljs-literal">false</span> <span class="hljs-params">||</span> <span class="hljs-number">1</span> <span class="hljs-params">||</span> <span class="hljs-number">2</span>
<span class="hljs-comment">#hoge = (偽) || (偽) || (真hoge)</span>
p hoge
=&gt; <span class="hljs-number">1</span>
</code></pre>
<h2 id="代入演算子としての演算子">代入演算子としての||演算子</h2>
<p>左辺が存在しない（偽）の場合、右辺の値が代入されるイメージです</p>
<pre><code class="lang-ruby">hoge <span class="hljs-params">||</span>= <span class="hljs-number">1</span>
p hoge
=&gt; <span class="hljs-number">1</span>
</code></pre>
<h2 id="ぼっち演算子">&amp;.(ぼっち演算子)</h2>
<p><a href="https://qiita.com/onikan/items/e3a12e23e10ca301a9fc" target="_blank">参考URL</a></p>
<p>Rubyでは通常、レシーバーに対してメソッドが実行された時、レシーバー(オブジェクト)がnilだった場合にエラーを返す</p>
<p>しかしプログラムによってはエラーを返したくない時がある、そんな時に使うのが&amp;.
&amp;.はオブジェクトがnilだった場合にエラーではなく、nilを返してくれる</p>
<h2 id="ぼっち演算子-メリット">&amp;.(ぼっち演算子) メリット</h2>
<p>返り値が「〇〇かnil」を返すみたいなメソッドがRubyにはあります。それを受け取ったレシーバーに、レシーバーに「nilが想定されていないメソッド」を使ってしまうと、エラーが出力されてしまいます。</p>
<p>そんな時に「&amp;.」を使うことで、そのメソッドはエラーではなく、nilを返してくれるようになります。</p>
<pre><code class="lang-ruby"><span class="hljs-comment"># オブジェクト&amp;.メソッド</span>
<span class="hljs-variable">@nickname</span> = current_user.nickname
<span class="hljs-variable">@nickname</span> = current_user&amp;.nickname
<span class="hljs-comment"># 前者では、ログインしていない場合、エラーが出てしまいます。currrent_userがnilだからです。</span>
<span class="hljs-comment"># 後者では、ぼっち演算子を使っているのでエラーははかれません。</span>
</code></pre>
<h2 id="条件式">条件式</h2>
<p>気をつけること
条件式の結果は c = (a == b)のように取り出すことができる。trueかfalseを返す</p>
<p>a == bのようにある条件が成立しているかどうかを調べる式を<strong>条件式という</strong></p>
<ul>
<li>論理演算子
<img src="image/論理演算子.png" alt="論理"></li>
</ul>
<h2 id="falsyな値">falsyな値</h2>
<p>気をつけること</p>
<p><strong>0と空文字は真になる</strong> → JSではfalseになっていた</p>
<p>Rubyでは条件式がfalseになるのは
<strong>falseかnilの時だけ</strong></p>
<h2 id="if文">if文</h2>
<p>気をつけること</p>
<ol>
<li>falsyな値に気をつける</li>
</ol>
<p>if文を1行で終わらしたい場合
<code>if num % 2 == 0 then puts &quot;偶数です&quot; end</code>
※thenが必要</p>
<ol>
<li>後置のifを頻繁に使う</li>
</ol>
<p>trueだったらputsをする。
<code>puts &quot;偶数&quot; if num % 2 == 0</code></p>
<h2 id="unless">unless</h2>
<p><strong>条件式が正しくないときに</strong>プログラムを実行する</p>
<pre><code class="lang-ruby"><span class="hljs-keyword">unless</span> num % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>
  puts <span class="hljs-string">&quot;偶数ではない&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>ifと同様に後置のunlessも使える</strong></p>
<h2 id="メソッド">メソッド</h2>
<p><strong>メソッド名の最後には?か!をつけることができる</strong></p>
<ul>
<li>?と!がつくメソッド
? : ?がついたメソッドはtrueまたはfalseを返すことができる。
! : !がついたメソッドはそのオブジェクトの中身を変更することを表す(!がつかないメソッドはオブジェクトを変更せずに新しいオブジェクトを返す)
※メソッド名に?や!をつけるのはRubyの文法というより慣習。自分でメソッドを作る時も意識する。</li>
</ul>
<p>気をつけること</p>
<ol>
<li>戻り値を返したい場合は、最後に変数名を1行書けば済む(Rubyではメソッド内で最後に実行された式の値が戻り値になる)</li>
<li>引数がないmethodの場合は名前の記述だけで呼び出せる。</li>
<li>methodを呼び出す時に <code>triangle 11, 9</code>のようにかっこを省略することもできる。</li>
<li><code>&amp;:メソッド</code>の書き方でブロックを渡せる</li>
</ol>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">triangle</span><span class="hljs-params">(base, height)</span></span>
  result = base * height / <span class="hljs-number">2.0</span> <span class="hljs-comment"># resultが戻り値になる。</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="引数省略">引数省略</h3>
<p>かっこは省略できるが、かっこはつけるべき
以下の場合はつけなくてもよい</p>
<ul>
<li>引数がない関数の場合</li>
<li>カッコをつけないスタイルが慣例になっているもの（putsのような）</li>
</ul>
<h2 id="ローカルスコープ">ローカルスコープ</h2>
<p>ローカルスコープとなるところ</p>
<ol>
<li>method内</li>
<li>ブロック内</li>
</ol>
<p>気をつけること
<strong>if文やunless式の中のローカルスコープはスコープがない。</strong></p>
<h2 id="ブロック">ブロック</h2>
<p>気をつけること</p>
<ol>
<li>ブロックはdoとendの代わりに {}で囲むことができる
<code>10.times { |i| print i, &quot;,&quot;}</code></li>
<li>メソッドに引数とブロクを両方渡すことができる<pre><code class="lang-ruby"><span class="hljs-number">2</span>.upto(<span class="hljs-number">6</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|i|</span>
print i, <span class="hljs-string">&quot;, &quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
</li>
</ol>
<p>Rubyでの面白い特徴のひとつ。
Rubyではmethodを呼び出す時にブロックと呼ばれるコードのかたまりを渡すことができる。
<strong>※ブロックは繰り返しの処理によく使われる</strong></p>
<p>簡潔にいうと
ブロックとは<strong>doからendまでのプログラムのひとかたまりの部分</strong>
ブロックには | と |で囲んでブロックパラメータを指定できる。</p>
<h2 id="配列">配列</h2>
<p>要素を順番に処理するのはeachメソッドを使う</p>
<pre><code class="lang-ruby">arr = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-string">&quot;f&quot;</span>]
arr.each <span class="hljs-keyword">do</span> <span class="hljs-params">|item|</span>
  print item + <span class="hljs-string">&quot;, &quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="シンボル">シンボル</h2>
<p><strong>メソッドや変数の名前だけではなく、アプリケーションで特別な意味を持つ名前を表すのにもシンボルが使われる。</strong></p>
<p>Railsの開発でよく使われるのはハッシュのキーをシンボルにすること</p>
<p>rubyのシンボルは名前を表すオブジェクト。
シンボルを作るには<code>:cat</code>のように名前のまえに<code>:</code>を付ける</p>
<p>Railsの開発でよく使うのはハッシュのキーをシンボルにすること。</p>
<p><code>class: &quot;menu&quot; は :class =&gt; &quot;menu&quot;</code>と同義</p>
<h2 id="シンボルとはなにか">シンボルとはなにか</h2>
<p><strong>文字列を整数で表したもの</strong></p>
<p>シンボルを作成すると、Rubyの内部では<strong>文字列→一意</strong>の整数の変換が行われ、整数値として管理される。
シンボルは1つの文字列が1つのオブジェクトに1対1で対応する。
シンボルの内容は変更できない。upcase!のような!つきのメソッドを￥持たない</p>
<p>文字列の代わりにシンボルを使うと、プログラムの実行を少々効率化できる。
多くのRubyプログラマはソースコードを読みやすくするためにシンボルを使う。</p>
<hr>
<p>--- object ---</p>
<h2 id="オブジェクトのコピー">オブジェクトのコピー</h2>
<p>参照渡しを避けるには、<code>dupメソッド</code>を使用。すべての値は持っている。</p>
<h2 id="クラス">クラス</h2>
<h2 id="インタンスメソッド">インタンスメソッド</h2>
<p>クラスの中にdef ~ endでインスタンスメソッド</p>
<h2 id="レシーバー">レシーバー</h2>
<p>レシーバとは、メソッドの働きかけるオブジェクトのこと</p>
<p><code>&quot;aaa&quot;.length</code>
&quot;aaa&quot;.lengthと書いた時にメッセージを受け取る側のオブジェクトを レシーバ と呼んだりする。</p>
<h2 id="インスタンス変数">インスタンス変数</h2>
<p>@を付けた変数はクラスのインスタンスごとに作られるインスタンス変数</p>
<p>気をつけること</p>
<ol>
<li>インスタンス変数の初期値はnil</li>
</ol>
<h2 id="アクセス修飾子">アクセス修飾子</h2>
<p><img src="image/アクセス修飾子.png" alt="参考"></p>
<p><strong>2014年にリリースされた、言語仕様で独立した行にprivateとかくと次に独立したpublicまたはprotectedが出現するまでの間に定義されたメソッドはすべてプライベートメソッドとなる。</strong></p>
<h2 id="initialize-method-コンストラクタか？">initialize method (コンストラクタか？)</h2>
<p>newでインスタンスを作成する時に自動で実行されるメソッド</p>
<h2 id="レシーバとself">レシーバとself</h2>
<p><code>robo.move</code>のようにメソッドを呼び出す対象をレシーバ(受け取るもの)
Rubyでは、メソッドの呼び出しをオブジェクトに対してメッセージを送信すると考えるため
<strong>※レシーバを省略すると現在のオブジェクトを表すselfがレシーバと見なされる。</strong>
self.moveだと、selfを省略できる。</p>
<h2 id="メソッド呼び出し">メソッド呼び出し</h2>
<p><code>レシーバ.メソッド(引数) {ブロック}</code></p>
<p>レシーバがselfの場合は省略可能、<strong>ブロックは&amp;でも渡せる</strong>、等の細かいルールがあるが、基本はこの4つの要素から成り立っている。</p>
<h2 id="引数">引数</h2>
<p>渡し方は3種類ある</p>
<ol>
<li>普通に並べて渡す</li>
<li>キーワード引数で渡す</li>
<li>ハッシュで渡す</li>
</ol>
<p><img src="image/3種類の引数.png" alt="3種類"></p>
<p>2 キーワード引数で渡す</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_keyword</span><span class="hljs-params">(<span class="hljs-symbol">a:</span>, <span class="hljs-symbol">b:</span>)</span></span>
  a + b
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_keyword_with_default</span><span class="hljs-params">(<span class="hljs-symbol">a:</span>, <span class="hljs-symbol">b:</span> <span class="hljs-number">100</span>)</span></span>
  a + b
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># 正常系</span>
sum_keyword(<span class="hljs-symbol">a:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">b:</span> <span class="hljs-number">20</span>)
 <span class="hljs-comment"># 順番が逆でもOK</span>
sum_keyword(<span class="hljs-symbol">b:</span> <span class="hljs-number">20</span>, <span class="hljs-symbol">a:</span> <span class="hljs-number">10</span>)
</code></pre>
<p>3 ハッシュで渡す
ハッシュで渡す場合は、引数に過不足があっても例外は発生しません
デフォルト値を設定したい場合は、デフォルトのハッシュを作って、それとマージしてあげれば良いです。</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_hash</span><span class="hljs-params">(hash)</span></span>
  hash[<span class="hljs-symbol">:a</span>] + hash[<span class="hljs-symbol">:b</span>]
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># デフォルト引数</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_hash_with_default</span><span class="hljs-params">(hash)</span></span>
  default_hash = { <span class="hljs-symbol">b:</span> <span class="hljs-number">100</span> }
  hash = default_hash.merge(hash)

  hash[<span class="hljs-symbol">:a</span>] + hash[<span class="hljs-symbol">:b</span>]
<span class="hljs-keyword">end</span>
<span class="hljs-comment"># 正常系</span>
sum_hash({ <span class="hljs-symbol">a:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">b:</span> <span class="hljs-number">20</span> })
<span class="hljs-comment"># 順番は気にしなくてOK</span>
sum_hash({ <span class="hljs-symbol">b:</span> <span class="hljs-number">20</span>, <span class="hljs-symbol">a:</span> <span class="hljs-number">10</span> })
<span class="hljs-comment"># 余分な値が入ってもエラーにならない</span>
sum_hash({ <span class="hljs-symbol">a:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">b:</span> <span class="hljs-number">20</span>, <span class="hljs-symbol">c:</span> <span class="hljs-number">30</span> })
<span class="hljs-comment"># 不足していても(渡したときは)エラーにならない</span>
sum_hash({ <span class="hljs-symbol">a:</span> <span class="hljs-number">10</span> })
</code></pre>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span><span class="hljs-params">(*args)</span></span>
  p args
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># 各呼び出しパターン</span>
f <span class="hljs-comment"># =&gt; []</span>
f() <span class="hljs-comment"># =&gt; []</span>
f(<span class="hljs-number">42</span>) <span class="hljs-comment"># =&gt; [42]</span>
f(<span class="hljs-number">42</span>, <span class="hljs-string">&quot;answer&quot;</span>) <span class="hljs-comment"># =&gt; [42, &quot;answer&quot;]</span>
f(<span class="hljs-number">42</span>, <span class="hljs-string">&quot;answer&quot;</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]) <span class="hljs-comment"># =&gt; [42, &quot;answer&quot;, [4, 8, 10]]</span>
f(<span class="hljs-number">42</span>, <span class="hljs-string">&quot;answer&quot;</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], {<span class="hljs-symbol">l:</span> <span class="hljs-number">6</span>, <span class="hljs-symbol">r:</span> <span class="hljs-number">9</span>, <span class="hljs-symbol">op:</span> <span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-symbol">base:</span> <span class="hljs-number">13</span>})
<span class="hljs-comment"># =&gt; [42, &quot;answer&quot;, [4, 8, 10], {:l=&gt;6, :r=&gt;9, :op=&gt;&quot;*&quot;, :base=&gt;13}]</span>
</code></pre>
<h2 id="オブジェクト内のメソッドにアクセスするには？">オブジェクト内のメソッドにアクセスするには？</h2>
<p>考えていること</p>
<pre><code class="lang-ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>{
  <span class="hljs-keyword">private</span> a: int = <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-title">construct</span>(<span class="hljs-params">a: int</span>)</span> {
    <span class="hljs-built_in">this</span>.a = a;
  }
}

<span class="hljs-keyword">const</span> a = <span class="hljs-keyword">new</span> A(<span class="hljs-number">1</span>);
</code></pre>
<p>上記じゃアクセスできない</p>
<ul>
<li>アクセサメソッド</li>
</ul>
<p><strong>なんと、Rubyではオブジェクト内のデータにアクセスするには、メソッドを書かなければいけない</strong>
<strong>アクセサメソッドでやり取りできるデータを属性と呼ぶ。</strong></p>
<ul>
<li>属性の実態
属性の実態は変数ではなく、<strong>インスタンス変数とメソッドの組み合わせである。</strong></li>
</ul>
<h2 id="アクセサメソッドの簡略">アクセサメソッドの簡略</h2>
<p>簡略な書き方がある。</p>
<pre><code class="lang-ruby">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Robot</span></span>
  <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:name</span> <span class="hljs-comment"># 読み出し用メソッドが</span>
  <span class="hljs-keyword">attr_writer</span> <span class="hljs-symbol">:name</span> <span class="hljs-comment"># 書き込み用メソッドが</span>
def

<span class="hljs-comment"># 読み書き両方のメソッドを作りたいとk</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Robot</span></span>
  <span class="hljs-keyword">attr_accessor</span> <span class="hljs-symbol">:name</span>
  <span class="hljs-keyword">attr_accessor</span> <span class="hljs-symbol">:name</span>, <span class="hljs-symbol">:name2</span> <span class="hljs-comment"># いくつも作りたい時</span>
def
</code></pre>
<h2 id="アクセサメソッドのクラス内と外側の呼び出し違い">アクセサメソッドのクラス内と外側の呼び出し違い</h2>
<p>アクセサメソッドはrobo.nameの様にクラス外から呼ぶ</p>
<p>クラス内ではレシーバーを省略しnameだけで呼べる</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change_name</span><span class="hljs-params">(new_name)</span></span>
  old_name = name <span class="hljs-comment"># method呼び出し</span>
  name = new_name <span class="hljs-comment"># 注意。nameはローカル変数になる</span>
  <span class="hljs-keyword">self</span>.name = new_name <span class="hljs-comment"># 正しい呼びだし</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="クラスメソッド">クラスメソッド</h2>
<p><a href="https://magazine.rubyist.net/articles/0046/0046-SingletonClassForBeginners.html" target="_blank">参考URL</a></p>
<p>定義のしかたが2つある。</p>
<p><code>def self.method_name</code>の特異メソッド形式
特異メソッド方式では、def self.class_methodのようにメソッド名の前にクラスメソッドを定義する対象のクラス名をつけて定義します。リファレンスマニュアルにあるように直接クラス名を書いてもいいのですが、定義するクラス自身の中に書く場合はこのようにself. と書くことが多いでしょう。</p>
<p><code>class &lt;&lt; self</code>の特異クラス形式
特異クラス方式では、<code>class &lt;&lt; self</code>と書いた行からendまでの間に<code>def class_method</code>のようにクラス名を書かずにインスタンスメソッドと同じようなメソッド定義を書いていく。
この間に書いたものはクラスメソッドとして定義される。</p>
<ul>
<li>定義</li>
</ul>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  <span class="hljs-comment"># クラスメソッドの定義</span>
  def <span class="hljs-keyword">self</span>.b
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="class--self">class &lt;&lt; self</h2>
<ul>
<li>クラスメソッドの書き方（別）
こちらの書き方が好きなプログラマーも多い</li>
</ul>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Robot</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> &lt;&lt; self <span class="hljs-comment"># この間にはいくつもクラスメソッドを置くことができる。</span></span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lodad</span><span class="hljs-params">(fname)</span></span>
      <span class="hljs-comment"># クラスメソッドのないよう</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 id="クラスメソッドとインスタンスメソッドの違い">クラスメソッドとインスタンスメソッドの違い</h2>
<p>クラスに属するメソッド＝クラスメソッドはクラス自身に関する情報の
変更や参照の役割をもっている</p>
<p>インスタンスに属するメソッドは、個別のインスタンスに関する情報の
変更や参照の役割りを持っている</p>
<h2 id="定数">定数</h2>
<ol>
<li>クラス内で先頭1文字が大文字だと定数となる</li>
<li>クラス外で定義すると、その定数はどこからでも参照できる。</li>
</ol>
<p>定数はメソッド内では定義ができない。</p>
<h2 id="継承とミックスイン">継承とミックスイン</h2>
<p>Rubyには既存のクラスを拡張する方法が色々ある。
Rubyではクラスの継承は単一継承</p>
<h2 id="モジュール普通に使う分にはutilとして使えるのでは？">モジュール(普通に使う分にはutilとして使えるのでは？)</h2>
<p>Rubyのモジュールやクラスは定数。
同じ名前空間で同じ名前の定数を定義はできない。（そのためmoduleとclassの名前同一は無理）</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span></span>
<span class="hljs-comment"># モジュールにメソッドをまとめておく</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>クラスにモジュールを取り込むことをミックスインと呼ぶ</p>
<ul>
<li>名前空間としてのモジュールとクラス（これ認可に使えるのでは？)
ミックスイン以外にモジュールは名前空間として使うことができる。</li>
</ul>
<p><code>モジュール名::クラス名</code>でクラスを参照できる</p>
<h2 id="kernelモジュール">Kernelモジュール</h2>
<p>Kernelモジュールはputsの様によく使われるメソッドを集めたモジュール
ObjectクラスはKernelモジュールをミックスインしており、<strong>すべてのクラスはObjectクラスのサブクラス</strong></p>
<h2 id="class自体">Class自体</h2>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Robot</span></span>
<span class="hljs-keyword">end</span>

robo1 = Robot.new
robo2 = Robot.new
</code></pre>
<p>クラスRobotは、Robotクラスを表すオブジェクトを指している。
Robotクラスを表すオブジェクトも何かのクラスのインスタンス。
→そのクラスはClassクラス。Classクラスはクラスに関する機能を備えたクラス。</p>
<p>RobotはClassクラスのインスタンスを参照する定数のため普通の変数のように別の変数で参照したり、メソッドの引数に渡すことができる</p>
<pre><code class="lang-ruby">kkass = Robot <span class="hljs-comment"># Classオブジェクトを指す</span>
r = kkass.new <span class="hljs-comment"># Robot.newと同じ</span>
r.kind_of?(Robot) <span class="hljs-comment"># クラスはメソッド引数にモナれる</span>
</code></pre>
<h2 id="モジュールとクラスの違い">モジュールとクラスの違い</h2>
<p>どちらもクラスインスタンス（またはモジュールインスタンス）を作れる
どちらもメソッドを定義できる
どちらもRubyのモジュールやクラスは定数。
同じ名前空間で同じ名前の定数を定義はできない。（そのためmoduleとclassの名前同一は無理）
モジュールはオブジェクトを作れない
クラスはオブジェクトを作れる</p>
<pre><code class="lang-sh">irb(main):001:0&gt; module Parent
irb(main):002:1&gt;   class Child
irb(main):003:2&gt;   end
irb(main):004:1&gt; end
=&gt; nil

<span class="hljs-comment"># どちらもクラスインスタンスを作れる</span>
irb(main):005:0&gt; Parent.class
=&gt; Module
irb(main):006:0&gt; Parent::Child.class
=&gt; Class

<span class="hljs-comment"># モジュールはオブジェクトを作れない</span>
irb(main):008:0&gt; Parent.new
Traceback (most recent call last):
        2: from /home/vagrant/.rbenv/versions/2.5.5/bin/irb:11:<span class="hljs-keyword">in</span> `&lt;main&gt;<span class="hljs-string">&apos;
        1: from (irb):8
NoMethodError (undefined method `new&apos;</span> <span class="hljs-keyword">for</span> Parent:Module)
<span class="hljs-comment"># クラスはオブジェクトを作れる</span>
irb(main):009:0&gt; Parent::Child.new
=&gt; <span class="hljs-comment">#&lt;Parent::Child:0x00005587aeab9c90&gt;</span>
</code></pre>
<h2 id="モジュールinclude">モジュールinclude</h2>
<p><a href="https://www.techscore.com/blog/2013/03/01/rails-include%E3%81%95%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AB%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A8%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%83%A1/" target="_blank">参考URL</a></p>
<h2 id="モジュールがincludeされた時にクラスメソッドとインスタンスメソッドを同時に追加する頻出パターン">モジュールがincludeされた時にクラスメソッドとインスタンスメソッドを同時に追加する頻出パターン</h2>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Hoge</span></span>
  def <span class="hljs-keyword">self</span>.included(base)
    base.extend(ClassMethods)
  <span class="hljs-keyword">end</span>

  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">ClassMethods</span></span>
    <span class="hljs-comment"># クラスメソッドとして使える</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello</span></span>
      puts <span class="hljs-string">&apos;Hello!&apos;</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># インスタンスメソッドとして使える</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bye</span></span>
    puts <span class="hljs-string">&apos;Bye!&apos;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>YourModule を include すると、bye メソッドはインスタンスメソッドとして使えるようになります。そして、ネストしている ClassMethods モジュールで定義されている hello はクラスメソッドとして使えるようになります。</p>
<h2 id="モジュールのincludとextend">モジュールのincludとextend</h2>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Logging</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span><span class="hljs-params">(message)</span></span>
    puts message
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># Logging モジュールを include すると、インスタンスメソッドとして log メソッドを使えるようになります。</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Momotaro</span></span>
  <span class="hljs-keyword">include</span> Logging
<span class="hljs-keyword">end</span>

momotaro = Momotaro.new
momotaro.log(<span class="hljs-string">&apos;桃から生まれた&apos;</span>)

<span class="hljs-comment"># Logging モジュールを extend すると、クラスメソッドとして log メソッドを使えるようになります。</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Kintaro</span></span>
  extend Logging
<span class="hljs-keyword">end</span>

Kintaro.log(<span class="hljs-string">&apos;マサカリを担いだ&apos;</span>)
</code></pre>
<hr>
<h2 id="rubyのpath捜査について">RubyのPATH捜査について</h2>
<ul>
<li><p>require
requireはロードパスを起点として相対パスでファイルを検索する
requireが取り込み対象として捜査するディレクトリは組み込み変数の<code>$LOAD_PATH</code>に格納される
<code>$ ruby -e &apos;puts $LOAD_PATH</code></p>
</li>
<li><p>require_relative
その呼び出しているファイルからの相対パス</p>
</li>
</ul>
<h2 id="railsの場合">Railsの場合</h2>
<p>Railsにはrequire関連で特殊な機能がある。</p>
<p>まず自分で定義した<strong>ModelやControllerなどのClassやRailsが自動的にrequire対象としてくれる。</strong></p>
<h2 id="gemを作る">Gemを作る</h2>
<p><a href="https://qiita.com/harashoo/items/1284fd5362c1a4f6c8a8" target="_blank">参考URL</a></p>
<h2 id="rubyだけのプロジェクト始めかた">Rubyだけのプロジェクト始めかた</h2>
<ul>
<li><p>Gemへ公開する必要もない場合
<code>$ bundle init</code>をする（Gemfileが作成される）</p>
</li>
<li><p>Gemへ公開する場合
<code>$ bundle gem [gem name]</code></p>
</li>
</ul>
<h2 id="bundle">bundle</h2>
<p><code>bundle init</code>
Gemfileを作る</p>
<p><code>bundle install</code>
bundle installはGemfile.lockがある場合、Gemfileではなく、Gemfile.lockを基に必要なGemをインストールします。</p>
<ul>
<li>option
<a href="https://kojinjigyou.org/17707/" target="_blank">参考URL</a>
<code>bundle install</code>では<code>--without</code>オプションを使用することで不要なgroupをインストール対象から外すことが可能。</li>
</ul>
<h2 id="bundler-version固定">bundler version固定</h2>
<pre><code class="lang-sh">bundler _バージョン_ コマンド
bundler _2.2.15_ -v
</code></pre>
<h3 id="bundle-install">bundle install</h3>
<p><code>bundle install</code>したgemは<code>/home/ubuntu/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/gems</code>に入る。</p>
<p>例
<code>~/.rbenv/versions/projectのrubyバージョン/lib/ruby/gems/projectのrubyバージョン（x.x.0）/gems</code>になります。</p>
<p>rbenvのversion内にライブラリが入ってしまうためlocalのがいいと思う可能性がある。</p>
<hr>
<h2 id="gemfile">Gemfile</h2>
<p><a href="https://zenn.dev/lunarxlark/articles/gem-gemfile-format" target="_blank">Gemfileの書き方</a>
<a href="https://web-y.dev/2021/11/13/ios-bundler-gemfile-lock/" target="_blank">bundle instsall すると Gemfile.lock に差分が出てしまう時の対処法</a></p>
<p>常に最新のversionを指すよりも固定した方が安全。
bundle installの際にbundleのversion差異が生まれる。</p>
<pre><code class="lang-Gemfile"># [メジャー.マイナー.パッチ]

source &apos;https://rubygems.org&apos;

# install時のlatest version
gem &apos;rake&apos;

# x.x.x以上のバージョンが必要
gem &apos;serverspec&apos; &gt;=x.x.x

# x.x.x以上、y.y.y以下のバージョンが必要
gem &apos;serverspec&apos; &gt;=x.x.x, &lt;y.y.y

# x.1からx.9はOK。メジャーバージョンが上がると不可
gem &apos;serverspec&apos; ~&gt; x.0

# version固定
gem &apos;rails&apos;, &apos;3,2,1&apos;

# always latest version
gem &apos;rails&apos;, :git =&gt; &apos;git://github.com/rails/rails.git&apos;

gem &apos;fuga&apos;, :require =&gt; false

# Railsアプリのデータを触るバッチスクリプトで、バッチスクリプトでしか使わないgemがあるとしましょう。そのときに、:require =&gt; falseをつけておくと、

# ・Railsアプリ本体ではそのgemは呼ばれない
# ・スクリプトの方では手動でrequireすればよい

# ということになります。

# グループ指定とは軸がちがいます。テストの時にしか使わないgemなどの場合はグループ指定で対応してください。

# テスト環境では必要だが本番環境で入らない、というようなgemを環境によってインストールしたりしなかったりするという制御はグループ指定でないとできません。
</code></pre>
<h2 id="gemがローカルインストールかグローバルインストールか確認する">Gemがローカルインストールかグローバルインストールか確認する</h2>
<pre><code class="lang-sh">$ gem list | grep mechanize              <span class="hljs-comment"># グローバルインストールされているgem一覧</span>
$ bundle <span class="hljs-built_in">exec</span> gem list | grep mechanize  <span class="hljs-comment"># ローカルインストールされているgem一覧</span>
mechanize (2.7.6)
</code></pre>
<p>bundle execを付けた方だけ、mechanize (2.7.6)が表示されているのでローカルでのみ
mechanizeのインストールが完了しています。</p>
<h2 id="require-false">require: false</h2>
<p>コマンドラインから実行する必要があるが<strong>コード内では必要のないGem</strong>の時に記載する。</p>
<p><a href="https://qiita.com/hryau6/items/c327d444fd364a8a1c9b" target="_blank">参考URL</a></p>
<hr>
<h2 id="rubocop">rubocop</h2>
<p>静的構文解析ツール</p>
<p><a href="https://yumishin.com/rubocop-2/" target="_blank">rubocop処理の流れ</a></p>
<p>rubocopはバージョンごとに新しいCop（Lintのツール）が追加されたりCopの名前が変わったりする。
そのためバージョンアップ後には、大抵は設定やソースコードを見直さなければならない。
だいたい2週間に1回は行う作業らしい</p>
<h3 id="出力の見方">出力の見方</h3>
<p>155 files inspected, 16 offenses detected
155ファイル中16個の指摘があると言う意味</p>
<h3 id="違反レベル5段階">違反レベル(5段階)</h3>
<p>Warning以上は直す方針</p>
<p>F Fatal危険度5
E Error危険度4
W Waring危険度3
C Convention危険度2
R Refactor危険度1</p>
<p>また以下のコードでW以上に絞って検出できる。</p>
<pre><code class="lang-sh">rubocop --fail-level W --display-only-fail-level-offenses
</code></pre>
<h3 id="自動修正">自動修正</h3>
<p><a href="https://koic.hatenablog.com/entry/change-rubocop-auto-correct-to-rubocop-autocorrect" target="_blank">参考URL</a></p>
<p><code>rubocop -a</code>で修正できる。</p>
<h3 id="rubocoptodoymlを作成する">.rubocop_todo.ymlを作成する</h3>
<p><code>.rubocop_todo.yml</code>があるとチェックがスキップされる。</p>
<p>以下コマンドを実行すると作成される。</p>
<pre><code class="lang-sh">bundle <span class="hljs-built_in">exec</span> rubocop --auto-gen-config
</code></pre>
<h2 id="rubocop-version-up作業">rubocop version up作業</h2>
<p><a href="https://qiita.com/tonluqclml/items/e41bceece33e000e0b53" target="_blank">参考URL</a></p>
<hr>
<h2 id="アノテーションコメント">アノテーションコメント</h2>
<p><a href="https://qiita.com/tbpgr/items/1c046a877c6be4d89876" target="_blank">参考URL</a></p>
<p>TODO
あとで追加すべき不足している機能を記す</p>
<p>FIXME
修正すべき壊れたコードを記す</p>
<p>OPTIMIZE
パフォーマンスに影響を与える最適化すべき箇所を記す</p>
<p>HACK
リファクタリングすべきコードの臭いのする箇所を記す</p>
<p>REVIEW
レビューすべき箇所を記す</p>
<h2 id="ruby-記号の意味">ruby 記号の意味</h2>
<p><a href="https://docs.ruby-lang.org/ja/latest/doc/symref.html" target="_blank">参考URL</a></p>
<h2 id="ヒアドキュメント">ヒアドキュメント</h2>
<p><a href="https://docs.ruby-lang.org/ja/latest/doc/spec=2fliteral.html" target="_blank">リフェレンス</a></p>
<h2 id="rubyにdidependency-injectionがない理由">RubyにDI(Dependency Injection)がない理由</h2>
<p><a href="https://qiita.com/iwsksky/items/9598f0b01a20846fe495" target="_blank">参考URL</a></p>
<p>Rubyで実現するにはReflectionを使う。</p>
<blockquote>
<p>Rubyが本来持つ言語機能で十分に疎結合・高凝集が達成できるので、DIコンテナを利用することは複雑さを増すだけになりかねない、ということらしい
RubyはJavaのような言語と比べて動的であり一度生成したインスタンスであっても変更が容易であり依存の変更も容易である。よって静的な言語において必要性があったDIコンテナのような仕組みを導入しても複雑性が増してしまうだけなのではないか、ということらしい。</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../python/python.html" class="navigation navigation-prev " aria-label="Previous page: 2.5 Python">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="rails/rails.html" class="navigation navigation-next " aria-label="Next page: Rails">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2.6 Ruby","level":"2.2.6","depth":2,"next":{"title":"Rails","level":"2.2.6.1","depth":3,"path":"program/ruby/rails/rails.md","ref":"program/ruby/rails/rails.md","articles":[]},"previous":{"title":"2.5 Python","level":"2.2.5","depth":2,"path":"program/python/python.md","ref":"program/python/python.md","articles":[]},"articles":[{"title":"Rails","level":"2.2.6.1","depth":3,"path":"program/ruby/rails/rails.md","ref":"program/ruby/rails/rails.md","articles":[]}],"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"program/ruby/ruby.md","mtime":"2023-01-12T00:39:30.230Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2023-01-12T00:39:41.486Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

