# REST API

REST APIについて

## 有名REST API

[REST API設計者のための有名APIのURL例](https://zenn.dev/yu1ro/articles/4c73274383b676)

## 概要

>RESTはRepresentational State Transferという用語の略で、2000年にロイ・フィールディング（Roy Fielding）の博士論文で初めて紹介されました。ロイ・フィールディングは、HTTPの主な著者の一人で、Web（HTTP）の設計の優秀さに比べて適切に使用されていない様子を残念に思い、Webの利点を最大限に活用できるアーキテクチャとしてRESTを発表したそうです。

## 構成

REST APIは次のように構成されている。

- 資源（RESOURCE）URI
- 行為（Verb）HTTPメソッド
- 表現（Representations）

## 設計ガイド

REST API設計時、もっとも重要な項目は、次の2つに要約できる。

1. URIは情報の資源を表現しなければならない。
2. 資源の行為は、HTTPメソッド（GET、POST、PUT、DELETE）で表現する。

## REST APIでよく使用される単語について

コレクションが、そのURLの対する全体`/users`  
リソースがそのURLの詳細`users/:id`

コレクション
RESTfulなルーティングにおいてリソースのコレクションに対してルーティングを定義するために使われます。  
コレクションに対するルーティングは、モデル全体に適用されるアクションに対して定義することができる。  
>例 :indexアクションはコレクションに適用されるアクションであり、:showアクションはリソースに適用されるアクションです。:collectionオプションを使用すると、コントローラーで定義されたアクションに対して、URLに:idを含めないでアクセスすることができます。

## リソース特定方法

URLのパスパラメーターとリクエストボディを同時に送信することは現実的。  
実際、RESTful APIの設計においては、パスパラメーターを使ってリソースを指定し、リクエストボディにデータを含めて操作することが一般的。  
たとえば、フォローするAPIであれば、`/user/:userId/follow` というURLを使って、指定したユーザーをフォローすることができる。リクエストボディには何も含めない場合もあります。

## パラメーター種類

- クエリパラメーター
- パスパラメーター

### パスパラメーター

`/user/:userId`という形式のURLは、パスパラメーター

### クエリパラメーター

クエリパラメーターは `?` を使ってURLに付与するものです。

## メソッド設計方法

### PUT

PUTメソッドでは、リクエストボディにデータを含めて送信することが一般的です。PUTメソッドを使用する場合は、更新内容はリクエストボディに含めることができます。

## レスポンス

POST や PUT, DELETE

1. 更新したデータを返す。
更新したデータを`return`するという方法。こんな風にデータが直りましたと示す。
2. HTTP STATUSで`201`や`204`を返してあげる方法。
`201`は情報が作成された意味
`204`は通信は成功してるけど戻り値がないという意味

## DELETEのレスポンス

結局データはないので`204`を返す。
