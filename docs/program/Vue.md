# Vue

## ユビキタス ubiquitous

プロパティ → props のこと
this → Vueインスタンス
context → Vueインスタンス生成前のインスタンス,Storeインスタンス

## コンポーネント

[参考 URL](https://jp.vuejs.org/v2/guide/components-props.html#%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AE%E5%9E%8B)

コンポーネントの基本中の基本を忘れないように
以下が一番基本のコンポーネント生成。いくら最新の vue, nuxt でのコンポーネント登録でもこれをやっていることに変わりはない。

> コンポーネントは名前付きの再利用可能な Vue インスタンスです。コンポーネントは再利用可能な Vue インスタンスのため data, computed, watch, methods, ライフサイクルなどの new Vue と同じオプションを受け入れる。

```js
// button-counter と呼ばれる新しいコンポーネントを定義します
Vue.component("button-counter", {
  data: function () {
    return {
      count: 0,
    };
  },
  template:
    '<button v-on:click="count++">You clicked me {{ count }} times.</button>',
});
```

注意点
カスタムコンポーネントにした場合には data オプションは関数でなければいけない。

>  理由としては各インスタンスが返されるデータオブジェクトの独立したコピーを保持できるためです。

## Vue 単方向のデータフローの仕組み

> 全てのプロパティは子プロパティと親プロパティの間に単方向のバインディングを形成します。親のプロパティが更新されると子へと流れ落ちていきますが、逆向きにデータが流れることはありません。これによって子コンポーネントが誤って親の状態を変更すること(アプリのデータフローを理解しづらくすることがある)を防ぎます。

## Vue の props

原則として親の props から渡された、子 props は子自体で変更してはいけない。

> また、親コンポーネントが更新されるたびに、子コンポーネント内の全てのプロパティが最新の値へと更新されます。これは、子コンポーネント内でプロパティの値を変化させては いけない ことを意味しています。それを行った場合、 Vue は コンソールにて警告します。

## Vue 子 props の値を変更したい場合

> 1. プロパティを初期値として受け渡し、子コンポーネントにてローカルのデータとして後で利用したいと考える場合。 この場合、プロパティの値をローカルの data の初期値として定義することを推奨します:

```js
props: ['initialCounter'],
data: function () {
  return {
    counter: this.initialCounter
  }
}
```

> 2. プロパティを未加工の値として渡す場合。 この場合、プロパティの値を使用した算出プロパティを別途定義することを推奨します:

```js
props: ['size'],
computed: {
  normalizedSize: function () {
    return this.size.trim().toLowerCase()
  }
}
```

## Vue ハイドレーションとは

[参考 URL](https://zenn.dev/00_/articles/c5130802d384b8238e4c)

> ハイドレーションは、Vue がサーバー側でレンダリングされたマークアップを変換し、それをリアクティブにして、Vue からの動的な変更を反映できるようにするプロセス。

Vue が期待しているマークアップと、実際にレンダリングされた HTML が異なるとハイドレーションエラーとなる。

最終手段
client-only タグでラップしサーバー側でのレンダリングを避ける。

仕組み
開発環境では、
クライアントとサーバーでレンダリングされた DOM ツリーが一致していなくても、
既存の DOM を破棄して最初からレンダリングし直してくれています。
しかし本番環境では、
パファーマンスを最大化するためにこの機能は無効になっています。

また、ハイドレーションは最初にページがサーバーによってレンダリングされた時（初回リクエスト時）にのみ発生します。
## Vue の thisとContext

this 現Vueインスタンスを指定するとき
context まだVueインスタンスが作られる前にVueインスタンスを使いたいとき、Storeメソッドを使いたいとき


## Vueのリアクティブシステム
[参考URL](https://mya-ake.com/posts/vue-composition-api-columns/)
