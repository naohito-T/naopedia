# Programing 言語

言語について記載していくフォルダー

下にこのディレクトリの各ファイルへのリンクを入れても良いかも

---

## Programing 言語種類

コンパイルされて実行できる状態になったプログラムのことを実行形式と呼ぶ

### スクリプト言語(scripting language):軽量言語 または LL(Lightweight Language)

[参考URL](https://e-words.jp/w/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E8%A8%80%E8%AA%9E.html)

一般的に軽量言語（LL）ではメモリ管理のコストなどに注意してコードを構成しなければパフォーマンスが極端に悪くなることがある。
※Goは細部を気にせずコードを書いても、比較的パフォーマンスを引き出しやすい傾向がある。

### マクロ言語

**ソフトウェアの動作の自動化**などを行なうプログラムを記述する言語はマクロ言語と呼ばれることがある。

---

## フレームワーク ベンチマーク

[元のURL](https://gigazine.net/news/20200804-web-framework-benchmark/)
[Web Framework Benchmarks](https://www.techempower.com/benchmarks/#section=data-r19&hw=ph&test=fortune)

## 新規のプロジェクトに入る時の心構え

全体がわかっていないとコードを書くことが絶対わからない。
必ず新規プロジェクトに入った際には必ず仕様やドキュメントをしっかりみること。

## プログラムを書く前に考えること

書きながらロジックを構成していくのは上級者。
そうなるべきだが、まずは紙でも良いのでロジックを考える。
ロジックが完成してから書く癖を。
後は遅くなる原因としては仕事の使用
同じことを繰り返すな

## 変数/メソッド名 コメント

原則使わなくて済む方が良い。

- コメントなしで意味が伝わる命名をする
- 関数の引数は命名だけではなく、TypeScriptの情報量を増やす

## メソッド名

**メソッド名の場合は動詞や助動詞を用いて命名する**

[参考URL](https://qiita.com/KeithYokoma/items/2193cf79ba76563e3db6)

このパターンで適宜考えないといけない

- 真偽値を返すメソッド
- 必要に応じてしか実行されない処理をするメソッド
- 非同期処理に関連するメソッド
- コールバックメソッド
- コレクションの操作に関するメソッド
- 状態に関するメソッド
- オブジェクトのライフサイクルを扱うメソッド
- データに関するメソッド


## クラス名

[参考URL](https://qiita.com/KeithYokoma/items/ee21fec6a3ebb5d1e9a8)

**クラス名は何らかしらの責務を持つモノとして捉えるため名詞用いる**

## interface

**インターフェイスの名前に形容詞を用いることがある。形容詞を用いることでクラスの持つ性質を説明することができるようになる。**

## 記号の呼び名

汎用的に呼ばれているものを記載する

[]: ブラケット

## api ディレクトリ構造 example

```
|- @types ライブラリの型定義の拡張
|- application domain/serviceの実装部分
|- db Migrationファイル
|- domain
    |- entity ORMの定義が書かれている
    |- service できることの記載
|- handler ここがメインのHandler実装
    |- [旧]{tmp} ここはリファクタで消える
|- helper entityの拡張
|- interface
    |- endpoint
    |- params
        |- builder Entityなどからtypesに整形するための処理
        |- error エラーの定義が書かれている
        |- schema Validationに使っていたのちに消す予定
        |- types Request, Responseの値の型を定義している
    |- router ここがAPIの要件
|- job Job群
|- lib 各種ライブラリや、拡張
    |- aws
    |- express
    |- file
    |- random
    |- slack
    |- time
    |- twilio
    |- vivox
|- middleware ミドルウェア群が書かれている
|- [旧] models
|- platform - Auth系の処理がまとまっている
|- registration - entityごとでDBへのアクセスのまとまった処理
|- setting - 設定ファイルが入っている
|- [旧] utils - utility
```

## バージョン

[参考URL](https://docs.oracle.com/cd/E19253-01/819-0395/chp-vers-1/index.html)

x.y.z

x : メジャーな
x.y : マイナーリリース
x.y.z : マイクロリリース


## プロセスとスレッド

[参考URL](https://lab.mo-t.com/blog/andonlabo-process-and-thread)

---

## プロセス(docker.mdで図がある。)

**OSから見える処理の単位**

以下はプロセスの情報を列挙する。

- 1プロセス1CPUの関係。
- メモリ空間を共有していない
- 他のプロセスのメモリにはアクセスできない
- プロセス間の同期が難しい
- スレッドと比較して1プロセス毎の情報量が多い
- 情報量が多いので切り替えが遅い
- マルチスレッドプログラムと比較してメモリ効率が低い
- 仮想アドレスと物理アドレスの解決が高コストのため切り替えが遅い
- マルチスレッドプログラムと比較して大量のメモリが使用できる
- マルチプロセッサの場合、（一般的に）シングルプロセスマルチスレッドプログラムよりもマルチプロセスプログラムの方が高速

## スレッド

**プロセスの中で並列的に処理を行う**仕組み

以下はスレッドの情報を列挙する。

- メモリ空間を共有している
- 他のスレッドのメモリにアクセスできる
- スレッド間の同期が容易
- スレッドセーフな実装にする必要がある
- メモリを共有しているので、他のスレッドに予期せぬ影響を与えてしまうことがある
- プロセスと比較して、1スレッド毎に必要な情報量が少ない
- 情報量が少ないので切り替えが早い
- マルチプロセスプログラミングと比較してメモリ効率が高い
- マルチプロセスプログラミングと比較して大量のメモリ確保が行えない
- 非同期に実行できる処理がある場合は、（一般的に）シングルスレッドプログラムよりもマルチスレッドプログラムの方が高速


---

>実際のプログラムでは、プロセスやスレッドを都度生成する事は稀です。
>高コスト、メモリリーク、生成できない可能性がある等の問題があるからです。
>起動時に必要数を確保しプログラム終了時まで破棄しないスレッドプール等の仕組みが使われます。


## 式と文

プログラムを組み立てるのに必要な式と演算子

- 式
式とはリテラルや変数、演算子、メソッドなどを組み合わせたもの
**式は何らかの値を返す**

- 文
文（Statement）とは値を返さないもの（=変数に代入できないもの）

## ひとつの文章にまとめない方がいい

以下の書き方は良い習慣ではない。
というのも一般的な開発環境（デバッガー）ではコードの実行を中断し**ブレークポイントは行単位でしか設定できない**
そのため短い文であっても複数の文を1行にまとめないが鉄則

```ruby
name = '山田'; puts(name)
```

## リテラル

リテラルは数値や文字列などのデータを**コード中で表現**する方法

- リテラル表現
`108, 'Hoge', [1,2,3]`のようなリテラルをかくことは、すべて特定の型（クラス）に応じたインスタンスを生成することと同義。
この例だtとInteger, String, Arrayクラスのインスタンスが生成される。
リテラル表現はインスタンスを生成する手軽な手段だが、すべての型（クラス）で用意されているわけではない。
数値、文字列などよく利用するものについていちいち利用するたびにインスタンス化を意識させるのは面倒なためより直接的に表現できるリテラルが用意されているだけ。
一般的なクラスはnewというメソッドを利用してインスタンス化する。

## 第一級オブジェクト(ファーストクラスオブジェクト)

第1級オブジェクトというのは数値や文字列のような、変数に割り当てられたり、なんらかの計算処理ができたりといった、プログラミングの基本機能が使える対象のことを指す。

## 高階関数

関数を受け取る関数を高階関数と呼ぶ

## 関数とサブルーチンの違い

関数は値を返すのに対してサブルーチンは値を返さないという違い。
どちらも同じようなものであるものである（実際にほとんどの言語でサブルーチンと関数の区別は存在しない）

## サブルーチン

サブルーチンとは**メインの処理（ルーチン）**から呼び出される別の処理という意味合いで、多くの場合関数と同じ意味で使われる。

## メソッド

クラスの中に定義された関数のことをメソッドと呼ぶ。

## インスタンスメソッドとクラスメソッド

- お互いの理解

インスタンスメソッドは**インスタンスの情報を取得・操作するためのもの**
クラスメソッドは**クラスの情報を取得/操作するためのもの**

## コールバック関数

[参考URL](https://sbfl.net/blog/2019/02/08/javascript-callback-func/)

広義だと単なる「高階関数に渡すための関数」
自分で直接実行するのではなく、相手に実行してもらうのがコールバック関数

## CLIを作りたいのであれば

コマンドラインからの引数をparseする考えを持つ。

コマンドラインツール用に引数をパースするライブラリ
rubyのcommanderをインスパイアして作られている

>頻繁に発生するオペレーション作業を自動化するなど、ちょっとしたCLIをツールを自作したいケースはよくあると思います。Shellでサクッと終わらせてもよいのですが、Web APIを利用するようなケースなど、高級言語で開発した方が効率か良いですし、副産物としてマルチOSで動作させられるおまけがついてきます。どうせやるなら今っぽいCLIを作りたい。ということで、Vue.js、Reactを参考に、commanderモジュールを使ったNodejsでのCLI実装について紹介します。

## ミュータブルとイミュータブルの違い

ミュータブル
オブジェクトをそのままに中身だけを変更できることを意味する。

イミュータブル
一度作成したオブジェクトの中身を書き換えることはできない。

- ミュータブル
参照先の変わる更新と変わらない更新がある。

参照先の変わる更新
```rb
data = [1, 2, 3]
data = [4, 5, 6] # 新たな参照先が格納される

```

参照先の変わらない更新
```rb
data = [1, 2, 3]
data[2] = 6 # 参照先の差している配列のインデックスを更新する
p data # [1, 2, 6]
```

- イミュータブル
プログラミング言語によって変わると思うがプリミティブ型はイミュータブル

```rb
num1 = 5
num1 += 1 # 値の更新によって常に参照先が変わる。
```

## レシーバー(receiver)

メソッド呼び出しの文脈で「.」の前に位置するオブジェクトのことをレシーバーと呼ぶこともある。
オブジェクト指向ではメソッドを呼び出すとはオブジェクトに対して何らかの司令/メッセージを送信することと見なされる
つまりそのメッセージの受け取り手が（receiver）オブジェクトである。


