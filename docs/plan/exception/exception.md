# exception

例外設計についてまとめる
例外設計を行う時はまずは例外を業務エラーとシステムエラーに分類することから考えていく。

## 例外の分類
[参考URL](https://qiita.com/tomokiyao/items/3860c8e3cd3f21126b21)


大きく分けると2つ

### 業務エラー

主にユーザの誤入力・誤操作が原因

- 指定フォーマットの違い（メールアドレスなど）
- 一意チェック（ユーザの重複など）
- 必須項目の存在

### 業務エラー対処方法

先に説明したように、業務エラーとは主にユーザーの誤入力・誤操作が原因のエラーであり、その対処方法としてはユーザーに誤入力・誤操作を取り消してもらい、正常な入力・正常な操作を行ってもらう事が対処方法になります。
その為には、正常な入力・正常な操作を行ってもらえるような例外（エラー）を考えていく必要があります。
正常な入力・正常な操作を行ってもらうには、まず何が誤入力・誤操作だったのかをユーザーに指摘する事が考えられるでしょう。
たとえばメールのフォーマットが違う場合、『エラーが起きました。』のような抽象的なメッセージを表示するのではなく、『不正なメールのフォーマットです。』のような具象的なメッセージを画面を用いて表示させる事が適切です。


### システムエラー

システムエラーはユーザー側でどうにもできないエラーというメッセージ（いわゆる「500エラー画面」）を表示する。

- サーバが停止している
- データベースに接続できない
- プログラムのバグ

### システムエラー対処方法

システムエラーとは主にユーザー側で対処する事ができないエラーです。例えばプログラム内部のバグが原因でエラーが起きたとしましょう。その時はシステム開発者がプログラムを修正する事が対処方法になります。ユーザー側はバグを修正することは不可能な為、開発者にエラーが発生した詳しい状況を伝えてもらえるような画面を表示する必要があります。また、バグが原因のエラーが発生した後にプログラムを実行してしまうと以降のプログラムの実行結果が正しいことが保証できない為、安全に終了してもらう必要があります。
開発者側は、システムエラーが起きたときに素早く対処できるように、ログにエラー内容を出すようにしましょう。またErrbitなどのエラー監視サービスを導入し、Slackなどと連携しておくとエラー時に迅速な対処が行えるでしょう。

