# Web API

Web APIを設計する際に様々なものを作成するかと思うがそれを記載する。

---

## ユーザ認証の基本フロー

[参考URL](https://applis.io/posts/how-to-authenticate-user)

- 基本的なフロー

1. クライアントからサーバに認証情報をおくる
2. サーバー上で認証情報を検証する
3. 認証情報が正しければ、クライアントにアクセストークンを送る(+必要に応じてセッションに記録する)

- ユーザ認証を設計する上で決めるべきこと

| 順番  | 項目 | 選択肢 |
| --- | --- | --- |
| 1 |  認証方法をどうするか   |  パスワード認証 or OpenID Connect |
| 2 |  アクセストークンをどう管理するか   | JWT |
| 3 |  アクセストークンをどうStateに保持するか | Authorizationヘッダ, Cookieヘッダ |
| 4 |  アクセストークンをどう保持するか   | OS標準のストア?, メモリ, Cookie, localStorage |

- 1について

まず、ユーザー認証の方法には、大きく次の二つがある。

|     | 認証方法  | 概要 |
| --- | --- | --- |
| 1  | パスワード認証 | IDとパスワードをサーバに送る |
| 2  | OpenID Connect | 外部のプロバイダ上で認証しアクセストークンをサーバに送る |

2については
OpenID Connectは、OAuth認証と聞くとなじみがある。
たとえばGoogleやTwitterなどのアカウントによる認証。
ただ、『OAuth認証』という言葉には語弊がある。




---
