# table

DBのtableについて記載しておく。

## ユニーク制約

他行の値と重複してはダメな制約。

## データ型

以下、型を選ぶ時に気をつけていることを記載します。
bool値を入れるカラムには`tinyint(1)`を利用する
長くない可変文字列を入れる場合(大体1024文字より下くらいかな？)はvarcharを利用します
長い可変文字列を入れる場合はtext型を利用する、またtext型を使う場合はテーブルのROW_FORMATがDynamic(Barracuda)であることを確認する
MySQL5.6まではデフォルトのフォーマットはCompact(Antelope)でしたが、これは1レコードあたり8KBまでしかデータを入れることができません。
テキスト型を使うと8KB制限を突破してしまうこともあるため、テーブルのフォーマットがDynamic(Barracuda)であることを確認します。
整数値を入れる場合はint型かbigint型を使う
float型は使わない
精度のトラブルに巻き込まれたくないためfloatは使いません。多くの場合、doubleかdecimalで問題ありません。
金額情報など、精度を求められる小数値にはdecimalを使う
doubleも小数点以下の精度に悩まされることがあります。金額を扱う、精度が必要な計算は必ずDecimalを利用します。
日付を入れる場合はDATE型を使う
商品のお届け日など、日付を入れる場合は DatetimeやTimestamp型ではなくDATE型を使うようにします。DatetimeやTimestampはタイムゾーンの影響を受けるためです。
JSON型を使ったら負け