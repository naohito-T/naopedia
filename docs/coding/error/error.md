# error ハンドリング

[参考URL](https://qiita.com/luftfararen/items/2010bab47810de8bbeee)

## エラーとは

エラーとは
- ファイルハンドラーオープンの失敗
- メモリやリソース確保の失敗
- 不正なメモリアクセス
- 論理的計算の間違えなど

## エラー区分

正常系   : 目的の出力や副作用を得ることができる系
異常系   : 目的の出力や副作用を得ることができない系
准正常系  : 異常系であるが、仕様どおりに正常系への回復動作が実行される、あるいは、仕様どおりにプロセスが終了する系

## エラー伝達方法

1or2が一般的。
1. 例外をthrow
2. 関数の戻り値でエラー状態を返す

## どこでハンドリングするかの考え方

1. 論理エラー
プログラムの論理的矛盾により発生（要はund

2. 実行時エラー（ランタイム）

## 成功ステータスコードの返却(デファクトスタンダード)

利用する**HTTPメソッドによって**細かく分かれている

200: GETまたはPATCHリクエストに対し返す

201: Created」で「リクエストは成功し、新しいリソースが作られた」と言う意味を表す。一般的にPOSTでデータ追加した時に返す事が多い。

204:「No Content」で「コンテンツなし」と言う意味を表します。DELETEでデータ削除した時に返す事が多い様です。

## api server error設計

>dev環境の場合はrescueせずに例外をそのまま流し、Response bodyにstack traceなど例外情報を載せる
これがいいっぽい。Sentryに流している場合はそれにも流さないといけないな  