# network
[ネットワーク技術者](https://www.itbook.info/study/mag.html)  
[JPNIC（network講座）](https://www.nic.ad.jp/ja/basics/terms/cidr.html)  
[ipアドレスを確認できるサイト](https://www.ipvx.info/)

ネットワーク関連のPage

## AWSで作成するネットワーク依存関係

[![Image from Gyazo](https://i.gyazo.com/f8439b9aa49bee8577d26561aea49b28.png)](https://gyazo.com/f8439b9aa49bee8577d26561aea49b28)

## ネットワークとインターネットの違い

ネットワークはコンピューターー同士の接続。
インターネットは世界中のネットワークの集まり、家や会社でネッとワークを作ることでネットワーク上のそれぞれのスマホ同士で接続が可能

## ネットワーク原因調査
[参考URL](https://christina04.hatenablog.com/entry/2017/12/08/190000)

- ネットワーク原因調査

## ネットワーク疎通コマンド
[参考URL](https://yaruki-strong-zero.hatenablog.jp/entry/network_debug)


## ping

pingはICMPのエコー要求/応答機能を使った診断コマンド。
ちなみにICMPはL3のプロトコルなのでポートは関係ない。**portを指定するとerrorになる。**
pingはICMPを使っているため、**途中経路でICMPを許可していない場合は疎通が確認できない。**
たとえばAWSはデフォルトではICMPが使えません。

## nc(netcat)

Linuxでポートの疎通確認を行う際によく使う。tcpとudpどちらも対応している。


- nc(listener version)
ncコマンドはサーバとして使うこともできる。疎通先でサーバとして起動し、クライアントから確認することでネットワーク自体が繋がっているか確認するケースもある。

## traceroute

どんな経路を辿っているか知りたい時に使います。ICMP/UDP/TCPを使うことができます。


## 認証と認可

認証 : **ある個人を特定すること**
パスワードとユーザIDなどでログインできるかの判断

認可 : **行動やリソースの許可をすること**
認証を許可したものがどこまでのアクセス権限があるかの判断

## 上り・下り

- 上り
パソコンや携帯電話からインターネット上へファイルを転送する際の通信
（例）ブログに写真を載せる際の通信。メールの送信。

- 下り
インターネット上からファイルをパソコンや携帯電話に受け取る際の通信。
（例）インターネットから音楽や画像をダウンロードする。メールの受信。

## VNC(Virtual Network Computing)

VNCとは、ネットワークを通じて別のコンピューターーに接続しそのデスクトップ画面を呼び出して操作することができるリモートデスクトップソフトのひとつ。また、オリジナルのVNCを元に開発された派生ソフトウェア群の総称。さまざまな環境に移植され、相互に接続可能なため、異なるOSで操作するコンピューターの画面を呼び出して操作することができる。

## ネットワーク スパイクについて(各ベンダー)

クラウドサービスの場合

AWS（EC2）
急激なアクセス増加に対してはELBのスケールアウトが間に合わずにサービス断へ繋がる。
その場合には事前の暖機申請を行う必要がある。

GCP（ComputeEngine）
事前の暖機とか不要でこなせる。

## 127.0.0.1とlocalhostと0.0.0.0の違い

[参考URL](https://qiita.com/1ain2/items/194a9372798eaef6c5ab)

127.0.0.1
127.0.0.1はループバックアドレスのひとつであり、同時に127.0.0.1に対応する仮想的なネットワーク・インターフェイスを表す。
ループバックアドレスは自分自身を表す特別なIPアドレスのことです。
ループバックアドレスは**同一ホスト内でしか**通信を行わない。

localhost
127.0.0.1を表すホスト名のことです。
127.0.0.1とほぼイコールなので当たり前ですが、こちらも同一ホスト内でしか通信を行いません。
何らかの開発用サーバを立ち上げた際に、ブラウザにlocalhost:8080といったアドレスを入力することがあるかと思いますが、それはこのlocalhostです。

0.0.0.0
前者2つとだいぶ異なり、すべてのネットワーク・インターフェイスを表す。
ワイルドカードのようなもので、すべての通信を表す。
こちらは別ホストからでもアクセスすることが可能です。

## ペイロード
[さまざまな意味のペイロード](https://teratail.com/questions/150121)
ペイロードとは、IT用語としては、パケット通信において**パケットに含まれるヘッダーやトレーラーなどの付加的情報を除いた**データ本体のこと。
パケットにはデータの転送先や転送経路などを制御するための情報を含むヘッダーや、データの破損などを検査するトレーラーなどの情報が、データそのもののほかに付加されて送られる。

## ping
[参考URL](https://www.itbook.info/study/ping2.html)

pingはパケットを送って宛先が送り返すシンプルな動作。
つまりPingで確認できるレベルはIPレベルまでなのです。
OSI参照モデルでいうところの、「ネットワーク層」までの
確認になります。

さらにその上の層、「トランスポート層」や
「アプリケーション層」レベルの確認はできません。

「なんだPingって万能じゃないのね…」

いやいやその分シンプルで使いやすいし、
Pingだけでもある程度の切り分けは可能なんです。

たとえば、Pingは通るけどWebが見れないなんて時。

つまりIPレベルでの疎通はOKなのですから、ネットワーク的には
到達性を確保しているわけです。

そうなるとさらにその上のレベル、Webサーバーに問題が
あるんじゃあないの？
なんて切り分けができるわけです。

---

## 通信方式

### TCPソケット(HTTPリクエスト)



### UNIXドメインソケットとは
[参考URL](https://qiita.com/walk8243/items/49ce3fc24500038f126f)

ローカルで開かれた**ソケットファイル**を通じて、サーバー側とクライアント側とで通信を行う方法です。
Node.jsでは適用されていませんが、一般的には`unix://`でURLが始まる。
TCPで行う通信と異なり、ローカルファイルを指定して通信を行うため、ドメインの解決や外部通信をしない。
そのため**TCPに比べ速い。**

このUNIXドメインソケットは**ローカルマシン内で、プロセス間で通信を行う場合**に効果を発揮する。
たとえば、KubernetesのPod内のコンテナー間で通信を行う場合に使うことができます。
ボリュームを共有してマウントすることで通信ができるので、ドメインの名前解決に縛られることが無くなります。
ポートで通信を行う場合と比べて制限を受けない部分もあるので、一度使ってみてはどうですか？

## CIDR(Classless Inter-Domain Routing)


## Ingress(イングレス)

コンピューターネットワークにおいて、外部から内部ネットワークへのアクセスを許可するための方法のひとつ。  
具体的には、Ingressコントローラーを使用して、外部のHTTP(S)リクエストを内部のKubernetesサービスにルーティングすることが可能。  
Ingressは、ネットワークレベルでの負荷分散やTLS終端、ルーティングルールの定義など、多数の機能を提供するために使用されます。Ingressは、Kubernetesのオーケストレーションシステムであるコンテナーオーケストレーションシステムでよく使用されます。
