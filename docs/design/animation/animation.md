# animation

[参考](https://ics.media/entry/7162/)

HTML5でモーションを作成するときにトゥイーンライブラリを使用する

アニメーションを作るときには**アニメーションライブラリ**を使用する

## ユビキタス
fps(frame per second) : アニメーション1秒あたりのコマ数のこと
## 歴史
過去はFlashが全盛期だった

## 現在
Flashはなくなった。

## GSAP(グリーン・ソック・アニメーション・プラットフォーム)

Flash全盛の時代から存在する歴史あるトゥイーンライブラリ
GSAPはCSS/HTML5 Canvas/WebGLなどさまざまなアニメーション作成に利用できる。
類似トゥイーンライブラリよりも高機能であり、かつ実行パフォーマンスも優れているのが魅力的。
「GSAP」はかつてのTweenMax（高機能なトゥイーンライブラリ）やTweenLite（機能をシンプルした軽量なライブラリ）を統合したJSライブラリ
ウェブの古い記事では「TweenMax」で紹介されていることがありますが、「GSAP」は同じJSライブラリです。


## HTML5 Canvas

これはCanvasだけで作成するのは冗長でかなり大変となるため
現在はcreateJSで作成するらしい

HTML5のCanvas要素(JavaScriptではcanvasRenderingContext2Dオブジェクト)は従来Flashで制作してきたようなコンテンツの作成を可能にした。

HTML5 Canvas(Context2D)についてはCreateJSを使用するといい。

## HTML5 CanvasとWebGLの使い分け

[参考URL](https://ics.media/entry/5140/)
## WebGL

[WebGL入(MDN Web Docs)](https://developer.mozilla.org/ja/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL)

これは勘違いWebGL=3D表現というわけではない。
WebGLが一番効果的に使える場面は3D表現であることは間違いないが、必ずしもWebGLは3D表現だけに利用されているとは限らず、WebGLは2D表現にも利用できる。

WebGLは互換性のある任意のウェブブラウザ上でプラグインを使用せずにインタラクティブな2次元および3次元のコンピューターグラフィックをレンダリングするためのJavaScript APIである。

WebGLのプログラムはJavaScriptで記述する制御コードと、コンピューターのGraphics Processing Unit(GPU)で実行する特殊効果コードで構成される。

WebGLについてはJSライブラリPixi.jsなど、使うといい。
## WebGPU

>WebGLを先に知らないといけない。

WebGPUは画像処理と計算処理のアクセラレーション(処理を高める)のための将来のウェブ標準およびJavaScript APIのためのワーキングネームa

## なぜカクつきが起こるのか

FlashのStage3Dや、WebGLの登場によってブラウザ上でも高度な3D表現ができるようになり、ウェブコンテンツの表現の幅が広がった。
しかし高速といってもコンテンツの内容によっては処理負荷が高くなりカックつきが生じる場合がある。
カクつきはコンテンツの見栄えを損なわせ、作り手の想定とは異なる体験を与えてしまう可能性がある。

- カクつきが起こる理由
1コマ毎の描画処理が重く、fpsを一定に保つことができないため。
コマ数が多くなるほど滑らかなアニメーションとして見える。
一般的にコンシューマゲームやPCゲームなどは60fps、つまり1秒あたり60コマでアニメーションされるように作られている。
最近のVRでは120fpsが必要とも言われており、滑らかに再生させる重要性は高まっている。

>中でも3D表現をする場合はとくに処理負荷が高く、凝った表現をしようとするとfpsを保つ事が難しくなります。WebGLでの3D表現にも同様の事が言えます。

- カクつきを減らす
1描画にかかる処理時間を減らし安定した間隔で描画できることがカクつき解消において非常に重要になる。

## カクつき対策

1. fpsをわざと下げる
2. canvas要素の解像度を下げる
3. カクつきによる動きの遅れをなくす
4. CPUの種類によって処理負荷を減らす


## アニメーション種類

[参考URL](http://juen-cs.dl.juen.ac.jp/html/flash/04/01/explanation.html)

>トゥイーン（tween）とは、between（中間）に由来する言葉で、2つのイラストが変化しながら繋がるアニメーションのことを「トゥイーンアニメーション」といいます。トゥイーンアニメーションには「モーションアニメーション」と「シェイプアニメーション」の2種類があります。トゥイーンアニメーションを使用することで、前章のフレームアニメーションよりも滑らかな動きのアニメーションを作ることができます。


1. フレームアクション

フレームアクションとは、フレームと呼ばれる静止画を複数組み合わせることで作るアニメーションのことをいう。
![](./images/flash.png)

2. トゥイーンアニメーション

トゥイーンと言われるアニメーションは、始めと終わりの状態を指定することで、中間の状態を自動的に補完しアニメーションさせる技術


## アニメーションの基本的な仕組みと考え方

[参考URL](https://ics.media/entry/17183/)

アニメーションの仕組みは時間経過とともにある値を0(0%)~1(100%)の間で連続して変化をさせるということ。

具体的には**始点・時間・変化量**の3つの概念で考える。

例えば画像をX座標100pxから500pxまで2秒で移動させたいといった場合、X座標を100（始点）から、2秒かけて（時間）、+400する（変化量）」と考えます。

- 値を変化させるための計算式

アニメーションさせる値は、時間経過に合わせた計算が必要となる。

1. まず、**変化にかける時間**と**経過した時間**から進捗率を算出する。
2. つぎに**変化量に進捗率をかけ、始点に加える**ことでアニメーションの中の値が計算できる。

これがアニメーションさせるための心臓部ともいえる計算式
```js
// アニメーションの進捗率 = 経過した時間 / 変化にかける時間;
// アニメーション中の値 = 始点 + 変化量 * アニメーションの進捗率;
```

---

- 後半

[参考URL](https://ics.media/entry/17470/)

イージング：動きに深みを出す
エフェクト：演出にエフェクトを加えるCSSフィルター

## イージングとは

[イージング早見表](https://ics.media/entry/17470/)

最初はゆっくりで、徐々に早く変化させるといった具合に時間経過に応じて変化の速度を調整するのがイージング
>イージングには色々な種類がありますが、一般的には「easeIn~」（徐々に加速）、「easeOut~」（徐々に減速）、「easeInOut~」（加速してから減速）という名前が一般的
>このイージングはFlashやJavaScriptのトゥイーンエンジンで広く採用され、いまやデファクトスタンダードとなっています。
